{
  "version": 3,
  "sources": ["../height-map/node_modules/howler/dist/howler.js", "../height-map/node_modules/earcut/src/earcut.js", "../height-map/node_modules/@wonderlandengine/api/dist/index.js", "../height-map/node_modules/wasm-feature-detect/dist/esm/index.js", "../height-map/node_modules/@wonderlandengine/api/dist/property.js", "../height-map/node_modules/@wonderlandengine/api/dist/decorators.js", "../height-map/node_modules/@wonderlandengine/api/dist/utils/object.js", "../height-map/node_modules/@wonderlandengine/api/dist/utils/event.js", "../height-map/node_modules/@wonderlandengine/api/dist/wonderland.js", "../height-map/node_modules/@wonderlandengine/api/dist/utils/fetch.js", "../height-map/node_modules/@wonderlandengine/api/dist/utils/misc.js", "../height-map/node_modules/@wonderlandengine/api/dist/scene.js", "../height-map/node_modules/@wonderlandengine/api/dist/texture-manager.js", "../height-map/node_modules/@wonderlandengine/api/dist/engine.js", "../height-map/node_modules/@wonderlandengine/api/dist/utils/bitset.js", "../height-map/node_modules/@wonderlandengine/api/dist/utils/logger.js", "../height-map/node_modules/@wonderlandengine/api/dist/wasm.js", "../height-map/node_modules/@wonderlandengine/api/dist/version.js", "../height-map/node_modules/@wonderlandengine/components/dist/8thwall-camera.js", "../height-map/node_modules/@wonderlandengine/components/dist/utils/webxr.js", "../height-map/node_modules/@wonderlandengine/components/dist/anchor.js", "../height-map/node_modules/@wonderlandengine/components/dist/cursor-target.js", "../height-map/node_modules/gl-matrix/esm/common.js", "../height-map/node_modules/gl-matrix/esm/mat3.js", "../height-map/node_modules/gl-matrix/esm/mat4.js", "../height-map/node_modules/gl-matrix/esm/quat.js", "../height-map/node_modules/gl-matrix/esm/vec3.js", "../height-map/node_modules/gl-matrix/esm/vec4.js", "../height-map/node_modules/gl-matrix/esm/quat2.js", "../height-map/node_modules/@wonderlandengine/components/dist/hit-test-location.js", "../height-map/node_modules/@wonderlandengine/components/dist/cursor.js", "../height-map/node_modules/@wonderlandengine/components/dist/debug-object.js", "../height-map/node_modules/@wonderlandengine/components/dist/fixed-foveation.js", "../height-map/node_modules/@wonderlandengine/components/dist/hand-tracking.js", "../height-map/node_modules/@wonderlandengine/components/dist/howler-audio-listener.js", "../height-map/node_modules/@wonderlandengine/components/dist/howler-audio-source.js", "../height-map/node_modules/@wonderlandengine/components/dist/utils/utils.js", "../height-map/node_modules/@wonderlandengine/components/dist/image-texture.js", "../height-map/node_modules/@wonderlandengine/components/dist/mouse-look.js", "../height-map/node_modules/@wonderlandengine/components/dist/player-height.js", "../height-map/node_modules/@wonderlandengine/components/dist/target-framerate.js", "../height-map/node_modules/@wonderlandengine/components/dist/teleport.js", "../height-map/node_modules/@wonderlandengine/components/dist/trail.js", "../height-map/node_modules/@wonderlandengine/components/dist/two-joint-ik-solver.js", "../height-map/node_modules/@wonderlandengine/components/dist/video-texture.js", "../height-map/node_modules/@wonderlandengine/components/dist/vr-mode-active-switch.js", "../height-map/node_modules/@wonderlandengine/components/dist/plane-detection.js", "../height-map/node_modules/@wonderlandengine/components/dist/vrm.js", "../height-map/node_modules/@wonderlandengine/components/dist/wasd-controls.js", "../height-map/js/height-map.js", "../height-map/js/index.js"],
  "sourcesContent": ["/*!\n *  howler.js v2.2.3\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Create a global ID counter.\n      self._counter = 1000;\n\n      // Pool of unlocked HTML5 Audio objects.\n      self._html5AudioPool = [];\n      self.html5PoolSize = 10;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto audio unlocker.\n      self.autoUnlock = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Handle stopping all sounds globally.\n     */\n    stop: function() {\n      var self = this || Howler;\n\n      // Loop through all Howls and stop them.\n      for (var i=0; i<self._howls.length; i++) {\n        self._howls[i].stop();\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var ua = self._navigator ? self._navigator.userAgent : '';\n      var checkOpera = ua.match(/OPR\\/([0-6].)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n      var checkSafari = ua.indexOf('Safari') !== -1 && ua.indexOf('Chrome') === -1;\n      var safariVersion = ua.match(/Version\\/(.*?) /);\n      var isOldSafari = (checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!(audioTest.canPlayType('audio/wav; codecs=\"1\"') || audioTest.canPlayType('audio/wav')).replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        m4b: !!(audioTest.canPlayType('audio/x-m4b;') || audioTest.canPlayType('audio/m4b;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Some browsers/devices will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _unlockAudio: function() {\n      var self = this || Howler;\n\n      // Only run this if Web Audio is supported and it hasn't already been unlocked.\n      if (self._audioUnlocked || !self.ctx) {\n        return;\n      }\n\n      self._audioUnlocked = false;\n      self.autoUnlock = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function(e) {\n        // Create a pool of unlocked HTML5 Audio objects that can\n        // be used for playing sounds without user interaction. HTML5\n        // Audio objects must be individually unlocked, as opposed\n        // to the WebAudio API which only needs a single activation.\n        // This must occur before WebAudio setup or the source.onended\n        // event will not fire.\n        while (self._html5AudioPool.length < self.html5PoolSize) {\n          try {\n            var audioNode = new Audio();\n\n            // Mark this Audio object as unlocked to ensure it can get returned\n            // to the unlocked pool when released.\n            audioNode._unlocked = true;\n\n            // Add the audio node to the pool.\n            self._releaseHtml5Audio(audioNode);\n          } catch (e) {\n            self.noAudio = true;\n            break;\n          }\n        }\n\n        // Loop through any assigned audio nodes and unlock them.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and unlock the audio nodes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node && !sound._node._unlocked) {\n                sound._node._unlocked = true;\n                sound._node.load();\n              }\n            }\n          }\n        }\n\n        // Fix Android can not play in suspend state.\n        self._autoResume();\n\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n        if (typeof self.ctx.resume === 'function') {\n          self.ctx.resume();\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._audioUnlocked = true;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchstart', unlock, true);\n          document.removeEventListener('touchend', unlock, true);\n          document.removeEventListener('click', unlock, true);\n          document.removeEventListener('keydown', unlock, true);\n\n          // Let all sounds know that audio has been unlocked.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('unlock');\n          }\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchstart', unlock, true);\n      document.addEventListener('touchend', unlock, true);\n      document.addEventListener('click', unlock, true);\n      document.addEventListener('keydown', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Get an unlocked HTML5 Audio object from the pool. If none are left,\n     * return a new Audio object and throw a warning.\n     * @return {Audio} HTML5 Audio object.\n     */\n    _obtainHtml5Audio: function() {\n      var self = this || Howler;\n\n      // Return the next object from the pool if one exists.\n      if (self._html5AudioPool.length) {\n        return self._html5AudioPool.pop();\n      }\n\n      //.Check if the audio is locked and throw a warning.\n      var testPlay = new Audio().play();\n      if (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n        testPlay.catch(function() {\n          console.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n        });\n      }\n\n      return new Audio();\n    },\n\n    /**\n     * Return an activated HTML5 Audio object to the pool.\n     * @return {Howler}\n     */\n    _releaseHtml5Audio: function(audio) {\n      var self = this || Howler;\n\n      // Don't add audio to the pool if we don't know if it has been unlocked.\n      if (audio._unlocked) {\n        self._html5AudioPool.push(audio);\n      }\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n\n        // Handle updating the state of the audio context after suspending.\n        var handleSuspension = function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        };\n\n        // Either the state gets suspended or it is interrupted.\n        // Either way, we need to update the state to suspended.\n        self.ctx.suspend().then(handleSuspension, handleSuspension);\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self.ctx.state !== 'interrupted' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended' || self.state === 'running' && self.ctx.state === 'interrupted') {\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean' || o.preload === 'metadata') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n      self._xhr = {\n        method: o.xhr && o.xhr.method ? o.xhr.method : 'GET',\n        headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,\n        withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false,\n      };\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n      self._playLock = false;\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onplayerror = o.onplayerror ? [{fn: o.onplayerror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onunlock = o.onunlock ? [{fn: o.onunlock}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.autoUnlock) {\n        Howler._unlockAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload && self._preload !== 'none') {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Log a warning if no extension was found.\n        if (!ext) {\n          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n        }\n\n        // Check if this extension is available.\n        if (ext && Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        if (!self._playLock) {\n          var num = 0;\n          for (var i=0; i<self._sounds.length; i++) {\n            if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n              num++;\n              id = self._sounds[i]._id;\n            }\n          }\n\n          if (num === 1) {\n            sprite = null;\n          } else {\n            id = null;\n          }\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If the sound hasn't loaded, we must wait to get the audio's duration.\n      // We also need to wait to make sure we don't run into race conditions with\n      // the order of function calls.\n      if (self._state !== 'loaded') {\n        // Set the sprite value on this sound.\n        sound._sprite = sprite;\n\n        // Mark this sound as not ended in case another sound is played before this one loads.\n        sound._ended = false;\n\n        // Add the sound to the queue to be played on load.\n        var soundId = sound._id;\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(soundId);\n          }\n        });\n\n        return soundId;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          self._loadQueue('play');\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n      var start = self._sprite[sprite][0] / 1000;\n      var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._sprite = sprite;\n\n      // Mark the sound as ended instantly so that this async playback\n      // doesn't get grabbed by another call to play while this one waits to start.\n      sound._ended = false;\n\n      // Update the parameters of the sound.\n      var setParams = function() {\n        sound._paused = false;\n        sound._seek = seek;\n        sound._start = start;\n        sound._stop = stop;\n        sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n      };\n\n      // End the sound instantly if seek is at the end.\n      if (seek >= stop) {\n        self._ended(sound);\n        return;\n      }\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._playLock = false;\n          setParams();\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }, 0);\n          }\n        };\n\n        if (Howler.state === 'running' && Howler.ctx.state !== 'interrupted') {\n          playWebAudio();\n        } else {\n          self._playLock = true;\n\n          // Wait for the audio context to resume before playing.\n          self.once('resume', playWebAudio);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          // Some browsers will throw an error if this is called without user interaction.\n          try {\n            var play = node.play();\n\n            // Support older browsers that don't support promises, and thus don't have this issue.\n            if (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n              // Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n              self._playLock = true;\n\n              // Set param values immediately.\n              setParams();\n\n              // Releases the lock and executes queued actions.\n              play\n                .then(function() {\n                  self._playLock = false;\n                  node._unlocked = true;\n                  if (!internal) {\n                    self._emit('play', sound._id);\n                  } else {\n                    self._loadQueue();\n                  }\n                })\n                .catch(function() {\n                  self._playLock = false;\n                  self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                    'on mobile devices and Chrome where playback was not within a user interaction.');\n\n                  // Reset the ended and paused values.\n                  sound._ended = true;\n                  sound._paused = true;\n                });\n            } else if (!internal) {\n              self._playLock = false;\n              setParams();\n              self._emit('play', sound._id);\n            }\n\n            // Setting rate before playing won't work in IE, so we set it again here.\n            node.playbackRate = sound._rate;\n\n            // If the node is still paused, then we can assume there was a playback issue.\n            if (node.paused) {\n              self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                'on mobile devices and Chrome where playback was not within a user interaction.');\n              return;\n            }\n\n            // Setup the end timer on sprites or listen for the ended event.\n            if (sprite !== '__default' || sound._loop) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            } else {\n              self._endTimers[sound._id] = function() {\n                // Fire ended on this audio node.\n                self._ended(sound);\n\n                // Clear this listener.\n                node.removeEventListener('ended', self._endTimers[sound._id], false);\n              };\n              node.addEventListener('ended', self._endTimers[sound._id], false);\n            }\n          } catch (err) {\n            self._emit('playerror', sound._id, err);\n          }\n        };\n\n        // If this is streaming audio, make sure the src is set and load again.\n        if (node.src === 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA') {\n          node.src = self._src;\n          node.load();\n        }\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (window && window.ejecta) || (!node.readyState && Howler._navigator.isCocoonJS);\n        if (node.readyState >= 3 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          self._playLock = true;\n          self._state = 'loading';\n\n          var listener = function() {\n            self._state = 'loaded';\n            \n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound has been created.\n              if (!sound._node.bufferSource) {\n                continue;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound's AudioBufferSourceNode has been created.\n              if (sound._node.bufferSource) {\n                if (typeof sound._node.bufferSource.stop === 'undefined') {\n                  sound._node.bufferSource.noteOff(0);\n                } else {\n                  sound._node.bufferSource.stop(0);\n                }\n\n                // Clean up the buffer source.\n                self._cleanBuffer(sound._node);\n              }\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n\n              // If this is a live stream, stop download once the audio is stopped.\n              if (sound._node.duration === Infinity) {\n                self._clearSound(sound._node);\n              }\n            }\n          }\n\n          if (!internal) {\n            self._emit('stop', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded'|| self._playLock) {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          // Cancel active fade and set the volume to the end value.\n          if (sound._interval) {\n            self._stopFade(sound._id);\n          }\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded'|| self._playLock) {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Make sure the to/from/len values are numbers.\n      from = Math.min(Math.max(0, parseFloat(from)), 1);\n      to = Math.min(Math.max(0, parseFloat(to)), 1);\n      len = parseFloat(len);\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          self._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Starts the internal interval to fade a sound.\n     * @param  {Object} sound Reference to sound to fade.\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id to fade.\n     * @param  {Boolean} isGroup   If true, set the volume on the group.\n     */\n    _startFadeInterval: function(sound, from, to, len, id, isGroup) {\n      var self = this;\n      var vol = from;\n      var diff = to - from;\n      var steps = Math.abs(diff / 0.01);\n      var stepLen = Math.max(4, (steps > 0) ? len / steps : len);\n      var lastTick = Date.now();\n\n      // Store the value being faded to.\n      sound._fadeTo = to;\n\n      // Update the volume value on each interval tick.\n      sound._interval = setInterval(function() {\n        // Update the volume based on the time since the last tick.\n        var tick = (Date.now() - lastTick) / len;\n        lastTick = Date.now();\n        vol += diff * tick;\n\n        // Round to within 2 decimal points.\n        vol = Math.round(vol * 100) / 100;\n\n        // Make sure the volume is in the right bounds.\n        if (diff < 0) {\n          vol = Math.max(to, vol);\n        } else {\n          vol = Math.min(to, vol);\n        }\n\n        // Change the volume.\n        if (self._webAudio) {\n          sound._volume = vol;\n        } else {\n          self.volume(vol, sound._id, true);\n        }\n\n        // Set the group's volume.\n        if (isGroup) {\n          self._volume = vol;\n        }\n\n        // When the fade is complete, stop it and fire event.\n        if ((to < from && vol <= to) || (to > from && vol >= to)) {\n          clearInterval(sound._interval);\n          sound._interval = null;\n          sound._fadeTo = null;\n          self.volume(to, sound._id);\n          self._emit('fade', sound._id);\n        }\n      }, stepLen);\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self.volume(sound._fadeTo, id);\n        sound._fadeTo = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n\n              // If playing, restart playback to ensure looping updates.\n              if (self.playing(ids[i])) {\n                self.pause(ids[i], true);\n                self.play(ids[i], true);\n              }\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded' || self._playLock) {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            if (self.playing(id[i])) {\n              sound._rateSeek = self.seek(id[i]);\n              sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            }\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        if (self._sounds.length) {\n          id = self._sounds[0]._id;\n        }\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else if (self._sounds.length) {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return 0;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (typeof seek === 'number' && (self._state !== 'loaded' || self._playLock)) {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n            sound._node.currentTime = seek;\n          }\n\n          // Seek and emit when ready.\n          var seekAndEmit = function() {\n            // Restart the playback if the sound was playing.\n            if (playing) {\n              self.play(id, true);\n            }\n\n            self._emit('seek', id);\n          };\n\n          // Wait for the play lock to be unset before emitting (HTML5 Audio).\n          if (playing && !self._webAudio) {\n            var emitSeek = function() {\n              if (!self._playLock) {\n                seekAndEmit();\n              } else {\n                setTimeout(emitSeek, 0);\n              }\n            };\n            setTimeout(emitSeek, 0);\n          } else {\n            seekAndEmit();\n          }\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading (except in IE).\n          self._clearSound(sounds[i]._node);\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n          sounds[i]._node.removeEventListener('ended', sounds[i]._endFn, false);\n\n          // Release the Audio object back to the pool.\n          Howler._releaseHtml5Audio(sounds[i]._node);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n      }\n\n      // Remove the references in the global Howler object.\n      var index = Howler._howls.indexOf(self);\n      if (index >= 0) {\n        Howler._howls.splice(index, 1);\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      // Allow passing just an event and ID.\n      if (typeof fn === 'number') {\n        id = fn;\n        fn = null;\n      }\n\n      if (fn || id) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          var isId = (id === events[i].id);\n          if (fn === events[i].fn && isId || !fn && isId) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        // Only fire the listener if the correct ID is used.\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      // Pass the event type into load queue so that it can continue stepping.\n      self._loadQueue(event);\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function(event) {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // Remove this task if a matching event was passed.\n        if (task.event === event) {\n          self._queue.shift();\n          self._loadQueue();\n        }\n\n        // Run the task if no event type is passed.\n        if (!event) {\n          task.action();\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // If we are using IE and there was network latency we may be clipping\n      // audio before it completes playing. Lets check the node to make sure it\n      // believes it has completed, before ending the playback.\n      if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n        setTimeout(self._ended.bind(self, sound), 100);\n        return self;\n      }\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id, true);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        // Clear the timeout or remove the ended listener.\n        if (typeof self._endTimers[id] !== 'function') {\n          clearTimeout(self._endTimers[id]);\n        } else {\n          var sound = self._soundById(id);\n          if (sound && sound._node) {\n            sound._node.removeEventListener('ended', self._endTimers[id], false);\n          }\n        }\n\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop || 0;\n      }\n      sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n      var isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n      if (Howler._scratchBuffer && node.bufferSource) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        if (isIOS) {\n          try { node.bufferSource.buffer = Howler._scratchBuffer; } catch(e) {}\n        }\n      }\n      node.bufferSource = null;\n\n      return self;\n    },\n\n    /**\n     * Set the source to a 0-second silence to stop any downloading (except in IE).\n     * @param  {Object} node Audio node to clear.\n     */\n    _clearSound: function(node) {\n      var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n      if (!checkIE) {\n        node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n      }\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = ++Howler._counter;\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else if (!Howler.noAudio) {\n        // Get an unlocked Audio object from the pool.\n        self._node = Howler._obtainHtml5Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Listen for the 'ended' event on the sound to account for edge-case where\n        // a finite sound has a duration of Infinity.\n        self._endFn = self._endListener.bind(self);\n        self._node.addEventListener('ended', self._endFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = parent._preload === true ? 'auto' : parent._preload;\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = ++Howler._counter;\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorFn, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    },\n\n    /**\n     * HTML5 Audio ended listener callback.\n     */\n    _endListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Only handle the `ended`` event if the duration is Infinity.\n      if (parent._duration === Infinity) {\n        // Update the parent duration to match the real audio duration.\n        // Round up the duration to account for the lower precision in HTML5 Audio.\n        parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n        // Update the sprite that corresponds to the real duration.\n        if (parent._sprite.__default[1] === Infinity) {\n          parent._sprite.__default[1] = parent._duration * 1000;\n        }\n\n        // Run the regular ended method.\n        parent._ended(self);\n      }\n\n      // Clear the event listener since the duration is now correct.\n      self._node.removeEventListener('ended', self._endFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open(self._xhr.method, url, true);\n      xhr.withCredentials = self._xhr.withCredentials;\n      xhr.responseType = 'arraybuffer';\n\n      // Apply any custom headers to the request.\n      if (self._xhr.headers) {\n        Object.keys(self._xhr.headers).forEach(function(key) {\n          xhr.setRequestHeader(key, self._xhr.headers[key]);\n        });\n      }\n\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Fire a load error if something broke.\n    var error = function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    };\n\n    // Load the sound on success.\n    var success = function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      } else {\n        error();\n      }\n    };\n\n    // Decode the buffer into an audio source.\n    if (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n      Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n    } else {\n      Howler.ctx.decodeAudioData(arraybuffer, success, error);\n    }\n  }\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // If we have already detected that Web Audio isn't supported, don't run this step again.\n    if (!Howler.usingWebAudio) {\n      return;\n    }\n\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // If the audio context creation still failed, set using web audio to false.\n    if (!Howler.ctx) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : Howler._volume, Howler.ctx.currentTime);\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Add to global in Node.js (for testing, etc).\n  if (typeof global !== 'undefined') {\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  } else if (typeof window !== 'undefined') {  // Define globally in case AMD is not available or unused.\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.2.3\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n\n      if (typeof self.ctx.listener.positionX !== 'undefined') {\n        self.ctx.listener.positionX.setTargetAtTime(self._pos[0], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionY.setTargetAtTime(self._pos[1], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionZ.setTargetAtTime(self._pos[2], Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n      }\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n\n      if (typeof self.ctx.listener.forwardX !== 'undefined') {\n        self.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n      }\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              if (typeof sound._panner.positionX !== 'undefined') {\n                sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);\n                sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);\n                sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);\n              } else {\n                sound._panner.setPosition(pan, 0, 0);\n              }\n            } else {\n              sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or group relative to the global listener.\n   * @param  {Number} x  The x-position of the audio source.\n   * @param  {Number} y  The y-position of the audio source.\n   * @param  {Number} z  The z-position of the audio source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.positionX !== 'undefined') {\n              sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setPosition(x, y, z);\n            }\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.orientationX !== 'undefined') {\n              sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setOrientation(x, y, z);\n            }\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      inside of which there will be no volume reduction.\n   *     coneOuterAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      outside of which the volume will be reduced to a constant value of `coneOuterGain`.\n   *     coneOuterGain - (0 by default) A parameter for directional audio sources, this is the gain outside of the\n   *                     `coneOuterAngle`. It is a linear value in the range `[0, 1]`.\n   *     distanceModel - ('inverse' by default) Determines algorithm used to reduce volume as audio moves away from\n   *                     listener. Can be `linear`, `inverse` or `exponential.\n   *     maxDistance - (10000 by default) The maximum distance between source and listener, after which the volume\n   *                   will not be reduced any further.\n   *     refDistance - (1 by default) A reference distance for reducing volume as source moves further from the listener.\n   *                   This is simply a variable of the distance model and has a different effect depending on which model\n   *                   is used and the scale of your coordinates. Generally, volume will be equal to 1 at this distance.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener. This is simply a\n   *                     variable of the distance model and can be in the range of `[0, 1]` with `linear` and `[0, \u221E]`\n   *                     with `inverse` and `exponential`.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *\n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          if (!o.pannerAttr) {\n            o.pannerAttr = {\n              coneInnerAngle: o.coneInnerAngle,\n              coneOuterAngle: o.coneOuterAngle,\n              coneOuterGain: o.coneOuterGain,\n              distanceModel: o.distanceModel,\n              maxDistance: o.maxDistance,\n              refDistance: o.refDistance,\n              rolloffFactor: o.rolloffFactor,\n              panningModel: o.panningModel\n            };\n          }\n\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== 'undefined' ? o.pannerAttr.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== 'undefined' ? o.pannerAttr.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.pannerAttr.coneOuterGain !== 'undefined' ? o.pannerAttr.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.pannerAttr.distanceModel !== 'undefined' ? o.pannerAttr.distanceModel : self._distanceModel,\n            maxDistance: typeof o.pannerAttr.maxDistance !== 'undefined' ? o.pannerAttr.maxDistance : self._maxDistance,\n            refDistance: typeof o.pannerAttr.refDistance !== 'undefined' ? o.pannerAttr.refDistance : self._refDistance,\n            rolloffFactor: typeof o.pannerAttr.rolloffFactor !== 'undefined' ? o.pannerAttr.rolloffFactor : self._rolloffFactor,\n            panningModel: typeof o.pannerAttr.panningModel !== 'undefined' ? o.pannerAttr.panningModel : self._panningModel\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel\n        };\n\n        // Update the panner values or create a new panner if none exists.\n        var panner = sound._panner;\n        if (panner) {\n          panner.coneInnerAngle = pa.coneInnerAngle;\n          panner.coneOuterAngle = pa.coneOuterAngle;\n          panner.coneOuterGain = pa.coneOuterGain;\n          panner.distanceModel = pa.distanceModel;\n          panner.maxDistance = pa.maxDistance;\n          panner.refDistance = pa.refDistance;\n          panner.rolloffFactor = pa.rolloffFactor;\n          panner.panningModel = pa.panningModel;\n        } else {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      } else if (self._panner) {\n        // Disconnect the panner.\n        self._panner.disconnect(0);\n        self._panner = undefined;\n        parent._refreshBuffer(self);\n      }\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n\n      if (typeof sound._panner.positionX !== 'undefined') {\n        sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);\n        sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);\n        sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      }\n\n      if (typeof sound._panner.orientationX !== 'undefined') {\n        sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);\n        sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);\n        sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n      }\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id, true);\n    }\n  };\n})();\n", "'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim | 0);\n            triangles.push(ear.i / dim | 0);\n            triangles.push(next.i / dim | 0);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    var p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim | 0);\n            triangles.push(p.i / dim | 0);\n            triangles.push(b.i / dim | 0);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    var bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    var bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = 0;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n", "import { simd, threads } from 'wasm-feature-detect';\nimport { WonderlandEngine } from './engine.js';\nimport { LogLevel } from './utils/logger.js';\nimport { WASM } from './wasm.js';\nimport { APIVersion } from './version.js';\nimport { getBaseUrl } from './utils/fetch.js';\nexport * from './utils/bitset.js';\nexport * from './utils/event.js';\nexport * from './utils/logger.js';\nexport * from './wonderland.js';\nexport * from './engine.js';\nexport * from './scene.js';\nexport * from './property.js';\nexport * from './texture-manager.js';\nexport * from './version.js';\nexport * from './wasm.js';\n/** Relative default path for the loading screen. */\nconst LOADING_SCREEN_PATH = 'WonderlandRuntime-LoadingScreen.bin';\nfunction loadScript(scriptURL) {\n    return new Promise((res, rej) => {\n        const s = document.createElement('script');\n        const node = document.body.appendChild(s);\n        s.onload = () => {\n            document.body.removeChild(node);\n            res();\n        };\n        s.onerror = (e) => {\n            document.body.removeChild(node);\n            rej(e);\n        };\n        s.src = scriptURL;\n    });\n}\n/**\n * Finds whether simd & threading are supported or not.\n *\n * @returns An object containing boolean for simd and thread.\n */\nasync function detectFeatures() {\n    let [simdSupported, threadsSupported] = await Promise.all([simd(), threads()]);\n    if (simdSupported) {\n        console.log('WASM SIMD is supported');\n    }\n    else {\n        console.warn('WASM SIMD is not supported');\n    }\n    if (threadsSupported) {\n        if (self.crossOriginIsolated) {\n            console.log('WASM Threads is supported');\n        }\n        else {\n            console.warn('WASM Threads is supported, but the page is not crossOriginIsolated, therefore thread support is disabled.');\n        }\n    }\n    else {\n        console.warn('WASM Threads is not supported');\n    }\n    threadsSupported = threadsSupported && self.crossOriginIsolated;\n    return {\n        simdSupported,\n        threadsSupported,\n    };\n}\n/* Global boolean to check if AR/VR is supported. */\nconst xrSupported = {\n    ar: null,\n    vr: null,\n};\n/**\n * Check whether XR is supported and store the result in the global space.\n */\nfunction checkXRSupport() {\n    if (typeof navigator === 'undefined' || !navigator.xr) {\n        xrSupported.vr = false;\n        xrSupported.ar = false;\n        return Promise.resolve(xrSupported);\n    }\n    const vrPromise = xrSupported.vr !== null\n        ? Promise.resolve()\n        : navigator.xr\n            .isSessionSupported('immersive-vr')\n            .then((supported) => (xrSupported.vr = supported));\n    const arPromise = xrSupported.ar !== null\n        ? Promise.resolve()\n        : navigator.xr\n            .isSessionSupported('immersive-ar')\n            .then((supported) => (xrSupported.ar = supported));\n    return Promise.all([vrPromise, arPromise]).then(() => xrSupported);\n}\n/**\n * Ensures that this API is compatible with the given\n * runtime version.\n *\n * We only enforce compatibility for major and minor components, i.e.,\n * the runtime and the API must both be of the form `x.y.*`.\n *\n * @throws If the major or the minor components are different.\n *\n * @param version The target version\n */\nexport function checkRuntimeCompatibility(version) {\n    const { major, minor } = version;\n    let majorDiff = major - APIVersion.major;\n    let minorDiff = minor - APIVersion.minor;\n    /* Same version, so perfectly compatible. */\n    if (!majorDiff && !minorDiff)\n        return;\n    const error = 'checkRuntimeCompatibility(): Version compatibility mismatch:\\n' +\n        '\\t\u2192 API and runtime compatibility is enforced on a patch level (versions x.y.*)\\n';\n    const isRuntimeOlder = majorDiff < 0 || (!majorDiff && minorDiff < 0);\n    if (isRuntimeOlder) {\n        /* Runtime is out of date. */\n        throw new Error(`${error}\\t\u2192 Please use a Wonderland Engine editor version >= ${APIVersion.major}.${APIVersion.minor}.*`);\n    }\n    /* API is out of date. */\n    throw new Error(`${error}\\t\u2192 Please use a new API version >= ${version.major}.${version.minor}.*`);\n}\n/**\n * Load the runtime using the WASM and JS files.\n *\n * @param runtime The runtime base string, e.g,: `WonderlandRuntime-loader-physx`.\n * @param options Options to modify the loading behaviour.\n *\n * @returns A promise that resolves when the engine is ready to be used.\n */\nexport async function loadRuntime(runtime, options = {}) {\n    const xrPromise = checkXRSupport();\n    const baseURL = getBaseUrl(runtime);\n    const { simdSupported, threadsSupported } = await detectFeatures();\n    const { simd = simdSupported, threads = threadsSupported, physx = false, loader = false, xrFramebufferScaleFactor = 1.0, xrOfferSession = null, loadingScreen = baseURL ? `${baseURL}/${LOADING_SCREEN_PATH}` : LOADING_SCREEN_PATH, canvas = 'canvas', logs = [LogLevel.Info, LogLevel.Warn, LogLevel.Error], } = options;\n    const variant = [];\n    if (loader)\n        variant.push('loader');\n    if (physx)\n        variant.push('physx');\n    if (simd)\n        variant.push('simd');\n    if (threads)\n        variant.push('threads');\n    const variantStr = variant.join('-');\n    let filename = runtime;\n    if (variantStr)\n        filename = `${filename}-${variantStr}`;\n    const download = function (filename, errorMessage) {\n        return fetch(filename)\n            .then((r) => {\n            if (!r.ok)\n                return Promise.reject(errorMessage);\n            return r.arrayBuffer();\n        })\n            .catch((_) => Promise.reject(errorMessage));\n    };\n    const [wasmData, loadingScreenData] = await Promise.all([\n        download(`${filename}.wasm`, 'Failed to fetch runtime .wasm file'),\n        download(loadingScreen, 'Failed to fetch loading screen file'),\n    ]);\n    const glCanvas = document.getElementById(canvas);\n    if (!glCanvas) {\n        throw new Error(`loadRuntime(): Failed to find canvas with id '${canvas}'`);\n    }\n    if (!(glCanvas instanceof HTMLCanvasElement)) {\n        throw new Error(`loadRuntime(): HTML element '${canvas}' must be a canvas`);\n    }\n    const wasm = new WASM(threads);\n    wasm.worker = `${filename}.worker.js`;\n    wasm.wasm = wasmData;\n    wasm.canvas = glCanvas;\n    wasm._log.levels.enable(...logs);\n    const engine = new WonderlandEngine(wasm, loadingScreenData);\n    if (!window._WL) {\n        window._WL = { runtimes: {} };\n    }\n    const runtimes = window._WL.runtimes;\n    /* Global identifier of this runtime in `window`. */\n    const runtimeGlobalId = variantStr ? variantStr : 'default';\n    /* Only load the runtime if not previously loaded in the page */\n    if (!runtimes[runtimeGlobalId]) {\n        await loadScript(`${filename}.js`);\n        runtimes[runtimeGlobalId] = window.instantiateWonderlandRuntime;\n        window.instantiateWonderlandRuntime = undefined;\n    }\n    await runtimes[runtimeGlobalId](wasm);\n    engine._init();\n    /* Throws if the runtime isn't compatible with the API. */\n    checkRuntimeCompatibility(engine.runtimeVersion);\n    const xr = await xrPromise;\n    engine.arSupported = xr.ar;\n    engine.vrSupported = xr.vr;\n    engine.xrFramebufferScaleFactor = xrFramebufferScaleFactor;\n    engine.autoResizeCanvas = true;\n    engine.start();\n    if (xrOfferSession !== null) {\n        let mode = xrOfferSession.mode;\n        if (mode == 'auto') {\n            if (engine.vrSupported) {\n                mode = 'immersive-vr';\n            }\n            else if (engine.arSupported) {\n                mode = 'immersive-ar';\n            }\n            else {\n                mode = 'inline';\n            }\n        }\n        const offerSession = function () {\n            engine\n                .offerXRSession(mode, xrOfferSession.features, xrOfferSession.optionalFeatures)\n                .then(\n            /* When the session ends, offer to start a new one again */\n            (s) => s.addEventListener('end', offerSession))\n                /* The browser may not suppoer offer session, or a previous request\n                 * was replaced by a new one. Not crucial, but inform the user. */\n                .catch(console.warn);\n        };\n        offerSession();\n    }\n    return engine;\n}\n", "export const bigInt=()=>(async e=>{try{return(await WebAssembly.instantiate(e)).instance.exports.b(BigInt(0))===BigInt(0)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,126,1,126,3,2,1,0,7,5,1,1,98,0,0,10,6,1,4,0,32,0,11])),bulkMemory=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),exceptions=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),extendedConst=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,5,3,1,0,1,11,9,1,0,65,1,65,2,106,11,0])),gc=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,10,2,95,1,125,0,96,0,1,107,0,3,2,1,1,10,12,1,10,0,67,0,0,0,0,251,7,0,11])),memory64=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,5,3,1,4,1])),multiValue=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,0,2,127,127,3,2,1,0,10,8,1,6,0,65,0,65,0,11])),mutableGlobals=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1])),referenceTypes=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,7,1,5,0,208,112,26,11])),relaxedSimd=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,15,1,13,0,65,1,253,15,65,2,253,15,253,128,2,11])),saturatedFloatToInt=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,12,1,10,0,67,0,0,0,0,252,0,26,11])),signExtensions=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,65,0,192,26,11])),simd=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),streamingCompilation=()=>(async()=>\"compileStreaming\"in WebAssembly)(),tailCall=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,6,1,4,0,18,0,11])),threads=()=>(async e=>{try{return\"undefined\"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));\n", "/**\n * Component property type.\n */\nexport var Type;\n(function (Type) {\n    /**\n     * **Native**\n     *\n     * Property of a native component. Must not be used in custom components.\n     *\n     * @hidden\n     */\n    Type[Type[\"Native\"] = 1] = \"Native\";\n    /**\n     * **Bool**:\n     *\n     * Appears in the editor as a checkbox.\n     *\n     * Initial value is `false`, unless overridden by the `default` property.\n     */\n    Type[Type[\"Bool\"] = 2] = \"Bool\";\n    /**\n     * **Int**:\n     *\n     * Appears in the editor as an integer input field.\n     *\n     * Initial value is `0`, unless overridden by the `default` property.\n     */\n    Type[Type[\"Int\"] = 4] = \"Int\";\n    /**\n     * **Float**:\n     *\n     * Appears in the editor as a floating point input field.\n     *\n     * Initial value is `0.0`, unless overridden by the `default` property.\n     */\n    Type[Type[\"Float\"] = 8] = \"Float\";\n    /**\n     * **String / Text**:\n     *\n     * Appears in the editor as a single-line text input field.\n     *\n     * Initial value is an empty string, unless overridden by the `default`\n     * property.\n     */\n    Type[Type[\"String\"] = 16] = \"String\";\n    /**\n     * **Enumeration**:\n     *\n     * Appears in the editor as a dropdown with given values. The additional\n     * `values` parameter with selection options is mandatory.\n     *\n     * The property value is resolved to an **index** into the `values` array.\n     *\n     * Initial value is the first element in `values`, unless overridden by\n     * the `default` property. The `default` value can be a string or an index\n     * into `values`.\n     *\n     * @example\n     *\n     * ```js\n     *     camera: {type: Type.Enum, values: ['auto', 'back', 'front'], default: 'auto'},\n     * ```\n     */\n    Type[Type[\"Enum\"] = 32] = \"Enum\";\n    /**\n     * **Object reference**:\n     *\n     * Appears in the editor as an object resource selection dropdown\n     * with object picker.\n     *\n     * Initial value is `null`.\n     */\n    Type[Type[\"Object\"] = 64] = \"Object\";\n    /**\n     * **Mesh reference**:\n     *\n     * Appears in the editor as a mesh resource selection dropdown.\n     *\n     * Initial value is `null`.\n     */\n    Type[Type[\"Mesh\"] = 128] = \"Mesh\";\n    /**\n     * **Texture reference**:\n     *\n     * Appears in the editor as a texture resource selection dropdown.\n     *\n     * Initial value is `null`.\n     */\n    Type[Type[\"Texture\"] = 256] = \"Texture\";\n    /**\n     * **Material reference**:\n     *\n     * Appears in the editor as a material resource selection dropdown.\n     *\n     * Initial value is `null`.\n     */\n    Type[Type[\"Material\"] = 512] = \"Material\";\n    /**\n     * **Animation reference**:\n     *\n     * Appears in the editor as an animation resource selection dropdown.\n     *\n     * Initial value is `null`.\n     */\n    Type[Type[\"Animation\"] = 1024] = \"Animation\";\n    /**\n     * **Skin reference**:\n     *\n     * Appears in the editor as a skin resource selection dropdown.\n     *\n     * Initial value is `null`.\n     */\n    Type[Type[\"Skin\"] = 2048] = \"Skin\";\n    /**\n     * **Color**:\n     *\n     * Appears in the editor as a color widget.\n     *\n     * Initial value is `[0.0, 0.0, 0.0, 1.0]`, unless overridden by the\n     * `default` property.\n     */\n    Type[Type[\"Color\"] = 4096] = \"Color\";\n})(Type || (Type = {}));\n/**\n * Component property namespace.\n *\n * Usage:\n *\n * ```js\n * import {Component, Property} from '@wonderlandengine/api';\n *\n * class MyComponent extends Component {\n *     static Properties = {\n *         myBool: Property.bool(true),\n *         myInt: Property.int(42),\n *         myString: Property.string('Hello World!'),\n *         myMesh: Property.mesh(),\n *     }\n * }\n * ```\n *\n * For TypeScript users, you can use the decorators instead.\n */\nexport const Property = {\n    /**\n     * Create an boolean property.\n     *\n     * @param defaultValue The default value. If not provided, defaults to `false`.\n     */\n    bool(defaultValue = false) {\n        return { type: Type.Bool, default: defaultValue };\n    },\n    /**\n     * Create an integer property.\n     *\n     * @param defaultValue The default value. If not provided, defaults to `0`.\n     */\n    int(defaultValue = 0) {\n        return { type: Type.Int, default: defaultValue };\n    },\n    /**\n     * Create an float property.\n     *\n     * @param defaultValue The default value. If not provided, defaults to `0.0`.\n     */\n    float(defaultValue = 0.0) {\n        return { type: Type.Float, default: defaultValue };\n    },\n    /**\n     * Create an string property.\n     *\n     * @param defaultValue The default value. If not provided, defaults to `''`.\n     */\n    string(defaultValue = '') {\n        return { type: Type.String, default: defaultValue };\n    },\n    /**\n     * Create an enumeration property.\n     *\n     * @param values The list of values.\n     * @param defaultValue The default value. Can be a string or an index into\n     *     `values`. If not provided, defaults to the first element.\n     */\n    enum(values, defaultValue) {\n        return { type: Type.Enum, values, default: defaultValue };\n    },\n    /** Create an {@link Object3D} reference property. */\n    object(opts) {\n        return { type: Type.Object, default: null, required: opts?.required ?? false };\n    },\n    /** Create a {@link Mesh} reference property. */\n    mesh(opts) {\n        return { type: Type.Mesh, default: null, required: opts?.required ?? false };\n    },\n    /** Create a {@link Texture} reference property. */\n    texture(opts) {\n        return { type: Type.Texture, default: null, required: opts?.required ?? false };\n    },\n    /** Create a {@link Material} reference property. */\n    material(opts) {\n        return { type: Type.Material, default: null, required: opts?.required ?? false };\n    },\n    /** Create an {@link Animation} reference property. */\n    animation(opts) {\n        return { type: Type.Animation, default: null, required: opts?.required ?? false };\n    },\n    /** Create a {@link Skin} reference property. */\n    skin(opts) {\n        return { type: Type.Skin, default: null, required: opts?.required ?? false };\n    },\n    /**\n     * Create a color property.\n     *\n     * @param r The red component, in the range [0; 1].\n     * @param g The green component, in the range [0; 1].\n     * @param b The blue component, in the range [0; 1].\n     * @param a The alpha component, in the range [0; 1].\n     */\n    color(r = 0.0, g = 0.0, b = 0.0, a = 1.0) {\n        return { type: Type.Color, default: [r, g, b, a] };\n    },\n};\n", "import { Property, Type } from './property.js';\n/**\n * Decorator for JS component properties.\n *\n * @param data The property description as an object literal\n * @returns A decorator function modifying the `Properties` static\n *     attribute\n */\nfunction propertyDecorator(data) {\n    return function (target, propertyKey) {\n        const ctor = target.constructor;\n        ctor.Properties = ctor.hasOwnProperty('Properties') ? ctor.Properties : {};\n        ctor.Properties[propertyKey] = data;\n    };\n}\n/**\n * Decorator for making a getter enumerable.\n *\n * Usage:\n *\n * ```ts\n * class MyClass {\n *     @enumerable()\n *     get projectionMatrix(): Float32Array { ... }\n * }\n * ```\n */\nexport function enumerable() {\n    return function (_, __, descriptor) {\n        descriptor.enumerable = true;\n    };\n}\n/**\n * Decorator for native properties.\n *\n * Usage:\n *\n * ```ts\n * class MyClass {\n *     @nativeProperty()\n *     get projectionMatrix(): Float32Array { ... }\n * }\n * ```\n */\nexport function nativeProperty() {\n    return function (target, propertyKey, descriptor) {\n        enumerable()(target, propertyKey, descriptor);\n        propertyDecorator({ type: Type.Native })(target, propertyKey);\n    };\n}\n/**\n * Property decorators namespace.\n *\n * You can use the decorators to mark a class attribute as\n * a Wonderland Engine property.\n *\n * Usage:\n *\n * ```ts\n * import {Mesh} from '@wonderlandengine/api';\n * import {property} from '@wonderlandengine/api/decorators.js';\n *\n * class MyComponent extends Component {\n *     @property.bool(true)\n *     myBool!: boolean;\n *\n *     @property.int(42)\n *     myInt!: number;\n *\n *     @property.string('Hello World!')\n *     myString!: string;\n *\n *     @property.mesh()\n *     myMesh!: Mesh;\n * }\n * ```\n *\n * For JavaScript users, please declare the properties statically.\n */\nexport const property = {};\nfor (const name in Property) {\n    /* Assign each property functor to a TypeScript decorator.\n     * This code extracts parameters and return type to provide proper\n     * typings to the user. */\n    property[name] = (...args) => {\n        const functor = Property[name];\n        return propertyDecorator(functor(...args));\n    };\n}\n", "/**\n * Check if a given value is a native string or a `String` instance.\n *\n * @param value The value to check.\n * @returns `true` if the `value` has type string literal or `String`, `false` otherwise.\n */\nexport function isString(value) {\n    if (value === '')\n        return true;\n    return value && (typeof value === 'string' || value.constructor === String);\n}\n/**\n * Check if a given value is a native number or a `Number` instance.\n *\n * @param value The value to check.\n * @returns `true` if the `value` has type number literal or `Number`, `false` otherwise.\n */\nexport function isNumber(value) {\n    if (value === null || value === undefined)\n        return false;\n    return typeof value === 'number' || value.constructor === Number;\n}\n", "/** Internal type for transaction. */\nvar TransactionType;\n(function (TransactionType) {\n    TransactionType[TransactionType[\"Addition\"] = 1] = \"Addition\";\n    TransactionType[TransactionType[\"Removal\"] = 2] = \"Removal\";\n})(TransactionType || (TransactionType = {}));\n/**\n * Event emitter.\n *\n * This class allows to register listeners that will get notified by the emitter.\n *\n * Usage example:\n *\n * ```js\n * // `onPreRender` is an `Emitter` instance.\n * scene.onPreRender.add(() => console.log('before rendering'));\n * // `onPostRender` is an `Emitter` instance.\n * scene.onPostRender.add(() => console.log('after rendering'));\n * ```\n *\n * You can create your own emitters:\n *\n * ```js\n * import {Emitter} from '@wonderlandengine/api';\n *\n * const emitter = new Emitter();\n * ```\n *\n * You can notify listeners in to your emitter using {@link Emitter.notify}:\n *\n * ```js\n * // Notifies all the listeners.\n * emitter.notify();\n * // Notifies all the listeners with some data.\n * emitter.notify({ myInt: 42, myStr: 'Hello World!' });\n * ```\n *\n * @category event\n */\nexport class Emitter {\n    /**\n     * List of listeners to trigger when `notify` is called.\n     *\n     * @hidden\n     */\n    _listeners = [];\n    /**\n     * `true` if the emitter is currently notifying listeners. This\n     * is used to defer addition and removal.\n     *\n     * @hidden\n     */\n    _notifying = false;\n    /**\n     * Pending additions / removals, performed during a notification.\n     *\n     * @hidden\n     */\n    _transactions = [];\n    /**\n     * Register a new listener to be triggered on {@link Emitter.notify}.\n     *\n     * Basic usage:\n     *\n     * ```js\n     * emitter.add((data) => {\n     *     console.log('event received!');\n     *     console.log(data);\n     * });\n     * ```\n     *\n     * Automatically remove the listener when an event is received:\n     *\n     * ```js\n     * emitter.add((data) => {\n     *     console.log('event received!');\n     *     console.log(data);\n     * }, {once: true});\n     * ```\n     *\n     * @param listener The callback to register.\n     * @param opts The listener options. For more information, please have a look\n     *     at the {@link ListenerOptions} interface.\n     *\n     * @returns Reference to self (for method chaining)\n     */\n    add(listener, opts = {}) {\n        const { once = false, id = undefined } = opts;\n        const data = { id, once, callback: listener };\n        if (this._notifying) {\n            this._transactions.push({ type: TransactionType.Addition, data });\n            return this;\n        }\n        this._listeners.push(data);\n        return this;\n    }\n    /**\n     * Equivalent to {@link Emitter.add}.\n     *\n     * @param listeners The callback(s) to register.\n     * @returns Reference to self (for method chaining).\n     *\n     * @deprecated Please use {@link Emitter.add} instead.\n     */\n    push(...listeners) {\n        for (const cb of listeners)\n            this.add(cb);\n        return this;\n    }\n    /**\n     * Register a new listener to be triggered on {@link Emitter.notify}.\n     *\n     * Once notified, the listener will be automatically removed.\n     *\n     * The method is equivalent to calling {@link Emitter.add} with:\n     *\n     * ```js\n     * emitter.add(listener, {once: true});\n     * ```\n     *\n     * @param listener The callback to register.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    once(listener) {\n        return this.add(listener, { once: true });\n    }\n    /**\n     * Remove a registered listener.\n     *\n     * Usage with a callback:\n     *\n     * ```js\n     * const listener = (data) => console.log(data);\n     * emitter.add(listener);\n     *\n     * // Remove using the callback reference:\n     * emitter.remove(listener);\n     * ```\n     *\n     * Usage with an id:\n     *\n     * ```js\n     * emitter.add((data) => console.log(data), {id: 'my-callback'});\n     *\n     * // Remove using the id:\n     * emitter.remove('my-callback');\n     * ```\n     *\n     * Using identifiers, you will need to ensure your value is unique to avoid\n     * removing listeners from other libraries, e.g.,:\n     *\n     * ```js\n     * emitter.add((data) => console.log(data), {id: 'non-unique'});\n     * // This second listener could be added by a third-party library.\n     * emitter.add((data) => console.log('Hello From Library!'), {id: 'non-unique'});\n     *\n     * // Ho Snap! This also removed the library listener!\n     * emitter.remove('non-unique');\n     * ```\n     *\n     * The identifier can be any type. However, remember that the comparison will be\n     * by-value for primitive types (string, number), but by reference for objects.\n     *\n     * Example:\n     *\n     * ```js\n     * emitter.add(() => console.log('Hello'), {id: {value: 42}});\n     * emitter.add(() => console.log('World!'), {id: {value: 42}});\n     * emitter.remove({value: 42}); // None of the above listeners match!\n     * emitter.notify(); // Prints 'Hello' and 'World!'.\n     * ```\n     *\n     * Here, both emitters have id `{value: 42}`, but the comparison is made by reference. Thus,\n     * the `remove()` call has no effect. We can make it work by doing:\n     *\n     * ```js\n     * const id = {value: 42};\n     * emitter.add(() => console.log('Hello'), {id});\n     * emitter.add(() => console.log('World!'), {id});\n     * emitter.remove(id); // Same reference, it works!\n     * emitter.notify(); // Doesn't print.\n     * ```\n     *\n     * @param listener The registered callback or a value representing the `id`.\n     *\n     * @returns Reference to self (for method chaining)\n     */\n    remove(listener) {\n        if (this._notifying) {\n            this._transactions.push({ type: TransactionType.Removal, data: listener });\n            return this;\n        }\n        const listeners = this._listeners;\n        for (let i = 0; i < listeners.length; ++i) {\n            const target = listeners[i];\n            if (target.callback === listener || target.id === listener) {\n                listeners.splice(i--, 1);\n            }\n        }\n        return this;\n    }\n    /**\n     * Check whether the listener is registered.\n     *\n     * @note This method performs a linear search.\n     *\n     * * @note Doesn't account for pending listeners, i.e.,\n     * listeners added / removed during a notification.\n     *\n     * @param listener The registered callback or a value representing the `id`.\n     * @returns `true` if the handle is found, `false` otherwise.\n     */\n    has(listener) {\n        const listeners = this._listeners;\n        for (let i = 0; i < listeners.length; ++i) {\n            const target = listeners[i];\n            if (target.callback === listener || target.id === listener)\n                return true;\n        }\n        return false;\n    }\n    /**\n     * Notify listeners with the given data object.\n     *\n     * @note This method ensures all listeners are called even if\n     * an exception is thrown. For (possibly) faster notification,\n     * please use {@link Emitter.notifyUnsafe}.\n     *\n     * @param data The data to pass to listener when invoked.\n     */\n    notify(...data) {\n        const listeners = this._listeners;\n        this._notifying = true;\n        for (let i = 0; i < listeners.length; ++i) {\n            const listener = listeners[i];\n            if (listener.once)\n                listeners.splice(i--, 1);\n            try {\n                listener.callback(...data);\n            }\n            catch (e) {\n                console.error(e);\n            }\n        }\n        this._notifying = false;\n        /* Process deferred additions & removals */\n        this._flushTransactions();\n    }\n    /**\n     * Notify listeners with the given data object.\n     *\n     * @note Because this method doesn't catch exceptions, some listeners\n     * will be skipped on a throw. Please use {@link Emitter.notify} for safe\n     * notification.\n     *\n     * @param data The data to pass to listener when invoked.\n     */\n    notifyUnsafe(...data) {\n        const listeners = this._listeners;\n        for (let i = 0; i < listeners.length; ++i) {\n            const listener = listeners[i];\n            if (listener.once)\n                listeners.splice(i--, 1);\n            listener.callback(...data);\n        }\n        /* Process deferred additions & removals */\n        this._flushTransactions();\n    }\n    /**\n     * Return a promise that will resolve on the next event.\n     *\n     * @note The promise might never resolve if no event is sent.\n     *\n     * @returns A promise that resolves with the data passed to\n     *     {@link Emitter.notify}.\n     */\n    promise() {\n        return new Promise((res, _) => {\n            this.once((...args) => {\n                if (args.length > 1) {\n                    res(args);\n                }\n                else {\n                    res(args[0]);\n                }\n            });\n        });\n    }\n    /**\n     * Number of listeners.\n     *\n     * @note Doesn't account for pending listeners, i.e.,\n     * listeners added / removed during a notification.\n     */\n    get listenerCount() {\n        return this._listeners.length;\n    }\n    /** `true` if it has no listeners, `false` otherwise. */\n    get isEmpty() {\n        return this.listenerCount === 0;\n    }\n    /**\n     * Flush all pending transactions.\n     *\n     * @hidden\n     */\n    _flushTransactions() {\n        const listeners = this._listeners;\n        for (const transaction of this._transactions) {\n            if (transaction.type === TransactionType.Addition) {\n                listeners.push(transaction.data);\n            }\n            else {\n                this.remove(transaction.data);\n            }\n        }\n        this._transactions.length = 0;\n    }\n}\n/* Dummy value used with RetainEmitter. */\nconst RetainEmitterUndefined = {};\n/**\n * Event emitter that retains event data when notified.\n *\n * After a notification happens, subsequent calls to {@link RetainEmitter.add} will get\n * automatically notified.\n *\n * You can use another emitter in order to cancel the last retained event:\n *\n * ```js\n * import {Emitter, RetainedEmitter} from '@wonderlandengine/api';\n *\n * const onStart = new RetainedEmitter();\n *\n * onStart.notify(42);\n * onStart.add((data) => console.log(data)) // Prints '42'.\n * ```\n *\n * You can reset the state of the emitter, i.e., making it forget about the\n * last event using:\n *\n * ```js\n * import {Emitter, RetainedEmitter} from '@wonderlandengine/api';\n *\n * const onStart = new RetainedEmitter();\n * onStart.notify(42);\n * onStart.add((data) => console.log(data)) // Prints '42'.\n *\n * // Reset the state of the emitter.\n * onStart.reset();\n * onStart.add((data) => console.log(data)) // Doesn't print anything.\n * ```\n *\n * For more information about emitters, please have a look at the base {@link Emitter} class.\n *\n * @category event\n */\nexport class RetainEmitter extends Emitter {\n    /** Pre-resolved data. @hidden */\n    _event = RetainEmitterUndefined;\n    /**\n     * Emitter target used to reset the state of this emitter.\n     *\n     * @hidden\n     */\n    _reset;\n    /** @override */\n    add(listener, opts) {\n        const immediate = opts?.immediate ?? true;\n        if (this._event !== RetainEmitterUndefined && immediate) {\n            listener(...this._event);\n        }\n        super.add(listener, opts);\n        return this;\n    }\n    /**\n     * @override\n     *\n     * @param listener The callback to register.\n     * @param immediate If `true`, directly resolves if the emitter retains a value.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    once(listener, immediate) {\n        return this.add(listener, { once: true, immediate });\n    }\n    /** @override */\n    notify(...data) {\n        this._event = data;\n        super.notify(...data);\n    }\n    /** @override */\n    notifyUnsafe(...data) {\n        this._event = data;\n        super.notifyUnsafe(...data);\n    }\n    /**\n     * Reset the state of the emitter.\n     *\n     * Further call to {@link Emitter.add} will not automatically resolve,\n     * until a new call to {@link Emitter.notify} is performed.\n     *\n     * @returns Reference to self (for method chaining)\n     */\n    reset() {\n        this._event = RetainEmitterUndefined;\n        return this;\n    }\n    /** Returns the retained data, or `undefined` if no data was retained. */\n    get data() {\n        return this.isDataRetained ? this._event : undefined;\n    }\n    /** `true` if data is retained from the last event, `false` otherwise. */\n    get isDataRetained() {\n        return this._event !== RetainEmitterUndefined;\n    }\n}\n", "/**\n * Types\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { nativeProperty, enumerable } from './decorators.js';\nimport { isNumber, isString } from './utils/object.js';\nimport { Emitter } from './utils/event.js';\n/**\n * Wonderland Engine API\n * @namespace WL\n */\n/**\n * Default set of logging tags used by the API.\n */\nexport var LogTag;\n(function (LogTag) {\n    /** Initialization, component registration, etc... */\n    LogTag[LogTag[\"Engine\"] = 0] = \"Engine\";\n    /** Scene loading */\n    LogTag[LogTag[\"Scene\"] = 1] = \"Scene\";\n    /** Component init, update, etc... */\n    LogTag[LogTag[\"Component\"] = 2] = \"Component\";\n})(LogTag || (LogTag = {}));\n/**\n * Collider type enum for {@link CollisionComponent}.\n */\nexport var Collider;\n(function (Collider) {\n    /**\n     * **Sphere Collider**:\n     *\n     * Simplest and most performant collision shape. If this type is set on a\n     * {@link CollisionComponent}, only the first component of\n     * {@link CollisionComponent#extents} will be used to determine the radius.\n     */\n    Collider[Collider[\"Sphere\"] = 0] = \"Sphere\";\n    /**\n     * **Axis Aligned Bounding Box Collider**:\n     *\n     * Box that is always aligned to XYZ axis. It cannot be rotated but is more\n     * efficient than {@link Collider.Box}.\n     */\n    Collider[Collider[\"AxisAlignedBox\"] = 1] = \"AxisAlignedBox\";\n    /**\n     * **Aligned Bounding Box Collider**:\n     *\n     * Box that matches the object's rotation and translation correctly. This\n     * is the least efficient collider and should only be chosen over\n     * {@link Collider.Sphere} and {@link Collider.AxisAlignedBox} if really\n     * necessary.\n     */\n    Collider[Collider[\"Box\"] = 2] = \"Box\";\n})(Collider || (Collider = {}));\n/**\n * Alignment type enum for {@link TextComponent}.\n */\nexport var Alignment;\n(function (Alignment) {\n    /** Text start is at object origin */\n    Alignment[Alignment[\"Left\"] = 0] = \"Left\";\n    /** Text center is at object origin */\n    Alignment[Alignment[\"Center\"] = 1] = \"Center\";\n    /** Text end is at object origin */\n    Alignment[Alignment[\"Right\"] = 2] = \"Right\";\n})(Alignment || (Alignment = {}));\n/**\n * Justification type enum for {@link TextComponent}.\n */\nexport var Justification;\n(function (Justification) {\n    /** Text line is at object origin */\n    Justification[Justification[\"Line\"] = 0] = \"Line\";\n    /** Text middle is at object origin */\n    Justification[Justification[\"Middle\"] = 1] = \"Middle\";\n    /** Text top is at object origin */\n    Justification[Justification[\"Top\"] = 2] = \"Top\";\n    /** Text bottom is at object origin */\n    Justification[Justification[\"Bottom\"] = 3] = \"Bottom\";\n})(Justification || (Justification = {}));\n/**\n * Effect type enum for {@link TextComponent}.\n */\nexport var TextEffect;\n(function (TextEffect) {\n    /** Text is rendered normally */\n    TextEffect[TextEffect[\"None\"] = 0] = \"None\";\n    /** Text is rendered with an outline */\n    TextEffect[TextEffect[\"Outline\"] = 1] = \"Outline\";\n})(TextEffect || (TextEffect = {}));\n/**\n * Input type enum for {@link InputComponent}.\n */\nexport var InputType;\n(function (InputType) {\n    /** Head input */\n    InputType[InputType[\"Head\"] = 0] = \"Head\";\n    /** Left eye input */\n    InputType[InputType[\"EyeLeft\"] = 1] = \"EyeLeft\";\n    /** Right eye input */\n    InputType[InputType[\"EyeRight\"] = 2] = \"EyeRight\";\n    /** Left controller input */\n    InputType[InputType[\"ControllerLeft\"] = 3] = \"ControllerLeft\";\n    /** Right controller input */\n    InputType[InputType[\"ControllerRight\"] = 4] = \"ControllerRight\";\n    /** Left ray input */\n    InputType[InputType[\"RayLeft\"] = 5] = \"RayLeft\";\n    /** Right ray input */\n    InputType[InputType[\"RayRight\"] = 6] = \"RayRight\";\n})(InputType || (InputType = {}));\n/**\n * Light type enum for {@link LightComponent}.\n */\nexport var LightType;\n(function (LightType) {\n    /** Point light */\n    LightType[LightType[\"Point\"] = 0] = \"Point\";\n    /** Spot light */\n    LightType[LightType[\"Spot\"] = 1] = \"Spot\";\n    /** Sun light / Directional light */\n    LightType[LightType[\"Sun\"] = 2] = \"Sun\";\n})(LightType || (LightType = {}));\n/**\n * Animation state of {@link AnimationComponent}.\n */\nexport var AnimationState;\n(function (AnimationState) {\n    /** Animation is currently playing */\n    AnimationState[AnimationState[\"Playing\"] = 0] = \"Playing\";\n    /** Animation is paused and will continue at current playback\n     * time on {@link AnimationComponent#play} */\n    AnimationState[AnimationState[\"Paused\"] = 1] = \"Paused\";\n    /** Animation is stopped */\n    AnimationState[AnimationState[\"Stopped\"] = 2] = \"Stopped\";\n})(AnimationState || (AnimationState = {}));\n/**\n * Rigid body force mode for {@link PhysXComponent#addForce} and {@link PhysXComponent#addTorque}.\n *\n * [PhysX API Reference](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxapi/files/structPxForceMode.html)\n */\nexport var ForceMode;\n(function (ForceMode) {\n    /** Apply as force */\n    ForceMode[ForceMode[\"Force\"] = 0] = \"Force\";\n    /** Apply as impulse */\n    ForceMode[ForceMode[\"Impulse\"] = 1] = \"Impulse\";\n    /** Apply as velocity change, mass dependent */\n    ForceMode[ForceMode[\"VelocityChange\"] = 2] = \"VelocityChange\";\n    /** Apply as mass dependent force */\n    ForceMode[ForceMode[\"Acceleration\"] = 3] = \"Acceleration\";\n})(ForceMode || (ForceMode = {}));\n/**\n * Collision callback event type.\n */\nexport var CollisionEventType;\n(function (CollisionEventType) {\n    /** Touch/contact detected, collision */\n    CollisionEventType[CollisionEventType[\"Touch\"] = 0] = \"Touch\";\n    /** Touch/contact lost, uncollide */\n    CollisionEventType[CollisionEventType[\"TouchLost\"] = 1] = \"TouchLost\";\n    /** Touch/contact with trigger detected */\n    CollisionEventType[CollisionEventType[\"TriggerTouch\"] = 2] = \"TriggerTouch\";\n    /** Touch/contact with trigger lost */\n    CollisionEventType[CollisionEventType[\"TriggerTouchLost\"] = 3] = \"TriggerTouchLost\";\n})(CollisionEventType || (CollisionEventType = {}));\n/**\n * Rigid body {@link PhysXComponent#shape}.\n *\n * [PhysX SDK Guide](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/Geometry.html#geometry-types).\n */\nexport var Shape;\n(function (Shape) {\n    /** No shape. */\n    Shape[Shape[\"None\"] = 0] = \"None\";\n    /** Sphere shape. */\n    Shape[Shape[\"Sphere\"] = 1] = \"Sphere\";\n    /** Capsule shape. */\n    Shape[Shape[\"Capsule\"] = 2] = \"Capsule\";\n    /** Box shape. */\n    Shape[Shape[\"Box\"] = 3] = \"Box\";\n    /** Plane shape. */\n    Shape[Shape[\"Plane\"] = 4] = \"Plane\";\n    /** Convex mesh shape. */\n    Shape[Shape[\"ConvexMesh\"] = 5] = \"ConvexMesh\";\n    /** Triangle mesh shape. */\n    Shape[Shape[\"TriangleMesh\"] = 6] = \"TriangleMesh\";\n})(Shape || (Shape = {}));\n/**\n * Mesh attribute enum.\n * @since 0.9.0\n */\nexport var MeshAttribute;\n(function (MeshAttribute) {\n    /** Position attribute, 3 floats */\n    MeshAttribute[MeshAttribute[\"Position\"] = 0] = \"Position\";\n    /** Tangent attribute, 4 floats */\n    MeshAttribute[MeshAttribute[\"Tangent\"] = 1] = \"Tangent\";\n    /** Normal attribute, 3 floats */\n    MeshAttribute[MeshAttribute[\"Normal\"] = 2] = \"Normal\";\n    /** Texture coordinate attribute, 2 floats */\n    MeshAttribute[MeshAttribute[\"TextureCoordinate\"] = 3] = \"TextureCoordinate\";\n    /** Color attribute, 4 floats, RGBA, range `0` to `1` */\n    MeshAttribute[MeshAttribute[\"Color\"] = 4] = \"Color\";\n    /** Joint id attribute, 8 unsigned ints */\n    MeshAttribute[MeshAttribute[\"JointId\"] = 5] = \"JointId\";\n    /** Joint weights attribute, 8 floats */\n    MeshAttribute[MeshAttribute[\"JointWeight\"] = 6] = \"JointWeight\";\n})(MeshAttribute || (MeshAttribute = {}));\n/**\n * Material parameter type.\n */\nexport var MaterialParamType;\n(function (MaterialParamType) {\n    /** Unsigned integer parameter type. */\n    MaterialParamType[MaterialParamType[\"UnsignedInt\"] = 0] = \"UnsignedInt\";\n    /** Integer parameter type. */\n    MaterialParamType[MaterialParamType[\"Int\"] = 1] = \"Int\";\n    /** Float parameter type. */\n    MaterialParamType[MaterialParamType[\"Float\"] = 2] = \"Float\";\n    /** Sampler resource parameter type, i.e., a {@link Texture}. */\n    MaterialParamType[MaterialParamType[\"Sampler\"] = 3] = \"Sampler\";\n    /**\n     * Font resource parameter type.\n     *\n     * **Note**: Changing font isn't exposed yet and will raise an error.\n     */\n    MaterialParamType[MaterialParamType[\"Font\"] = 4] = \"Font\";\n})(MaterialParamType || (MaterialParamType = {}));\n/**\n * Create a proxy throwing destroyed errors upon access.\n *\n * @param type The type to display upon error\n * @returns The proxy instance\n */\nfunction createDestroyedProxy(type) {\n    return new Proxy({}, {\n        get(_, param) {\n            if (param === 'isDestroyed')\n                return true;\n            throw new Error(`Canno't read '${param}' of destroyed ${type}`);\n        },\n        set(_, param) {\n            throw new Error(`Canno't write '${param}' of destroyed ${type}`);\n        },\n    });\n}\n/** Proxy used to override prototypes of destroyed objects. */\nexport const DestroyedObjectInstance = createDestroyedProxy('object');\n/** Proxy used to override prototypes of destroyed components. */\nexport const DestroyedComponentInstance = createDestroyedProxy('component');\n/** Proxy used to override prototypes of destroyed textures. */\nexport const DestroyedTextureInstance = createDestroyedProxy('texture');\n/**\n * Check whether a given shape is a mesh or not.\n *\n * @param shape The shape to check.\n * @returns `true` if the shape is a mesh, `false` if it's a primitive.\n */\nfunction isMeshShape(shape) {\n    return shape === Shape.ConvexMesh || shape === Shape.TriangleMesh;\n}\n/**\n * Check whether an object is the {@link Component} class or not,\n *\n * @note This method if foolproof to developers inadvertently using\n * multiple Wonderland Engine API in a bundle.\n *\n * @param value The object to check.\n * @returns `true` if the object is a {@link Component} class, `false` otherwise.\n */\nfunction isBaseComponentClass(value) {\n    return (!!value &&\n        value.hasOwnProperty('_isBaseComponent') &&\n        value._isBaseComponent);\n}\n/**\n * Constants.\n */\n/**\n * Default world up vector.\n */\nconst UP_VECTOR = [0, 1, 0];\nconst SQRT_3 = Math.sqrt(3);\n/**\n * Provides access to a component instance of a specified component type.\n *\n * @example\n *\n * This is how you extend this class to create your own custom\n * component:\n *\n * ```js\n * import { Component, Type } from '@wonderlandengine/api';\n *\n * export class MyComponent extends Component {\n *     static TypeName = 'my-component';\n *     static Properties = {\n *         myBoolean: { type: Type.Boolean, default: false },\n *     };\n *     start() {}\n *     onActivate() {}\n *     onDeactivate() {}\n *     update(dt) {}\n * }\n * ```\n */\nexport class Component {\n    /**\n     * `true` for every class inheriting from this class.\n     *\n     * @note This is a workaround for `instanceof` to prevent issues\n     * that could arise when an application ends up using multiple API versions.\n     *\n     * @hidden\n     */\n    static _isBaseComponent = true;\n    /**\n     * Unique identifier for this component class.\n     *\n     * This is used to register, add, and retrieve components of a given type.\n     */\n    static TypeName;\n    /**\n     * Properties of this component class.\n     *\n     * Properties are public attributes that can be configured via the\n     * Wonderland Editor.\n     *\n     * Example:\n     *\n     * ```js\n     * import { Component, Type } from '@wonderlandengine/api';\n     * class MyComponent extends Component {\n     *     static TypeName = 'my-component';\n     *     static Properties = {\n     *         myBoolean: { type: Type.Boolean, default: false },\n     *         myFloat: { type: Type.Float, default: false },\n     *         myTexture: { type: Type.Texture, default: null },\n     *     };\n     * }\n     * ```\n     *\n     * Properties are automatically added to each component instance, and are\n     * accessible like any JS attribute:\n     *\n     * ```js\n     * // Creates a new component and set each properties value:\n     * const myComponent = object.addComponent(MyComponent, {\n     *     myBoolean: true,\n     *     myFloat: 42.0,\n     *     myTexture: null\n     * });\n     *\n     * // You can also override the properties on the instance:\n     * myComponent.myBoolean = false;\n     * myComponent.myFloat = -42.0;\n     * ```\n     *\n     * #### References\n     *\n     * Reference types (i.e., mesh, object, etc...) can also be listed as **required**:\n     *\n     * ```js\n     * import {Component, Property} from '@wonderlandengine/api';\n     *\n     * class MyComponent extends Component {\n     *     static Properties = {\n     *         myObject: Property.object({required: true}),\n     *         myAnimation: Property.animation({required: true}),\n     *         myTexture: Property.texture({required: true}),\n     *         myMesh: Property.mesh({required: true}),\n     *     }\n     * }\n     * ```\n     *\n     * Please note that references are validated **once** before the call to {@link Component.start} only,\n     * via the {@link Component.validateProperties} method.\n     */\n    static Properties;\n    /**\n     * When set to `true`, the child class inherits from the parent\n     * properties, as shown in the following example:\n     *\n     * ```js\n     * import {Component, Property} from '@wonderlandengine/api';\n     *\n     * class Parent extends Component {\n     *     static TypeName = 'parent';\n     *     static Properties = {parentName: Property.string('parent')}\n     * }\n     *\n     * class Child extends Parent {\n     *     static TypeName = 'child';\n     *     static Properties = {name: Property.string('child')}\n     *     static InheritProperties = true;\n     *\n     *     start() {\n     *         // Works because `InheritProperties` is `true`.\n     *         console.log(`${this.name} inherits from ${this.parentName}`);\n     *     }\n     * }\n     * ```\n     *\n     * @note Properties defined in descendant classes will override properties\n     * with the same name defined in ancestor classes.\n     *\n     * Defaults to `true`.\n     */\n    static InheritProperties;\n    /**\n     * Called when this component class is registered.\n     *\n     * @example\n     *\n     * This callback can be used to register dependencies of a component,\n     * e.g., component classes that need to be registered in order to add\n     * them at runtime with {@link Object3D.addComponent}, independent of whether\n     * they are used in the editor.\n     *\n     * ```js\n     * class Spawner extends Component {\n     *     static TypeName = 'spawner';\n     *\n     *     static onRegister(engine) {\n     *         engine.registerComponent(SpawnedComponent);\n     *     }\n     *\n     *     // You can now use addComponent with SpawnedComponent\n     * }\n     * ```\n     *\n     * @example\n     *\n     * This callback can be used to register different implementations of a\n     * component depending on client features or API versions.\n     *\n     * ```js\n     * // Properties need to be the same for all implementations!\n     * const SharedProperties = {};\n     *\n     * class Anchor extends Component {\n     *     static TypeName = 'spawner';\n     *     static Properties = SharedProperties;\n     *\n     *     static onRegister(engine) {\n     *         if(navigator.xr === undefined) {\n     *             /* WebXR unsupported, keep this dummy component *\\/\n     *             return;\n     *         }\n     *         /* WebXR supported! Override already registered dummy implementation\n     *          * with one depending on hit-test API support *\\/\n     *         engine.registerComponent(window.HitTestSource === undefined ?\n     *             AnchorWithoutHitTest : AnchorWithHitTest);\n     *     }\n     *\n     *     // This one implements no functions\n     * }\n     * ```\n     */\n    static onRegister;\n    /**\n     * Allows to inherit properties directly inside the editor.\n     *\n     * @note Do not use directly, prefer using {@link inheritProperties}.\n     *\n     * @hidden\n     */\n    static _inheritProperties() {\n        inheritProperties(this);\n    }\n    /** Manager index. @hidden */\n    _manager;\n    /** Instance index. @hidden */\n    _id;\n    /**\n     * Object containing this object.\n     *\n     * **Note**: This is cached for faster retrieval.\n     *\n     * @hidden\n     */\n    _object;\n    /** Wonderland Engine instance. @hidden */\n    _engine;\n    /**\n     * Create a new instance\n     *\n     * @param engine The engine instance.\n     * @param manager Index of the manager.\n     * @param id WASM component instance index.\n     *\n     * @hidden\n     */\n    constructor(engine, manager = -1, id = -1) {\n        this._engine = engine;\n        this._manager = manager;\n        this._id = id;\n        this._object = null;\n    }\n    /** Hosting engine instance. */\n    get engine() {\n        return this._engine;\n    }\n    /** The name of this component's type */\n    get type() {\n        const ctor = this.constructor;\n        return ctor.TypeName ?? this._engine.wasm._typeNameFor(this._manager);\n    }\n    /** The object this component is attached to. */\n    get object() {\n        if (!this._object) {\n            const objectId = this._engine.wasm._wl_component_get_object(this._manager, this._id);\n            this._object = this._engine.wrapObject(objectId);\n        }\n        return this._object;\n    }\n    /**\n     * Set whether this component is active.\n     *\n     * Activating/deactivating a component comes at a small cost of reordering\n     * components in the respective component manager. This function therefore\n     * is not a trivial assignment.\n     *\n     * Does nothing if the component is already activated/deactivated.\n     *\n     * @param active New active state.\n     */\n    set active(active) {\n        this._engine.wasm._wl_component_setActive(this._manager, this._id, active);\n    }\n    /**\n     * Whether this component is active\n     */\n    get active() {\n        return this._engine.wasm._wl_component_isActive(this._manager, this._id) != 0;\n    }\n    /**\n     * Copy all the properties from `src` into this instance.\n     *\n     * @note Only properties are copied. If a component needs to\n     * copy extra data, it needs to override this method.\n     *\n     * #### Example\n     *\n     * ```js\n     * class MyComponent extends Component {\n     *     nonPropertyData = 'Hello World';\n     *\n     *     copy(src) {\n     *         super.copy(src);\n     *         this.nonPropertyData = src.nonPropertyData;\n     *         return this;\n     *     }\n     * }\n     * ```\n     *\n     * @note This method is called by {@link Object3D.clone}. Do not attempt to:\n     *     - Create new component\n     *     - Read references to other objects\n     *\n     * When cloning via {@link Object3D.clone}, this method will be called before\n     * {@link Component.start}.\n     *\n     * @note JavaScript component properties aren't retargeted. Thus, references\n     * inside the source object will not be retargeted to the destination object,\n     * at the exception of the skin data on {@link MeshComponent} and {@link AnimationComponent}.\n     *\n     * @param src The source component to copy from.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    copy(src) {\n        const ctor = this.constructor;\n        for (const name in ctor.Properties) {\n            const value = src[name];\n            if (value !== undefined) {\n                this[name] = value;\n            }\n        }\n        return this;\n    }\n    /**\n     * Remove this component from its objects and destroy it.\n     *\n     * It is best practice to set the component to `null` after,\n     * to ensure it does not get used later.\n     *\n     * ```js\n     *    c.destroy();\n     *    c = null;\n     * ```\n     * @since 0.9.0\n     */\n    destroy() {\n        const manager = this._manager;\n        if (manager < 0 || this._id < 0)\n            return;\n        /* Must be stored before destruction. */\n        const jsManager = this.engine.wasm._jsManagerIndex;\n        this._engine.wasm._wl_component_remove(manager, this._id);\n        /** @todo: Remove at 1.2.0 when a generic destroy is implemented\n         * for every manager. */\n        if (manager !== jsManager)\n            this._triggerOnDestroy();\n    }\n    /**\n     * Checks equality by comparing whether the wrapped native component ids\n     * and component manager types are equal.\n     *\n     * @param otherComponent Component to check equality with.\n     * @returns Whether this component equals the given component.\n     */\n    equals(otherComponent) {\n        if (!otherComponent)\n            return false;\n        return this._manager == otherComponent._manager && this._id == otherComponent._id;\n    }\n    /**\n     * Reset the component properties to default.\n     *\n     * @note This is automatically called during the component instantiation.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    resetProperties() {\n        const ctor = this.constructor;\n        const properties = ctor.Properties;\n        if (!properties)\n            return this;\n        for (const name in properties) {\n            this[name] = properties[name].default;\n        }\n        return this;\n    }\n    /** @deprecated Use {@link Component.resetProperties} instead. */\n    reset() {\n        return this.resetProperties();\n    }\n    /**\n     * Validate the properties on this instance.\n     *\n     * @throws If any of the required properties isn't initialized\n     * on this instance.\n     */\n    validateProperties() {\n        const ctor = this.constructor;\n        if (!ctor.Properties)\n            return;\n        for (const name in ctor.Properties) {\n            if (!ctor.Properties[name].required)\n                continue;\n            if (!this[name]) {\n                throw new Error(`Property '${name}' is required but was not initialized`);\n            }\n        }\n    }\n    /**\n     * `true` if the component is destroyed, `false` otherwise.\n     *\n     * If {@link WonderlandEngine.erasePrototypeOnDestroy} is `true`,\n     * reading a custom property will not work:\n     *\n     * ```js\n     * engine.erasePrototypeOnDestroy = true;\n     *\n     * const comp = obj.addComponent('mesh');\n     * comp.customParam = 'Hello World!';\n     *\n     * console.log(comp.isDestroyed); // Prints `false`\n     * comp.destroy();\n     * console.log(comp.isDestroyed); // Prints `true`\n     * console.log(comp.customParam); // Throws an error\n     * ```\n     *\n     * @since 1.1.1\n     */\n    get isDestroyed() {\n        return this._id < 0;\n    }\n    /**\n     * Trigger the component {@link Component.init} method.\n     *\n     * @note Use this method instead of directly calling {@link Component.init},\n     * because this method creates an handler for the {@link Component.start}.\n     *\n     * @note This api is meant to be used internally.\n     *\n     * @hidden\n     */\n    _triggerInit() {\n        if (this.init) {\n            try {\n                this.init();\n            }\n            catch (e) {\n                this.engine.log.error(LogTag.Component, `Exception during ${this.type} init() on object ${this.object.name}`);\n                this.engine.log.error(LogTag.Component, e);\n            }\n        }\n        /* Arm onActivate() with the initial start() call */\n        const oldActivate = this.onActivate;\n        this.onActivate = function () {\n            this.onActivate = oldActivate;\n            let failed = false;\n            try {\n                this.validateProperties();\n            }\n            catch (e) {\n                this.engine.log.error(LogTag.Component, `Exception during ${this.type} validateProperties() on object ${this.object.name}`);\n                this.engine.log.error(LogTag.Component, e);\n                failed = true;\n            }\n            try {\n                this.start?.();\n            }\n            catch (e) {\n                this.engine.log.error(LogTag.Component, `Exception during ${this.type} start() on object ${this.object.name}`);\n                this.engine.log.error(LogTag.Component, e);\n                failed = true;\n            }\n            if (failed) {\n                this.active = false;\n                return;\n            }\n            if (!this.onActivate)\n                return;\n            try {\n                this.onActivate();\n            }\n            catch (e) {\n                this.engine.log.error(LogTag.Component, `Exception during ${this.type} onActivate() on object ${this.object.name}`);\n                this.engine.log.error(LogTag.Component, e);\n            }\n        };\n    }\n    /**\n     * Trigger the component {@link Component.update} method.\n     *\n     * @note This api is meant to be used internally.\n     *\n     * @hidden\n     */\n    _triggerUpdate(dt) {\n        if (!this.update)\n            return;\n        try {\n            this.update(dt);\n        }\n        catch (e) {\n            this.engine.log.error(LogTag.Component, `Exception during ${this.type} update() on object ${this.object.name}`);\n            this.engine.log.error(LogTag.Component, e);\n            if (this._engine.wasm._deactivate_component_on_error) {\n                this.active = false;\n            }\n        }\n    }\n    /**\n     * Trigger the component {@link Component.onActivate} method.\n     *\n     * @note This api is meant to be used internally.\n     *\n     * @hidden\n     */\n    _triggerOnActivate() {\n        if (!this.onActivate)\n            return;\n        try {\n            this.onActivate();\n        }\n        catch (e) {\n            this.engine.log.error(LogTag.Component, `Exception during ${this.type} onActivate() on object ${this.object.name}`);\n            this.engine.log.error(LogTag.Component, e);\n        }\n    }\n    /**\n     * Trigger the component {@link Component.onDeactivate} method.\n     *\n     * @note This api is meant to be used internally.\n     *\n     * @hidden\n     */\n    _triggerOnDeactivate() {\n        if (!this.onDeactivate)\n            return;\n        try {\n            this.onDeactivate();\n        }\n        catch (e) {\n            this.engine.log.error(LogTag.Component, `Exception during ${this.type} onDeactivate() on object ${this.object.name}`);\n            this.engine.log.error(LogTag.Component, e);\n        }\n    }\n    /**\n     * Trigger the component {@link Component.onDestroy} method.\n     *\n     * @note This api is meant to be used internally.\n     *\n     * @hidden\n     */\n    _triggerOnDestroy() {\n        try {\n            if (this.onDestroy)\n                this.onDestroy();\n        }\n        catch (e) {\n            this.engine.log.error(LogTag.Component, `Exception during ${this.type} onDestroy() on object ${this.object.name}`);\n            this.engine.log.error(LogTag.Component, e);\n        }\n        this._engine._destroyComponent(this);\n    }\n}\n/**\n * Components must be registered before loading / appending a scene.\n *\n * It's possible to end up with a broken component in the following cases:\n *\n * - Component wasn't registered when the scene was loaded\n * - Component instantiation failed\n *\n * This dummy component is thus used as a placeholder by the engine.\n */\nexport class BrokenComponent extends Component {\n    static TypeName = '__broken-component__';\n}\n/**\n * Merge the ascendant properties of class\n *\n * This method walks the prototype chain, and merges\n * all the properties found in parent components.\n *\n * Example:\n *\n * ```js\n * import {Property, inheritProperties} from '@wonderlandengine/api';\n *\n * class Parent {\n *     static Properties = { parentProp: Property.string('parent') };\n * }\n *\n * class Child extends Parent {\n *     static Properties = { childProp: Property.string('child') };\n * }\n * inheritProperties(Child);\n * ```\n *\n * @param target The class in which properties should be merged\n *\n * @hidden\n */\nexport function inheritProperties(target) {\n    if (!target.TypeName)\n        return;\n    const chain = [];\n    let curr = target;\n    while (curr && !isBaseComponentClass(curr)) {\n        const comp = curr;\n        /* Stop at the first class that doesn't require properties merging */\n        const needsMerge = comp.hasOwnProperty('InheritProperties')\n            ? comp.InheritProperties\n            : true;\n        if (!needsMerge)\n            break;\n        if (comp.TypeName && comp.hasOwnProperty('Properties')) {\n            chain.push(comp.Properties);\n        }\n        curr = Object.getPrototypeOf(curr);\n    }\n    /* No prototype merge is needed. */\n    if (chain.length <= 1)\n        return;\n    const merged = {};\n    for (let i = chain.length - 1; i >= 0; --i) {\n        Object.assign(merged, chain[i]);\n    }\n    target.Properties = merged;\n}\n/**\n * Native collision component.\n *\n * Provides access to a native collision component instance.\n */\nexport class CollisionComponent extends Component {\n    /** @override */\n    static TypeName = 'collision';\n    /** Collision component collider */\n    get collider() {\n        return this._engine.wasm._wl_collision_component_get_collider(this._id);\n    }\n    /**\n     * Set collision component collider.\n     *\n     * @param collider Collider of the collision component.\n     */\n    set collider(collider) {\n        this._engine.wasm._wl_collision_component_set_collider(this._id, collider);\n    }\n    /**\n     * Collision component extents.\n     *\n     * If {@link collider} returns {@link Collider.Sphere}, only the first\n     * component of the returned vector is used.\n     */\n    get extents() {\n        const wasm = this._engine.wasm;\n        return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_collision_component_get_extents(this._id), 3);\n    }\n    /**\n     * Set collision component extents.\n     *\n     * If {@link collider} returns {@link Collider.Sphere}, only the first\n     * component of the passed vector is used.\n     *\n     * Example:\n     *\n     * ```js\n     * // Spans 1 unit on the x-axis, 2 on the y-axis, 3 on the z-axis.\n     * collision.extent = [1, 2, 3];\n     * ```\n     *\n     * @param extents Extents of the collision component, expects a\n     *      3 component array.\n     */\n    set extents(extents) {\n        this.extents.set(extents);\n    }\n    /**\n     * Get collision component radius.\n     *\n     * @note If {@link collider} is not {@link Collider.Sphere}, the returned value\n     * corresponds to the radius of a sphere enclosing the shape.\n     *\n     * Example:\n     *\n     * ```js\n     * sphere.radius = 3.0;\n     * console.log(sphere.radius); // 3.0\n     *\n     * box.extents = [2.0, 2.0, 2.0];\n     * console.log(box.radius); // 1.732...\n     * ```\n     *\n     */\n    get radius() {\n        const wasm = this._engine.wasm;\n        if (this.collider === Collider.Sphere)\n            return wasm.HEAPF32[wasm._wl_collision_component_get_extents(this._id) >> 2];\n        const extents = new Float32Array(wasm.HEAPF32.buffer, wasm._wl_collision_component_get_extents(this._id), 3);\n        const x2 = extents[0] * extents[0];\n        const y2 = extents[1] * extents[1];\n        const z2 = extents[2] * extents[2];\n        return Math.sqrt(x2 + y2 + z2) / 2;\n    }\n    /**\n     * Set collision component radius.\n     *\n     * @param radius Radius of the collision component\n     *\n     * @note If {@link collider} is not {@link Collider.Sphere},\n     * the extents are set to form a square that fits a sphere with the provided radius.\n     *\n     * Example:\n     *\n     * ```js\n     * aabbCollision.radius = 2.0; // AABB fits a sphere of radius 2.0\n     * boxCollision.radius = 3.0; // Box now fits a sphere of radius 3.0, keeping orientation\n     * ```\n     *\n     */\n    set radius(radius) {\n        const length = this.collider === Collider.Sphere ? radius : (2 * radius) / SQRT_3;\n        this.extents.set([length, length, length]);\n    }\n    /**\n     * Collision component group.\n     *\n     * The groups is a bitmask that is compared to other components in {@link CollisionComponent#queryOverlaps}\n     * or the group in {@link Scene#rayCast}.\n     *\n     * Colliders that have no common groups will not overlap with each other. If a collider\n     * has none of the groups set for {@link Scene#rayCast}, the ray will not hit it.\n     *\n     * Each bit represents belonging to a group, see example.\n     *\n     * ```js\n     *    // c belongs to group 2\n     *    c.group = (1 << 2);\n     *\n     *    // c belongs to group 0\n     *    c.group = (1 << 0);\n     *\n     *    // c belongs to group 0 *and* 2\n     *    c.group = (1 << 0) | (1 << 2);\n     *\n     *    (c.group & (1 << 2)) != 0; // true\n     *    (c.group & (1 << 7)) != 0; // false\n     * ```\n     */\n    get group() {\n        return this._engine.wasm._wl_collision_component_get_group(this._id);\n    }\n    /**\n     * Set collision component group.\n     *\n     * @param group Group mask of the collision component.\n     */\n    set group(group) {\n        this._engine.wasm._wl_collision_component_set_group(this._id, group);\n    }\n    /**\n     * Query overlapping objects.\n     *\n     * Usage:\n     *\n     * ```js\n     * const collision = object.getComponent('collision');\n     * const overlaps = collision.queryOverlaps();\n     * for(const otherCollision of overlaps) {\n     *     const otherObject = otherCollision.object;\n     *     console.log(`Collision with object ${otherObject.objectId}`);\n     * }\n     * ```\n     *\n     * @returns Collision components overlapping this collider.\n     */\n    queryOverlaps() {\n        const count = this._engine.wasm._wl_collision_component_query_overlaps(this._id, this._engine.wasm._tempMem, this._engine.wasm._tempMemSize >> 1);\n        const overlaps = new Array(count);\n        for (let i = 0; i < count; ++i) {\n            overlaps[i] = new CollisionComponent(this._engine, this._manager, this._engine.wasm._tempMemUint16[i]);\n        }\n        return overlaps;\n    }\n}\n__decorate([\n    nativeProperty()\n], CollisionComponent.prototype, \"collider\", null);\n__decorate([\n    nativeProperty()\n], CollisionComponent.prototype, \"extents\", null);\n__decorate([\n    nativeProperty()\n], CollisionComponent.prototype, \"group\", null);\n/**\n * Native text component\n *\n * Provides access to a native text component instance\n */\nexport class TextComponent extends Component {\n    /** @override */\n    static TypeName = 'text';\n    /** Text component alignment. */\n    get alignment() {\n        return this._engine.wasm._wl_text_component_get_horizontal_alignment(this._id);\n    }\n    /**\n     * Set text component alignment.\n     *\n     * @param alignment Alignment for the text component.\n     */\n    set alignment(alignment) {\n        this._engine.wasm._wl_text_component_set_horizontal_alignment(this._id, alignment);\n    }\n    /** Text component justification. */\n    get justification() {\n        return this._engine.wasm._wl_text_component_get_vertical_alignment(this._id);\n    }\n    /**\n     * Set text component justification.\n     *\n     * @param justification Justification for the text component.\n     */\n    set justification(justification) {\n        this._engine.wasm._wl_text_component_set_vertical_alignment(this._id, justification);\n    }\n    /** Text component character spacing. */\n    get characterSpacing() {\n        return this._engine.wasm._wl_text_component_get_character_spacing(this._id);\n    }\n    /**\n     * Set text component character spacing.\n     *\n     * @param spacing Character spacing for the text component.\n     */\n    set characterSpacing(spacing) {\n        this._engine.wasm._wl_text_component_set_character_spacing(this._id, spacing);\n    }\n    /** Text component line spacing. */\n    get lineSpacing() {\n        return this._engine.wasm._wl_text_component_get_line_spacing(this._id);\n    }\n    /**\n     * Set text component line spacing\n     *\n     * @param spacing Line spacing for the text component\n     */\n    set lineSpacing(spacing) {\n        this._engine.wasm._wl_text_component_set_line_spacing(this._id, spacing);\n    }\n    /** Text component effect. */\n    get effect() {\n        return this._engine.wasm._wl_text_component_get_effect(this._id);\n    }\n    /**\n     * Set text component effect\n     *\n     * @param effect Effect for the text component\n     */\n    set effect(effect) {\n        this._engine.wasm._wl_text_component_set_effect(this._id, effect);\n    }\n    /** Text component text. */\n    get text() {\n        const wasm = this._engine.wasm;\n        const ptr = wasm._wl_text_component_get_text(this._id);\n        return wasm.UTF8ToString(ptr);\n    }\n    /**\n     * Set text component text.\n     *\n     * @param text Text of the text component.\n     */\n    set text(text) {\n        const wasm = this._engine.wasm;\n        wasm._wl_text_component_set_text(this._id, wasm.tempUTF8(text.toString()));\n    }\n    /**\n     * Set material to render the text with.\n     *\n     * @param material New material.\n     */\n    set material(material) {\n        const matIndex = material ? material._index : 0;\n        this._engine.wasm._wl_text_component_set_material(this._id, matIndex);\n    }\n    /** Material used to render the text. */\n    get material() {\n        const id = this._engine.wasm._wl_text_component_get_material(this._id);\n        return id > 0 ? new Material(this._engine, id) : null;\n    }\n}\n__decorate([\n    nativeProperty()\n], TextComponent.prototype, \"alignment\", null);\n__decorate([\n    nativeProperty()\n], TextComponent.prototype, \"justification\", null);\n__decorate([\n    nativeProperty()\n], TextComponent.prototype, \"characterSpacing\", null);\n__decorate([\n    nativeProperty()\n], TextComponent.prototype, \"lineSpacing\", null);\n__decorate([\n    nativeProperty()\n], TextComponent.prototype, \"effect\", null);\n__decorate([\n    nativeProperty()\n], TextComponent.prototype, \"text\", null);\n__decorate([\n    nativeProperty()\n], TextComponent.prototype, \"material\", null);\n/**\n * Native view component.\n *\n * Provides access to a native view component instance.\n */\nexport class ViewComponent extends Component {\n    /** @override */\n    static TypeName = 'view';\n    /** Projection matrix. */\n    get projectionMatrix() {\n        const wasm = this._engine.wasm;\n        return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_view_component_get_projection_matrix(this._id), 16);\n    }\n    /** ViewComponent near clipping plane value. */\n    get near() {\n        return this._engine.wasm._wl_view_component_get_near(this._id);\n    }\n    /**\n     * Set near clipping plane distance for the view.\n     *\n     * If an XR session is active, the change will apply in the\n     * following frame, otherwise the change is immediate.\n     *\n     * @param near Near depth value.\n     */\n    set near(near) {\n        this._engine.wasm._wl_view_component_set_near(this._id, near);\n    }\n    /** Far clipping plane value. */\n    get far() {\n        return this._engine.wasm._wl_view_component_get_far(this._id);\n    }\n    /**\n     * Set far clipping plane distance for the view.\n     *\n     * If an XR session is active, the change will apply in the\n     * following frame, otherwise the change is immediate.\n     *\n     * @param far Near depth value.\n     */\n    set far(far) {\n        this._engine.wasm._wl_view_component_set_far(this._id, far);\n    }\n    /**\n     * Get the horizontal field of view for the view, **in degrees**.\n     *\n     * If an XR session is active, this returns the field of view reported by\n     * the device, regardless of the fov that was set.\n     */\n    get fov() {\n        return this._engine.wasm._wl_view_component_get_fov(this._id);\n    }\n    /**\n     * Set the horizontal field of view for the view, **in degrees**.\n     *\n     * If an XR session is active, the field of view reported by the device is\n     * used and this value is ignored. After the XR session ends, the new value\n     * is applied.\n     *\n     * @param fov Horizontal field of view, **in degrees**.\n     */\n    set fov(fov) {\n        this._engine.wasm._wl_view_component_set_fov(this._id, fov);\n    }\n}\n__decorate([\n    enumerable()\n], ViewComponent.prototype, \"projectionMatrix\", null);\n__decorate([\n    nativeProperty()\n], ViewComponent.prototype, \"near\", null);\n__decorate([\n    nativeProperty()\n], ViewComponent.prototype, \"far\", null);\n__decorate([\n    nativeProperty()\n], ViewComponent.prototype, \"fov\", null);\n/**\n * Native input component.\n *\n * Provides access to a native input component instance.\n */\nexport class InputComponent extends Component {\n    /** @override */\n    static TypeName = 'input';\n    /** Input component type */\n    get inputType() {\n        return this._engine.wasm._wl_input_component_get_type(this._id);\n    }\n    /**\n     * Set input component type.\n     *\n     * @params New input component type.\n     */\n    set inputType(type) {\n        this._engine.wasm._wl_input_component_set_type(this._id, type);\n    }\n    /**\n     * WebXR Device API input source associated with this input component,\n     * if type {@link InputType.ControllerLeft} or {@link InputType.ControllerRight}.\n     */\n    get xrInputSource() {\n        const xr = this._engine.xr;\n        if (!xr)\n            return null;\n        for (let inputSource of xr.session.inputSources) {\n            if (inputSource.handedness == this.handedness) {\n                return inputSource;\n            }\n        }\n        return null;\n    }\n    /**\n     * 'left', 'right' or `null` depending on the {@link InputComponent#inputType}.\n     */\n    get handedness() {\n        const inputType = this.inputType;\n        if (inputType == InputType.ControllerRight ||\n            inputType == InputType.RayRight ||\n            inputType == InputType.EyeRight)\n            return 'right';\n        if (inputType == InputType.ControllerLeft ||\n            inputType == InputType.RayLeft ||\n            inputType == InputType.EyeLeft)\n            return 'left';\n        return null;\n    }\n}\n__decorate([\n    nativeProperty()\n], InputComponent.prototype, \"inputType\", null);\n__decorate([\n    enumerable()\n], InputComponent.prototype, \"xrInputSource\", null);\n__decorate([\n    enumerable()\n], InputComponent.prototype, \"handedness\", null);\n/**\n * Native light component.\n *\n * Provides access to a native light component instance.\n */\nexport class LightComponent extends Component {\n    /** @override */\n    static TypeName = 'light';\n    getColor(out = new Float32Array(3)) {\n        const wasm = this._engine.wasm;\n        const ptr = wasm._wl_light_component_get_color(this._id) / 4; /* Align F32 */\n        out[0] = wasm.HEAPF32[ptr];\n        out[1] = wasm.HEAPF32[ptr + 1];\n        out[2] = wasm.HEAPF32[ptr + 2];\n        return out;\n    }\n    /**\n     * Set light color.\n     *\n     * @param c New color array/vector, expected to have at least 3 elements.\n     * @since 1.0.0\n     */\n    setColor(c) {\n        const wasm = this._engine.wasm;\n        const ptr = wasm._wl_light_component_get_color(this._id) / 4; /* Align F32 */\n        wasm.HEAPF32[ptr] = c[0];\n        wasm.HEAPF32[ptr + 1] = c[1];\n        wasm.HEAPF32[ptr + 2] = c[2];\n    }\n    /**\n     * View on the light color.\n     *\n     * @note Prefer to use {@link getColor} in performance-critical code.\n     */\n    get color() {\n        const wasm = this._engine.wasm;\n        return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_light_component_get_color(this._id), 3);\n    }\n    /**\n     * Set light color.\n     *\n     * @param c Color of the light component.\n     *\n     * @note Prefer to use {@link setColor} in performance-critical code.\n     */\n    set color(c) {\n        this.color.set(c);\n    }\n    /** Light type. */\n    get lightType() {\n        return this._engine.wasm._wl_light_component_get_type(this._id);\n    }\n    /**\n     * Set light type.\n     *\n     * @param lightType Type of the light component.\n     */\n    set lightType(t) {\n        this._engine.wasm._wl_light_component_set_type(this._id, t);\n    }\n    /**\n     * Light intensity.\n     * @since 1.0.0\n     */\n    get intensity() {\n        return this._engine.wasm._wl_light_component_get_intensity(this._id);\n    }\n    /**\n     * Set light intensity.\n     *\n     * @param intensity Intensity of the light component.\n     * @since 1.0.0\n     */\n    set intensity(intensity) {\n        this._engine.wasm._wl_light_component_set_intensity(this._id, intensity);\n    }\n    /**\n     * Outer angle for spot lights, in degrees.\n     * @since 1.0.0\n     */\n    get outerAngle() {\n        return this._engine.wasm._wl_light_component_get_outerAngle(this._id);\n    }\n    /**\n     * Set outer angle for spot lights.\n     *\n     * @param angle Outer angle, in degrees.\n     * @since 1.0.0\n     */\n    set outerAngle(angle) {\n        this._engine.wasm._wl_light_component_set_outerAngle(this._id, angle);\n    }\n    /**\n     * Inner angle for spot lights, in degrees.\n     * @since 1.0.0\n     */\n    get innerAngle() {\n        return this._engine.wasm._wl_light_component_get_innerAngle(this._id);\n    }\n    /**\n     * Set inner angle for spot lights.\n     *\n     * @param angle Inner angle, in degrees.\n     * @since 1.0.0\n     */\n    set innerAngle(angle) {\n        this._engine.wasm._wl_light_component_set_innerAngle(this._id, angle);\n    }\n    /**\n     * Whether the light casts shadows.\n     * @since 1.0.0\n     */\n    get shadows() {\n        return !!this._engine.wasm._wl_light_component_get_shadows(this._id);\n    }\n    /**\n     * Set whether the light casts shadows.\n     *\n     * @param b Whether the light casts shadows.\n     * @since 1.0.0\n     */\n    set shadows(b) {\n        this._engine.wasm._wl_light_component_set_shadows(this._id, b);\n    }\n    /**\n     * Range for shadows.\n     * @since 1.0.0\n     */\n    get shadowRange() {\n        return this._engine.wasm._wl_light_component_get_shadowRange(this._id);\n    }\n    /**\n     * Set range for shadows.\n     *\n     * @param range Range for shadows.\n     * @since 1.0.0\n     */\n    set shadowRange(range) {\n        this._engine.wasm._wl_light_component_set_shadowRange(this._id, range);\n    }\n    /**\n     * Bias value for shadows.\n     * @since 1.0.0\n     */\n    get shadowBias() {\n        return this._engine.wasm._wl_light_component_get_shadowBias(this._id);\n    }\n    /**\n     * Set bias value for shadows.\n     *\n     * @param bias Bias for shadows.\n     * @since 1.0.0\n     */\n    set shadowBias(bias) {\n        this._engine.wasm._wl_light_component_set_shadowBias(this._id, bias);\n    }\n    /**\n     * Normal bias value for shadows.\n     * @since 1.0.0\n     */\n    get shadowNormalBias() {\n        return this._engine.wasm._wl_light_component_get_shadowNormalBias(this._id);\n    }\n    /**\n     * Set normal bias value for shadows.\n     *\n     * @param bias Normal bias for shadows.\n     * @since 1.0.0\n     */\n    set shadowNormalBias(bias) {\n        this._engine.wasm._wl_light_component_set_shadowNormalBias(this._id, bias);\n    }\n    /**\n     * Texel size for shadows.\n     * @since 1.0.0\n     */\n    get shadowTexelSize() {\n        return this._engine.wasm._wl_light_component_get_shadowTexelSize(this._id);\n    }\n    /**\n     * Set texel size for shadows.\n     *\n     * @param size Texel size for shadows.\n     * @since 1.0.0\n     */\n    set shadowTexelSize(size) {\n        this._engine.wasm._wl_light_component_set_shadowTexelSize(this._id, size);\n    }\n    /**\n     * Cascade count for {@link LightType.Sun} shadows.\n     * @since 1.0.0\n     */\n    get cascadeCount() {\n        return this._engine.wasm._wl_light_component_get_cascadeCount(this._id);\n    }\n    /**\n     * Set cascade count for {@link LightType.Sun} shadows.\n     *\n     * @param count Cascade count.\n     * @since 1.0.0\n     */\n    set cascadeCount(count) {\n        this._engine.wasm._wl_light_component_set_cascadeCount(this._id, count);\n    }\n}\n__decorate([\n    nativeProperty()\n], LightComponent.prototype, \"color\", null);\n__decorate([\n    nativeProperty()\n], LightComponent.prototype, \"lightType\", null);\n__decorate([\n    nativeProperty()\n], LightComponent.prototype, \"intensity\", null);\n__decorate([\n    nativeProperty()\n], LightComponent.prototype, \"outerAngle\", null);\n__decorate([\n    nativeProperty()\n], LightComponent.prototype, \"innerAngle\", null);\n__decorate([\n    nativeProperty()\n], LightComponent.prototype, \"shadows\", null);\n__decorate([\n    nativeProperty()\n], LightComponent.prototype, \"shadowRange\", null);\n__decorate([\n    nativeProperty()\n], LightComponent.prototype, \"shadowBias\", null);\n__decorate([\n    nativeProperty()\n], LightComponent.prototype, \"shadowNormalBias\", null);\n__decorate([\n    nativeProperty()\n], LightComponent.prototype, \"shadowTexelSize\", null);\n__decorate([\n    nativeProperty()\n], LightComponent.prototype, \"cascadeCount\", null);\n/**\n * Native animation component.\n *\n * Provides access to a native animation component instance.\n */\nexport class AnimationComponent extends Component {\n    /** @override */\n    static TypeName = 'animation';\n    /**\n     * Set animation to play.\n     *\n     * Make sure to {@link Animation#retarget} the animation to affect the\n     * right objects.\n     *\n     * @param anim Animation to play.\n     */\n    set animation(anim) {\n        this._engine.wasm._wl_animation_component_set_animation(this._id, anim ? anim._index : 0);\n    }\n    /** Animation set for this component */\n    get animation() {\n        const id = this._engine.wasm._wl_animation_component_get_animation(this._id);\n        return id > 0 ? new Animation(this._engine, id) : null;\n    }\n    /**\n     * Set play count. Set to `0` to loop indefinitely.\n     *\n     * @param playCount Number of times to repeat the animation.\n     */\n    set playCount(playCount) {\n        this._engine.wasm._wl_animation_component_set_playCount(this._id, playCount);\n    }\n    /** Number of times the animation is played. */\n    get playCount() {\n        return this._engine.wasm._wl_animation_component_get_playCount(this._id);\n    }\n    /**\n     * Set speed. Set to negative values to run the animation backwards.\n     *\n     * Setting speed has an immediate effect for the current frame's update\n     * and will continue with the speed from the current point in the animation.\n     *\n     * @param speed New speed at which to play the animation.\n     * @since 0.8.10\n     */\n    set speed(speed) {\n        this._engine.wasm._wl_animation_component_set_speed(this._id, speed);\n    }\n    /**\n     * Speed factor at which the animation is played.\n     *\n     * @since 0.8.10\n     */\n    get speed() {\n        return this._engine.wasm._wl_animation_component_get_speed(this._id);\n    }\n    /** Current playing state of the animation */\n    get state() {\n        return this._engine.wasm._wl_animation_component_state(this._id);\n    }\n    /**\n     * Play animation.\n     *\n     * If the animation is currently paused, resumes from that position. If the\n     * animation is already playing, does nothing.\n     *\n     * To restart the animation, {@link AnimationComponent#stop} it first.\n     */\n    play() {\n        this._engine.wasm._wl_animation_component_play(this._id);\n    }\n    /** Stop animation. */\n    stop() {\n        this._engine.wasm._wl_animation_component_stop(this._id);\n    }\n    /** Pause animation. */\n    pause() {\n        this._engine.wasm._wl_animation_component_pause(this._id);\n    }\n}\n__decorate([\n    nativeProperty()\n], AnimationComponent.prototype, \"animation\", null);\n__decorate([\n    nativeProperty()\n], AnimationComponent.prototype, \"playCount\", null);\n__decorate([\n    nativeProperty()\n], AnimationComponent.prototype, \"speed\", null);\n__decorate([\n    enumerable()\n], AnimationComponent.prototype, \"state\", null);\n/**\n * Native mesh component.\n *\n * Provides access to a native mesh component instance.\n */\nexport class MeshComponent extends Component {\n    /** @override */\n    static TypeName = 'mesh';\n    /**\n     * Set material to render the mesh with.\n     *\n     * @param material Material to render the mesh with.\n     */\n    set material(material) {\n        this._engine.wasm._wl_mesh_component_set_material(this._id, material ? material._index : 0);\n    }\n    /** Material used to render the mesh. */\n    get material() {\n        const id = this._engine.wasm._wl_mesh_component_get_material(this._id);\n        return id > 0 ? new Material(this._engine, id) : null;\n    }\n    /** Mesh rendered by this component. */\n    get mesh() {\n        const id = this._engine.wasm._wl_mesh_component_get_mesh(this._id);\n        return id > 0 ? new Mesh(this._engine, id) : null;\n    }\n    /**\n     * Set mesh to rendered with this component.\n     *\n     * @param mesh Mesh rendered by this component.\n     */\n    set mesh(mesh) {\n        this._engine.wasm._wl_mesh_component_set_mesh(this._id, mesh ? mesh._index : 0);\n    }\n    /** Skin for this mesh component. */\n    get skin() {\n        const id = this._engine.wasm._wl_mesh_component_get_skin(this._id);\n        return id > 0 ? new Skin(this._engine, id) : null;\n    }\n    /**\n     * Set skin to transform this mesh component.\n     *\n     * @param skin Skin to use for rendering skinned meshes.\n     */\n    set skin(skin) {\n        this._engine.wasm._wl_mesh_component_set_skin(this._id, skin ? skin._index : 0);\n    }\n}\n__decorate([\n    nativeProperty()\n], MeshComponent.prototype, \"material\", null);\n__decorate([\n    nativeProperty()\n], MeshComponent.prototype, \"mesh\", null);\n__decorate([\n    nativeProperty()\n], MeshComponent.prototype, \"skin\", null);\n/**\n * Enum for Physics axes locking\n *\n * See {@link PhysXComponent.angularLockAxis} and {@link PhysXComponent.linearLockAxis}.\n */\nexport var LockAxis;\n(function (LockAxis) {\n    /**\n     * No axis selected.\n     */\n    LockAxis[LockAxis[\"None\"] = 0] = \"None\";\n    /**\n     * **X axis**:\n     */\n    LockAxis[LockAxis[\"X\"] = 1] = \"X\";\n    /**\n     * **Y axis**:\n     */\n    LockAxis[LockAxis[\"Y\"] = 2] = \"Y\";\n    /**\n     * **Z axis**:\n     */\n    LockAxis[LockAxis[\"Z\"] = 4] = \"Z\";\n})(LockAxis || (LockAxis = {}));\n/**\n * Native physx rigid body component.\n *\n * Provides access to a native mesh component instance.\n * Only available when using physx enabled runtime, see \"Project Settings > Runtime\".\n */\nexport class PhysXComponent extends Component {\n    /** @override */\n    static TypeName = 'physx';\n    getTranslationOffset(out = new Float32Array(3)) {\n        const wasm = this._engine.wasm;\n        wasm._wl_physx_component_get_offsetTranslation(this._id, wasm._tempMem);\n        out[0] = wasm._tempMemFloat[0];\n        out[1] = wasm._tempMemFloat[1];\n        out[2] = wasm._tempMemFloat[2];\n        return out;\n    }\n    getRotationOffset(out = new Float32Array(4)) {\n        const wasm = this._engine.wasm;\n        const ptr = wasm._wl_physx_component_get_offsetTransform(this._id) >> 2; /* Align F32 */\n        out[0] = wasm.HEAPF32[ptr];\n        out[1] = wasm.HEAPF32[ptr + 1];\n        out[2] = wasm.HEAPF32[ptr + 2];\n        out[3] = wasm.HEAPF32[ptr + 3];\n        return out;\n    }\n    /**\n     * Set whether this rigid body is static.\n     *\n     * Setting this property only takes effect once the component\n     * switches from inactive to active.\n     *\n     * @param b Whether the rigid body should be static.\n     */\n    set static(b) {\n        this._engine.wasm._wl_physx_component_set_static(this._id, b);\n    }\n    /**\n     * Whether this rigid body is static.\n     *\n     * This property returns whether the rigid body is *effectively*\n     * static. If static property was set while the rigid body was\n     * active, it will not take effect until the rigid body is set\n     * inactive and active again. Until the component is set inactive,\n     * this getter will return whether the rigid body is actually\n     * static.\n     */\n    get static() {\n        return !!this._engine.wasm._wl_physx_component_get_static(this._id);\n    }\n    /**\n     * Equivalent to {@link PhysXComponent.getTranslationOffset}.\n     *\n     * Gives a quick view of the offset in a debugger.\n     *\n     * @note Prefer to use {@link PhysXComponent.getTranslationOffset} for performance.\n     *\n     * @since 1.1.1\n     */\n    get translationOffset() {\n        return this.getTranslationOffset();\n    }\n    /**\n     * Set the offset translation.\n     *\n     * The array must be a vector of at least **3** elements.\n     *\n     * @note The component must be re-activated to apply the change.\n     *\n     * @since 1.1.1\n     */\n    set translationOffset(offset) {\n        const wasm = this._engine.wasm;\n        wasm._wl_physx_component_set_offsetTranslation(this._id, offset[0], offset[1], offset[2]);\n    }\n    /**\n     * Equivalent to {@link PhysXComponent.getRotationOffset}.\n     *\n     * Gives a quick view of the offset in a debugger.\n     *\n     * @note Prefer to use {@link PhysXComponent.getRotationOffset} for performance.\n     *\n     * @since 1.1.1\n     */\n    get rotationOffset() {\n        return this.getRotationOffset();\n    }\n    /**\n     * Set the offset rotation.\n     *\n     * The array must be a quaternion of at least **4** elements.\n     *\n     * @note The component must be re-activated to apply the change.\n     *\n     * @since 1.1.1\n     */\n    set rotationOffset(offset) {\n        const wasm = this._engine.wasm;\n        wasm._wl_physx_component_set_offsetRotation(this._id, offset[0], offset[1], offset[2], offset[3]);\n    }\n    /**\n     * Set whether this rigid body is kinematic.\n     *\n     * @param b Whether the rigid body should be kinematic.\n     */\n    set kinematic(b) {\n        this._engine.wasm._wl_physx_component_set_kinematic(this._id, b);\n    }\n    /**\n     * Whether this rigid body is kinematic.\n     */\n    get kinematic() {\n        return !!this._engine.wasm._wl_physx_component_get_kinematic(this._id);\n    }\n    /**\n     * Set whether this rigid body's gravity is enabled.\n     *\n     * @param b Whether the rigid body's gravity should be enabled.\n     */\n    set gravity(b) {\n        this._engine.wasm._wl_physx_component_set_gravity(this._id, b);\n    }\n    /**\n     * Whether this rigid body's gravity flag is enabled.\n     */\n    get gravity() {\n        return !!this._engine.wasm._wl_physx_component_get_gravity(this._id);\n    }\n    /**\n     * Set whether this rigid body's simulate flag is enabled.\n     *\n     * @param b Whether the rigid body's simulate flag should be enabled.\n     */\n    set simulate(b) {\n        this._engine.wasm._wl_physx_component_set_simulate(this._id, b);\n    }\n    /**\n     * Whether this rigid body's simulate flag is enabled.\n     */\n    get simulate() {\n        return !!this._engine.wasm._wl_physx_component_get_simulate(this._id);\n    }\n    /**\n     * Set whether to allow simulation of this rigid body.\n     *\n     * {@link allowSimulation} and {@link trigger} can not be enabled at the\n     * same time. Enabling {@link allowSimulation} while {@link trigger} is enabled\n     * will disable {@link trigger}.\n     *\n     * @param b Whether to allow simulation of this rigid body.\n     */\n    set allowSimulation(b) {\n        this._engine.wasm._wl_physx_component_set_allowSimulation(this._id, b);\n    }\n    /**\n     * Whether to allow simulation of this rigid body.\n     */\n    get allowSimulation() {\n        return !!this._engine.wasm._wl_physx_component_get_allowSimulation(this._id);\n    }\n    /**\n     * Set whether this rigid body may be queried in ray casts.\n     *\n     * @param b Whether this rigid body may be queried in ray casts.\n     */\n    set allowQuery(b) {\n        this._engine.wasm._wl_physx_component_set_allowQuery(this._id, b);\n    }\n    /**\n     * Whether this rigid body may be queried in ray casts.\n     */\n    get allowQuery() {\n        return !!this._engine.wasm._wl_physx_component_get_allowQuery(this._id);\n    }\n    /**\n     * Set whether this physics body is a trigger.\n     *\n     * {@link allowSimulation} and {@link trigger} can not be enabled at the\n     * same time. Enabling trigger while {@link allowSimulation} is enabled,\n     * will disable {@link allowSimulation}.\n     *\n     * @param b Whether this physics body is a trigger.\n     */\n    set trigger(b) {\n        this._engine.wasm._wl_physx_component_set_trigger(this._id, b);\n    }\n    /**\n     * Whether this physics body is a trigger.\n     */\n    get trigger() {\n        return !!this._engine.wasm._wl_physx_component_get_trigger(this._id);\n    }\n    /**\n     * Set the shape for collision detection.\n     *\n     * @param s New shape.\n     * @since 0.8.5\n     */\n    set shape(s) {\n        this._engine.wasm._wl_physx_component_set_shape(this._id, s);\n    }\n    /** The shape for collision detection. */\n    get shape() {\n        return this._engine.wasm._wl_physx_component_get_shape(this._id);\n    }\n    /**\n     * Set additional data for the shape.\n     *\n     * Retrieved only from {@link PhysXComponent#shapeData}.\n     * @since 0.8.10\n     */\n    set shapeData(d) {\n        if (d == null || !isMeshShape(this.shape))\n            return;\n        this._engine.wasm._wl_physx_component_set_shape_data(this._id, d.index);\n    }\n    /**\n     * Additional data for the shape.\n     *\n     * `null` for {@link Shape} values: `None`, `Sphere`, `Capsule`, `Box`, `Plane`.\n     * `{index: n}` for `TriangleMesh` and `ConvexHull`.\n     *\n     * This data is currently only for passing onto or creating other {@link PhysXComponent}.\n     * @since 0.8.10\n     */\n    get shapeData() {\n        if (!isMeshShape(this.shape))\n            return null;\n        return {\n            index: this._engine.wasm._wl_physx_component_get_shape_data(this._id),\n        };\n    }\n    /**\n     * Set the shape extents for collision detection.\n     *\n     * @param e New extents for the shape.\n     * @since 0.8.5\n     */\n    set extents(e) {\n        this.extents.set(e);\n    }\n    /**\n     * The shape extents for collision detection.\n     */\n    get extents() {\n        const wasm = this._engine.wasm;\n        const ptr = wasm._wl_physx_component_get_extents(this._id);\n        return new Float32Array(wasm.HEAPF32.buffer, ptr, 3);\n    }\n    /**\n     * Get staticFriction.\n     */\n    get staticFriction() {\n        return this._engine.wasm._wl_physx_component_get_staticFriction(this._id);\n    }\n    /**\n     * Set staticFriction.\n     * @param v New staticFriction.\n     */\n    set staticFriction(v) {\n        this._engine.wasm._wl_physx_component_set_staticFriction(this._id, v);\n    }\n    /**\n     * Get dynamicFriction.\n     */\n    get dynamicFriction() {\n        return this._engine.wasm._wl_physx_component_get_dynamicFriction(this._id);\n    }\n    /**\n     * Set dynamicFriction\n     * @param v New dynamicDamping.\n     */\n    set dynamicFriction(v) {\n        this._engine.wasm._wl_physx_component_set_dynamicFriction(this._id, v);\n    }\n    /**\n     * Get bounciness.\n     * @since 0.9.0\n     */\n    get bounciness() {\n        return this._engine.wasm._wl_physx_component_get_bounciness(this._id);\n    }\n    /**\n     * Set bounciness.\n     * @param v New bounciness.\n     * @since 0.9.0\n     */\n    set bounciness(v) {\n        this._engine.wasm._wl_physx_component_set_bounciness(this._id, v);\n    }\n    /**\n     * Get linearDamping/\n     */\n    get linearDamping() {\n        return this._engine.wasm._wl_physx_component_get_linearDamping(this._id);\n    }\n    /**\n     * Set linearDamping.\n     * @param v New linearDamping.\n     */\n    set linearDamping(v) {\n        this._engine.wasm._wl_physx_component_set_linearDamping(this._id, v);\n    }\n    /** Get angularDamping. */\n    get angularDamping() {\n        return this._engine.wasm._wl_physx_component_get_angularDamping(this._id);\n    }\n    /**\n     * Set angularDamping.\n     * @param v New angularDamping.\n     */\n    set angularDamping(v) {\n        this._engine.wasm._wl_physx_component_set_angularDamping(this._id, v);\n    }\n    /**\n     * Set linear velocity.\n     *\n     * [PhysX Manual - \"Velocity\"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#velocity)\n     *\n     * Has no effect, if the component is not active.\n     *\n     * @param v New linear velocity.\n     */\n    set linearVelocity(v) {\n        this._engine.wasm._wl_physx_component_set_linearVelocity(this._id, v[0], v[1], v[2]);\n    }\n    /** Linear velocity or `[0, 0, 0]` if the component is not active. */\n    get linearVelocity() {\n        const wasm = this._engine.wasm;\n        wasm._wl_physx_component_get_linearVelocity(this._id, wasm._tempMem);\n        return new Float32Array(wasm.HEAPF32.buffer, wasm._tempMem, 3);\n    }\n    /**\n     * Set angular velocity\n     *\n     * [PhysX Manual - \"Velocity\"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#velocity)\n     *\n     * Has no effect, if the component is not active.\n     *\n     * @param v New angular velocity\n     */\n    set angularVelocity(v) {\n        this._engine.wasm._wl_physx_component_set_angularVelocity(this._id, v[0], v[1], v[2]);\n    }\n    /** Angular velocity or `[0, 0, 0]` if the component is not active. */\n    get angularVelocity() {\n        const wasm = this._engine.wasm;\n        wasm._wl_physx_component_get_angularVelocity(this._id, wasm._tempMem);\n        return new Float32Array(wasm.HEAPF32.buffer, wasm._tempMem, 3);\n    }\n    /**\n     * Set the components groups mask.\n     *\n     * @param flags New flags that need to be set.\n     */\n    set groupsMask(flags) {\n        this._engine.wasm._wl_physx_component_set_groupsMask(this._id, flags);\n    }\n    /**\n     * Get the components groups mask flags.\n     *\n     * Each bit represents membership to group, see example.\n     *\n     * ```js\n     * // Assign c to group 2\n     * c.groupsMask = (1 << 2);\n     *\n     * // Assign c to group 0\n     * c.groupsMask  = (1 << 0);\n     *\n     * // Assign c to group 0 and 2\n     * c.groupsMask = (1 << 0) | (1 << 2);\n     *\n     * (c.groupsMask & (1 << 2)) != 0; // true\n     * (c.groupsMask & (1 << 7)) != 0; // false\n     * ```\n     */\n    get groupsMask() {\n        return this._engine.wasm._wl_physx_component_get_groupsMask(this._id);\n    }\n    /**\n     * Set the components blocks mask.\n     *\n     * @param flags New flags that need to be set.\n     */\n    set blocksMask(flags) {\n        this._engine.wasm._wl_physx_component_set_blocksMask(this._id, flags);\n    }\n    /**\n     * Get the components blocks mask flags.\n     *\n     * Each bit represents membership to the block, see example.\n     *\n     * ```js\n     * // Block overlap with any objects in group 2\n     * c.blocksMask = (1 << 2);\n     *\n     * // Block overlap with any objects in group 0\n     * c.blocksMask  = (1 << 0)\n     *\n     * // Block overlap with any objects in group 0 and 2\n     * c.blocksMask = (1 << 0) | (1 << 2);\n     *\n     * (c.blocksMask & (1 << 2)) != 0; // true\n     * (c.blocksMask & (1 << 7)) != 0; // false\n     * ```\n     */\n    get blocksMask() {\n        return this._engine.wasm._wl_physx_component_get_blocksMask(this._id);\n    }\n    /**\n     * Set axes to lock for linear velocity.\n     *\n     * @param lock The Axis that needs to be set.\n     *\n     * Combine flags with Bitwise OR:\n     *\n     * ```js\n     * body.linearLockAxis = LockAxis.X | LockAxis.Y; // x and y set\n     * body.linearLockAxis = LockAxis.X; // y unset\n     * ```\n     *\n     * @note This has no effect if the component is static.\n     */\n    set linearLockAxis(lock) {\n        this._engine.wasm._wl_physx_component_set_linearLockAxis(this._id, lock);\n    }\n    /**\n     * Get the linear lock axes flags.\n     *\n     * To get the state of a specific flag, Bitwise AND with the LockAxis needed.\n     *\n     * ```js\n     * if(body.linearLockAxis & LockAxis.Y) {\n     *     console.log(\"The Y flag was set!\");\n     * }\n     * ```\n     *\n     * @return axes that are currently locked for linear movement.\n     */\n    get linearLockAxis() {\n        return this._engine.wasm._wl_physx_component_get_linearLockAxis(this._id);\n    }\n    /**\n     * Set axes to lock for angular velocity.\n     *\n     * @param lock The Axis that needs to be set.\n     *\n     * ```js\n     * body.angularLockAxis = LockAxis.X | LockAxis.Y; // x and y set\n     * body.angularLockAxis = LockAxis.X; // y unset\n     * ```\n     *\n     * @note This has no effect if the component is static.\n     */\n    set angularLockAxis(lock) {\n        this._engine.wasm._wl_physx_component_set_angularLockAxis(this._id, lock);\n    }\n    /**\n     * Get the angular lock axes flags.\n     *\n     * To get the state of a specific flag, Bitwise AND with the LockAxis needed:\n     *\n     * ```js\n     * if(body.angularLockAxis & LockAxis.Y) {\n     *     console.log(\"The Y flag was set!\");\n     * }\n     * ```\n     *\n     * @return axes that are currently locked for angular movement.\n     */\n    get angularLockAxis() {\n        return this._engine.wasm._wl_physx_component_get_angularLockAxis(this._id);\n    }\n    /**\n     * Set mass.\n     *\n     * [PhysX Manual - \"Mass Properties\"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#mass-properties)\n     *\n     * @param m New mass.\n     */\n    set mass(m) {\n        this._engine.wasm._wl_physx_component_set_mass(this._id, m);\n    }\n    /** Mass */\n    get mass() {\n        return this._engine.wasm._wl_physx_component_get_mass(this._id);\n    }\n    /**\n     * Set mass space interia tensor.\n     *\n     * [PhysX Manual - \"Mass Properties\"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#mass-properties)\n     *\n     * Has no effect, if the component is not active.\n     *\n     * @param v New mass space interatia tensor.\n     */\n    set massSpaceInteriaTensor(v) {\n        this._engine.wasm._wl_physx_component_set_massSpaceInertiaTensor(this._id, v[0], v[1], v[2]);\n    }\n    /**\n     * Set the rigid body to sleep upon activation.\n     *\n     * When asleep, the rigid body will not be simulated until the next contact.\n     *\n     * @param flag `true` to sleep upon activation.\n     *\n     * @since 1.1.5\n     */\n    set sleepOnActivate(flag) {\n        this._engine.wasm._wl_physx_component_set_sleepOnActivate(this._id, flag);\n    }\n    /**\n     * `true` if the rigid body is set to sleep upon activation, `false` otherwise.\n     *\n     * @since 1.1.5\n     */\n    get sleepOnActivate() {\n        return !!this._engine.wasm._wl_physx_component_get_sleepOnActivate(this._id);\n    }\n    /**\n     * Apply a force.\n     *\n     * [PhysX Manual - \"Applying Forces and Torques\"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#applying-forces-and-torques)\n     *\n     * Has no effect, if the component is not active.\n     *\n     * @param f Force vector.\n     * @param m Force mode, see {@link ForceMode}, default `Force`.\n     * @param localForce Whether the force vector is in local space, default `false`.\n     * @param p Position to apply force at, default is center of mass.\n     * @param local Whether position is in local space, default `false`.\n     */\n    addForce(f, m = ForceMode.Force, localForce = false, p, local = false) {\n        const wasm = this._engine.wasm;\n        if (!p) {\n            wasm._wl_physx_component_addForce(this._id, f[0], f[1], f[2], m, localForce);\n            return;\n        }\n        wasm._wl_physx_component_addForceAt(this._id, f[0], f[1], f[2], m, localForce, p[0], p[1], p[2], local);\n    }\n    /**\n     * Apply torque.\n     *\n     * [PhysX Manual - \"Applying Forces and Torques\"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#applying-forces-and-torques)\n     *\n     * Has no effect, if the component is not active.\n     *\n     * @param f Force vector.\n     * @param m Force mode, see {@link ForceMode}, default `Force`.\n     */\n    addTorque(f, m = ForceMode.Force) {\n        this._engine.wasm._wl_physx_component_addTorque(this._id, f[0], f[1], f[2], m);\n    }\n    /**\n     * Add on collision callback.\n     *\n     * @param callback Function to call when this rigid body (un)collides with any other.\n     *\n     * ```js\n     *  let rigidBody = this.object.getComponent('physx');\n     *  rigidBody.onCollision(function(type, other) {\n     *      // Ignore uncollides\n     *      if(type == CollisionEventType.TouchLost) return;\n     *\n     *      // Take damage on collision with enemies\n     *      if(other.object.name.startsWith(\"enemy-\")) {\n     *          this.applyDamage(10);\n     *      }\n     *  }.bind(this));\n     * ```\n     *\n     * @returns Id of the new callback for use with {@link PhysXComponent#removeCollisionCallback}.\n     */\n    onCollision(callback) {\n        return this.onCollisionWith(this, callback);\n    }\n    /**\n     * Add filtered on collision callback.\n     *\n     * @param otherComp Component for which callbacks will\n     *        be triggered. If you pass this component, the method is equivalent to.\n     *        {@link PhysXComponent#onCollision}.\n     * @param callback Function to call when this rigid body\n     *        (un)collides with `otherComp`.\n     * @returns Id of the new callback for use with {@link PhysXComponent#removeCollisionCallback}.\n     */\n    onCollisionWith(otherComp, callback) {\n        const physics = this._engine.physics;\n        physics._callbacks[this._id] = physics._callbacks[this._id] || [];\n        physics._callbacks[this._id].push(callback);\n        return this._engine.wasm._wl_physx_component_addCallback(this._id, otherComp._id || this._id);\n    }\n    /**\n     * Remove a collision callback added with {@link PhysXComponent#onCollision} or {@link PhysXComponent#onCollisionWith}.\n     *\n     * @param callbackId Callback id as returned by {@link PhysXComponent#onCollision} or {@link PhysXComponent#onCollisionWith}.\n     * @throws When the callback does not belong to the component.\n     * @throws When the callback does not exist.\n     */\n    removeCollisionCallback(callbackId) {\n        const physics = this._engine.physics;\n        const r = this._engine.wasm._wl_physx_component_removeCallback(this._id, callbackId);\n        /* r is the amount of object to remove from the end of the\n         * callbacks array for this object */\n        if (r)\n            physics._callbacks[this._id].splice(-r);\n    }\n}\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"static\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"translationOffset\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"rotationOffset\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"kinematic\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"gravity\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"simulate\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"allowSimulation\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"allowQuery\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"trigger\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"shape\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"shapeData\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"extents\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"staticFriction\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"dynamicFriction\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"bounciness\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"linearDamping\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"angularDamping\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"linearVelocity\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"angularVelocity\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"groupsMask\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"blocksMask\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"linearLockAxis\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"angularLockAxis\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"mass\", null);\n__decorate([\n    nativeProperty()\n], PhysXComponent.prototype, \"sleepOnActivate\", null);\n/**\n * Access to the physics scene\n */\nexport class Physics {\n    /**\n     * @hidden\n     *\n     * **Note**: This is public to emulate a `friend` accessor.\n     */\n    _callbacks;\n    /** Wonderland Engine instance */\n    _engine;\n    /** Ray Hit */\n    _rayHit;\n    /** Hit. */\n    _hit;\n    constructor(engine) {\n        this._engine = engine;\n        this._rayHit = engine.wasm._malloc(4 * (3 * 4 + 3 * 4 + 4 + 2) + 4);\n        this._hit = new RayHit(this._engine, this._rayHit);\n        this._callbacks = {};\n    }\n    /**\n     * Cast a ray through the physics scene and find intersecting objects.\n     *\n     * The resulting ray hit will contain **up to 4** closest ray hits,\n     * sorted by increasing distance.\n     *\n     * @param o Ray origin.\n     * @param d Ray direction.\n     * @param group Collision group to filter by: only objects that are\n     *        part of given group are considered for raycast.\n     * @param maxDistance Maximum ray distance, default `100.0`.\n     *\n     * @returns The RayHit instance, belonging to this class.\n     *\n     * @note The returned {@link RayHit} object is owned by the Physics instance and\n     *       will be reused with the next {@link Physics#rayCast} call.\n     */\n    rayCast(o, d, group, maxDistance = 100.0) {\n        this._engine.wasm._wl_physx_ray_cast(o[0], o[1], o[2], d[0], d[1], d[2], group, maxDistance, this._rayHit);\n        return this._hit;\n    }\n}\n/**\n * Mesh index type.\n */\nexport var MeshIndexType;\n(function (MeshIndexType) {\n    /** Single byte mesh index, range 0-255 */\n    MeshIndexType[MeshIndexType[\"UnsignedByte\"] = 1] = \"UnsignedByte\";\n    /** Two byte mesh index, range 0-65535 */\n    MeshIndexType[MeshIndexType[\"UnsignedShort\"] = 2] = \"UnsignedShort\";\n    /** Four byte mesh index, range 0-4294967295 */\n    MeshIndexType[MeshIndexType[\"UnsignedInt\"] = 4] = \"UnsignedInt\";\n})(MeshIndexType || (MeshIndexType = {}));\n/**\n * Mesh skinning type.\n */\nexport var MeshSkinningType;\n(function (MeshSkinningType) {\n    /** Not skinned */\n    MeshSkinningType[MeshSkinningType[\"None\"] = 0] = \"None\";\n    /** Skinned, 4 joints/weight per vertex */\n    MeshSkinningType[MeshSkinningType[\"FourJoints\"] = 1] = \"FourJoints\";\n    /** Skinned, 8 joints/weight per vertex */\n    MeshSkinningType[MeshSkinningType[\"EightJoints\"] = 2] = \"EightJoints\";\n})(MeshSkinningType || (MeshSkinningType = {}));\n/**\n * Wrapper around a native mesh data.\n *\n * To modify a mesh, you get access to a {@link MeshAttributeAccessor} that allows you to modify\n * the content of the buffers:\n *\n * Usage:\n *\n * ```js\n * const mesh = new Mesh(engine, {vertexCount: 3, indexData: [0, 1, 2] });\n * const positions = mesh.attribute(MeshAttribute.Position);\n * ...\n * ```\n */\nexport class Mesh {\n    /**\n     * Index of the mesh in the manager.\n     *\n     * @hidden\n     */\n    _index = -1;\n    /** Wonderland Engine instance. @hidden */\n    _engine;\n    /**\n     * Create a new instance.\n     *\n     * @param params Either a mesh index to wrap or set of parameters to create a new mesh.\n     *    For more information, please have a look at the {@link MeshParameters} interface.\n     */\n    constructor(engine, params) {\n        this._engine = engine ?? WL;\n        this._index = -1;\n        if (isNumber(params)) {\n            this._index = params;\n            return;\n        }\n        if (!params.vertexCount)\n            throw new Error(\"Missing parameter 'vertexCount'\");\n        const wasm = this._engine.wasm;\n        let indexData = 0;\n        let indexType = 0;\n        let indexDataSize = 0;\n        if (params.indexData) {\n            indexType = params.indexType || MeshIndexType.UnsignedShort;\n            indexDataSize = params.indexData.length * indexType;\n            indexData = wasm._malloc(indexDataSize);\n            /* Copy the index data into wasm memory */\n            switch (indexType) {\n                case MeshIndexType.UnsignedByte:\n                    wasm.HEAPU8.set(params.indexData, indexData);\n                    break;\n                case MeshIndexType.UnsignedShort:\n                    wasm.HEAPU16.set(params.indexData, indexData >> 1);\n                    break;\n                case MeshIndexType.UnsignedInt:\n                    wasm.HEAPU32.set(params.indexData, indexData >> 2);\n                    break;\n            }\n        }\n        const { skinningType = MeshSkinningType.None } = params;\n        this._index = wasm._wl_mesh_create(indexData, indexDataSize, indexType, params.vertexCount, skinningType);\n    }\n    /** Number of vertices in this mesh. */\n    get vertexCount() {\n        return this._engine.wasm._wl_mesh_get_vertexCount(this._index);\n    }\n    /** Index data (read-only) or `null` if the mesh is not indexed. */\n    get indexData() {\n        const wasm = this._engine.wasm;\n        const tempMem = wasm._tempMem;\n        const ptr = wasm._wl_mesh_get_indexData(this._index, tempMem, tempMem + 4);\n        if (ptr === null)\n            return null;\n        const indexCount = wasm.HEAPU32[tempMem / 4];\n        const indexSize = wasm.HEAPU32[tempMem / 4 + 1];\n        switch (indexSize) {\n            case MeshIndexType.UnsignedByte:\n                return new Uint8Array(wasm.HEAPU8.buffer, ptr, indexCount);\n            case MeshIndexType.UnsignedShort:\n                return new Uint16Array(wasm.HEAPU16.buffer, ptr, indexCount);\n            case MeshIndexType.UnsignedInt:\n                return new Uint32Array(wasm.HEAPU32.buffer, ptr, indexCount);\n        }\n        return null;\n    }\n    /** Hosting engine instance. */\n    get engine() {\n        return this._engine;\n    }\n    /**\n     * Apply changes to {@link attribute | vertex attributes}.\n     *\n     * Uploads the updated vertex attributes to the GPU and updates the bounding\n     * sphere to match the new vertex positions.\n     *\n     * Since this is an expensive operation, call it only once you have performed\n     * all modifications on a mesh and avoid calling if you did not perform any\n     * modifications at all.\n     */\n    update() {\n        this._engine.wasm._wl_mesh_update(this._index);\n    }\n    getBoundingSphere(out = new Float32Array(4)) {\n        const tempMemFloat = this._engine.wasm._tempMemFloat;\n        this._engine.wasm._wl_mesh_get_boundingSphere(this._index, this._engine.wasm._tempMem);\n        out[0] = tempMemFloat[0];\n        out[1] = tempMemFloat[1];\n        out[2] = tempMemFloat[2];\n        out[3] = tempMemFloat[3];\n        return out;\n    }\n    attribute(attr) {\n        if (typeof attr != 'number')\n            throw new TypeError('Expected number, but got ' + typeof attr);\n        const tempMemUint32 = this._engine.wasm._tempMemUint32;\n        this._engine.wasm._wl_mesh_get_attribute(this._index, attr, this._engine.wasm._tempMem);\n        if (tempMemUint32[0] == 255)\n            return null;\n        const arraySize = tempMemUint32[5];\n        return new MeshAttributeAccessor(this._engine, {\n            attribute: tempMemUint32[0],\n            offset: tempMemUint32[1],\n            stride: tempMemUint32[2],\n            formatSize: tempMemUint32[3],\n            componentCount: tempMemUint32[4],\n            /* The WASM API returns `0` for a scalar value. We clamp it to 1 as we strictly use it as a multiplier for get/set operations */\n            arraySize: arraySize ? arraySize : 1,\n            length: this.vertexCount,\n            bufferType: (attr !== MeshAttribute.JointId\n                ? Float32Array\n                : Uint16Array),\n        });\n    }\n    /**\n     * Destroy and free the meshes memory.\n     *\n     * It is best practice to set the mesh variable to `null` after calling\n     * destroy to prevent accidental use:\n     *\n     * ```js\n     *   mesh.destroy();\n     *   mesh = null;\n     * ```\n     *\n     * Accessing the mesh after destruction behaves like accessing an empty\n     * mesh.\n     *\n     * @since 0.9.0\n     */\n    destroy() {\n        this._engine.wasm._wl_mesh_destroy(this._index);\n    }\n    /**\n     * Checks equality by comparing whether the wrapped native mesh ids are\n     * equal.\n     *\n     * @param otherMesh Mesh to check equality with.\n     * @returns Whether this mesh equals the given mesh.\n     *\n     * @since 1.0.0\n     */\n    equals(otherMesh) {\n        if (!otherMesh)\n            return false;\n        return this._index === otherMesh._index;\n    }\n}\n/**\n * An iterator over a mesh vertex attribute.\n *\n * Usage:\n *\n * ```js\n * const mesh = this.object.getComponent('mesh').mesh;\n * const positions = mesh.attribute(MeshAttribute.Position);\n *\n * // Equivalent to `new Float32Array(3)`.\n * const temp = positions.createArray();\n *\n * for(let i = 0; i < positions.length; ++i) {\n *     // `pos` will reference `temp` and thereby not allocate additional\n *     // memory, which would cause a perf spike when collected.\n *     const pos = positions.get(i, temp);\n *     // Scale position by 2 on x-axis only.\n *     pos[0] *= 2.0;\n *     positions.set(i, pos);\n * }\n * // We're done modifying, tell the engine to move vertex data to the GPU.\n * mesh.update();\n * ```\n */\nexport class MeshAttributeAccessor {\n    /** Max number of elements. */\n    length = 0;\n    /** Wonderland Engine instance. @hidden */\n    _engine;\n    /** Attribute index. @hidden */\n    _attribute = -1;\n    /** Attribute offset. @hidden */\n    _offset = 0;\n    /** Attribute stride. @hidden */\n    _stride = 0;\n    /** Format size native enum. @hidden */\n    _formatSize = 0;\n    /** Number of components per vertex. @hidden */\n    _componentCount = 0;\n    /** Number of values per vertex. @hidden */\n    _arraySize = 1;\n    /**\n     * Class to instantiate an ArrayBuffer to get/set values.\n     */\n    _bufferType;\n    /**\n     * Function to allocate temporary WASM memory. It is cached in the accessor to avoid\n     * conditionals during get/set.\n     */\n    _tempBufferGetter;\n    /**\n     * Create a new instance.\n     *\n     * @note Please use {@link Mesh.attribute} to create a new instance.\n     *\n     * @param options Contains information about how to read the data.\n     * @note Do not use this constructor. Instead, please use the {@link Mesh.attribute} method.\n     *\n     * @hidden\n     */\n    constructor(engine, options) {\n        this._engine = engine;\n        const wasm = this._engine.wasm;\n        this._attribute = options.attribute;\n        this._offset = options.offset;\n        this._stride = options.stride;\n        this._formatSize = options.formatSize;\n        this._componentCount = options.componentCount;\n        this._arraySize = options.arraySize;\n        this._bufferType = options.bufferType;\n        this.length = options.length;\n        this._tempBufferGetter = (this._bufferType === Float32Array\n            ? wasm.getTempBufferF32.bind(wasm)\n            : wasm.getTempBufferU16.bind(wasm));\n    }\n    /**\n     * Create a new TypedArray to hold this attribute's values.\n     *\n     * This method is useful to create a view to hold the data to\n     * pass to {@link get} and {@link set}\n     *\n     * Example:\n     *\n     * ```js\n     * const vertexCount = 4;\n     * const positionAttribute = mesh.attribute(MeshAttribute.Position);\n     *\n     * // A position has 3 floats per vertex. Thus, positions has length 3 * 4.\n     * const positions = positionAttribute.createArray(vertexCount);\n     * ```\n     *\n     * @param count The number of **vertices** expected.\n     * @returns A TypedArray with the appropriate format to access the data\n     */\n    createArray(count = 1) {\n        count = count > this.length ? this.length : count;\n        return new this._bufferType(count * this._componentCount * this._arraySize);\n    }\n    get(index, out = this.createArray()) {\n        if (out.length % this._componentCount !== 0) {\n            throw new Error(`out.length, ${out.length} is not a multiple of the attribute vector components, ${this._componentCount}`);\n        }\n        const dest = this._tempBufferGetter(out.length);\n        const elementSize = this._bufferType.BYTES_PER_ELEMENT;\n        const destSize = elementSize * out.length;\n        const srcFormatSize = this._formatSize * this._arraySize;\n        const destFormatSize = this._componentCount * elementSize * this._arraySize;\n        this._engine.wasm._wl_mesh_get_attribute_values(this._attribute, srcFormatSize, this._offset + index * this._stride, this._stride, destFormatSize, dest.byteOffset, destSize);\n        for (let i = 0; i < out.length; ++i)\n            out[i] = dest[i];\n        return out;\n    }\n    /**\n     * Set attribute element.\n     *\n     * @param i Index\n     * @param v Value to set the element to\n     *\n     * `v.length` needs to be a multiple of the attributes component count, see\n     * {@link MeshAttribute}. If `v.length` is more than one multiple, it will be\n     * filled with the next n attribute elements, which can reduce overhead\n     * of this call.\n     *\n     * @returns Reference to self (for method chaining)\n     */\n    set(i, v) {\n        if (v.length % this._componentCount !== 0)\n            throw new Error(`out.length, ${v.length} is not a multiple of the attribute vector components, ${this._componentCount}`);\n        const elementSize = this._bufferType.BYTES_PER_ELEMENT;\n        const srcSize = elementSize * v.length;\n        const srcFormatSize = this._componentCount * elementSize * this._arraySize;\n        const destFormatSize = this._formatSize * this._arraySize;\n        const wasm = this._engine.wasm;\n        /* Unless we are already working with data from WASM heap, we\n         * need to copy into temporary memory. */\n        if (v.buffer != wasm.HEAPU8.buffer) {\n            const dest = this._tempBufferGetter(v.length);\n            dest.set(v);\n            v = dest;\n        }\n        wasm._wl_mesh_set_attribute_values(this._attribute, srcFormatSize, v.byteOffset, srcSize, destFormatSize, this._offset + i * this._stride, this._stride);\n        return this;\n    }\n}\n/**\n * Wrapper around a native material.\n *\n * Each material instance will have properties associated to the pipeline it uses.\n * The material properties are automatically added to each material instance, example:\n *\n * ```js\n * const material = mesh.material; // Material with a `Phong Opaque Textured` pipeline\n * // You can access all the material properties from the editor using:\n * material.diffuseTexture = null;\n * material.diffuseColor = [1.0, 0.0, 0.0, 1.0];\n * ```\n */\nexport class Material {\n    /**\n     * Index of this material in the manager.\n     *\n     * @hidden\n     */\n    _index;\n    /**\n     * Material definition index in the scene.\n     *\n     * @hidden\n     */\n    _definition;\n    /** Wonderland Engine instance. @hidden */\n    _engine;\n    /**\n     * Create a new Material.\n     *\n     * @note Creating material is expensive. Please use {@link Material#clone} to clone a material.\n     * @note Do not use this constructor directly with an index, this is reserved for internal purposes.\n     */\n    constructor(engine, params) {\n        this._engine = engine;\n        if (typeof params !== 'number') {\n            if (!params?.pipeline)\n                throw new Error(\"Missing parameter 'pipeline'\");\n            const wasm = this._engine.wasm;\n            const pipeline = params.pipeline;\n            this._index = wasm._wl_material_create(wasm.tempUTF8(pipeline));\n            if (this._index < 0)\n                throw new Error(`No such pipeline '${pipeline}'`);\n        }\n        else {\n            this._index = params;\n        }\n        this._definition = this._engine.wasm._wl_material_get_definition(this._index);\n        if (!this._engine.wasm._materialDefinitions[this._definition])\n            throw new Error(`Material Definition ${this._definition} not found for material with index ${this._index}`);\n        return new Proxy(this, {\n            get(target, prop) {\n                const wasm = engine.wasm;\n                const definition = wasm._materialDefinitions[target._definition];\n                const param = definition.get(prop);\n                if (!param)\n                    return target[prop];\n                if (wasm._wl_material_get_param_value(target._index, param.index, wasm._tempMem)) {\n                    const type = param.type;\n                    switch (type.type) {\n                        case MaterialParamType.UnsignedInt:\n                            return type.componentCount == 1\n                                ? wasm._tempMemUint32[0]\n                                : new Uint32Array(wasm.HEAPU32.buffer, wasm._tempMem, type.componentCount);\n                        case MaterialParamType.Int:\n                            return type.componentCount == 1\n                                ? wasm._tempMemInt[0]\n                                : new Int32Array(wasm.HEAP32.buffer, wasm._tempMem, type.componentCount);\n                        case MaterialParamType.Float:\n                            return type.componentCount == 1\n                                ? wasm._tempMemFloat[0]\n                                : new Float32Array(wasm.HEAPF32.buffer, wasm._tempMem, type.componentCount);\n                        case MaterialParamType.Sampler:\n                            return engine.textures.wrap(wasm._tempMemInt[0]);\n                        default:\n                            throw new Error(`Invalid type ${type.type} on parameter ${param.index} for material ${target._index}`);\n                    }\n                }\n            },\n            set(target, prop, value) {\n                const wasm = engine.wasm;\n                const definition = wasm._materialDefinitions[target._definition];\n                const param = definition.get(prop);\n                if (!param) {\n                    target[prop] = value;\n                    return true;\n                }\n                const type = param.type;\n                switch (type.type) {\n                    case MaterialParamType.UnsignedInt:\n                    case MaterialParamType.Int:\n                    case MaterialParamType.Sampler:\n                        const v = value.id ?? value;\n                        wasm._wl_material_set_param_value_uint(target._index, param.index, v);\n                        break;\n                    case MaterialParamType.Float:\n                        let count = 1;\n                        if (typeof value === 'number') {\n                            wasm._tempMemFloat[0] = value;\n                        }\n                        else {\n                            count = value.length;\n                            for (let i = 0; i < count; ++i)\n                                wasm._tempMemFloat[i] = value[i];\n                        }\n                        wasm._wl_material_set_param_value_float(target._index, param.index, wasm._tempMem, count);\n                        break;\n                    case MaterialParamType.Font:\n                        throw new Error('Setting font properties is currently unsupported.');\n                }\n                return true;\n            },\n        });\n    }\n    /** @deprecated Use {@link #pipeline} instead. */\n    get shader() {\n        return this.pipeline;\n    }\n    /** Name of the pipeline used by this material. */\n    get pipeline() {\n        const wasm = this._engine.wasm;\n        return wasm.UTF8ToString(wasm._wl_material_get_pipeline(this._index));\n    }\n    /** Hosting engine instance. */\n    get engine() {\n        return this._engine;\n    }\n    /**\n     * Create a copy of the underlying native material.\n     *\n     * @returns Material clone.\n     */\n    clone() {\n        const id = this._engine.wasm._wl_material_clone(this._index);\n        return id > 0 ? new Material(this._engine, id) : null;\n    }\n    /**\n     * Checks equality by comparing whether the wrapped native material ids are\n     * equal.\n     *\n     * @param otherMaterial Material to check equality with.\n     * @returns Whether this material equals the given material.\n     *\n     * @since 1.0.0\n     */\n    equals(otherMaterial) {\n        if (!otherMaterial)\n            return false;\n        return this._index === otherMaterial._index;\n    }\n    /**\n     * Wrap a native material index.\n     *\n     * @param engine Engine instance.\n     * @param index The index.\n     * @returns Material instance or `null` if index <= 0.\n     *\n     * @deprecated Please use `new Material()` instead.\n     */\n    static wrap(engine, index) {\n        /** @todo: this propagate nullable in the entire codebase. Remove. */\n        return index > 0 ? new Material(engine, index) : null;\n    }\n}\n/** Temporary canvas */\nlet temp2d = null;\n/**\n * Wrapper around a native texture data.\n */\nexport class Texture {\n    /** Wonderland Engine instance. @hidden */\n    _engine;\n    /** Index in the manager. @hidden */\n    _id = 0;\n    /** HTML image index. @hidden */\n    _imageIndex = null;\n    /**\n     * @param engine The engine instance\n     * @param param HTML media element to create texture from or texture id to wrap.\n     */\n    constructor(engine, param) {\n        this._engine = engine ?? WL;\n        const wasm = engine.wasm;\n        if (param instanceof HTMLImageElement ||\n            param instanceof HTMLVideoElement ||\n            param instanceof HTMLCanvasElement) {\n            const index = wasm._images.length;\n            wasm._images.push(param);\n            this._imageIndex = index;\n            /** @todo: For 1.2.0, images referenced here should be per-scene, i.e., based\n             * on the main scene images. */\n            this._id = this._engine.wasm._wl_renderer_addImage(index);\n        }\n        else {\n            this._id = param;\n        }\n        this._engine.textures._set(this);\n    }\n    /** Whether this texture is valid. */\n    get valid() {\n        return this._id >= 0;\n    }\n    /** Index in this manager. */\n    get id() {\n        return this._id;\n    }\n    /** Update the texture to match the HTML element (e.g. reflect the current frame of a video). */\n    update() {\n        if (!this.valid || this._imageIndex === null)\n            return;\n        this._engine.wasm._wl_renderer_updateImage(this._id, this._imageIndex);\n    }\n    /** Width of the texture. */\n    get width() {\n        return this._engine.wasm._wl_texture_width(this._id);\n    }\n    /** Height of the texture. */\n    get height() {\n        return this._engine.wasm._wl_texture_height(this._id);\n    }\n    /** Hosting engine instance. */\n    get engine() {\n        return this._engine;\n    }\n    /**\n     * Update a subrange on the texture to match the HTML element (e.g. reflect the current frame of a video).\n     *\n     * Usage:\n     *\n     * ```js\n     * // Copies rectangle of pixel starting from (10, 20)\n     * texture.updateSubImage(10, 20, 600, 400);\n     * ```\n     *\n     * @param x x offset\n     * @param y y offset\n     * @param w width\n     * @param h height\n     */\n    updateSubImage(x, y, w, h) {\n        if (!this.valid || this._imageIndex === null)\n            return;\n        /* Lazy initialize temp canvas */\n        if (!temp2d) {\n            const canvas = document.createElement('canvas');\n            const ctx = canvas.getContext('2d');\n            if (!ctx) {\n                throw new Error('Texture.updateSubImage(): Failed to obtain CanvasRenderingContext2D.');\n            }\n            temp2d = {\n                canvas,\n                ctx,\n            };\n        }\n        const wasm = this._engine.wasm;\n        const img = wasm._images[this._imageIndex];\n        if (!img)\n            return;\n        temp2d.canvas.width = w;\n        temp2d.canvas.height = h;\n        temp2d.ctx.drawImage(img, x, y, w, h, 0, 0, w, h);\n        const yOffset = (img.videoHeight ?? img.height) - y - h;\n        wasm._images[this._imageIndex] = temp2d.canvas;\n        wasm._wl_renderer_updateImage(this._id, this._imageIndex, x, yOffset);\n        wasm._images[this._imageIndex] = img;\n    }\n    /**\n     * Destroy and free the texture's texture altas space and memory.\n     *\n     * It is best practice to set the texture variable to `null` after calling\n     * destroy to prevent accidental use of the invalid texture:\n     *\n     * ```js\n     *   texture.destroy();\n     *   texture = null;\n     * ```\n     *\n     * @since 0.9.0\n     */\n    destroy() {\n        this.engine._destroyTexture(this);\n        this._id = -1;\n        this._imageIndex = null;\n    }\n    /**\n     * Checks equality by comparing whether the wrapped native texture ids are\n     * equal.\n     *\n     * @param otherTexture Texture to check equality with.\n     * @returns Whether this texture equals the given texture.\n     *\n     * @since 1.0.0\n     */\n    equals(otherTexture) {\n        if (!otherTexture)\n            return false;\n        return this._id === otherTexture._id;\n    }\n}\n/**\n * Wrapper around a native animation.\n */\nexport class Animation {\n    /** Index of the mesh in the manager. @hidden */\n    _index;\n    /** Wonderland Engine instance. @hidden */\n    _engine;\n    /**\n     * @param index Index in the manager\n     */\n    constructor(engine = WL, index) {\n        this._engine = engine;\n        this._index = index;\n    }\n    /** Duration of this animation. */\n    get duration() {\n        return this._engine.wasm._wl_animation_get_duration(this._index);\n    }\n    /** Number of tracks in this animation. */\n    get trackCount() {\n        return this._engine.wasm._wl_animation_get_trackCount(this._index);\n    }\n    /**\n     * Clone this animation retargeted to a new set of objects.\n     *\n     * The clone shares most of the data with the original and is therefore\n     * light-weight.\n     *\n     * **Experimental:** This API might change in upcoming versions.\n     *\n     * If retargeting to {@link Skin}, the join names will be used to determine a mapping\n     * from the previous skin to the new skin. The source skin will be retrieved from\n     * the first track in the animation that targets a joint.\n     *\n     * @param newTargets New targets per track. Expected to have\n     *      {@link Animation#trackCount} elements or to be a {@link Skin}.\n     * @returns The retargeted clone of this animation.\n     */\n    retarget(newTargets) {\n        const wasm = this._engine.wasm;\n        if (newTargets instanceof Skin) {\n            const animId = wasm._wl_animation_retargetToSkin(this._index, newTargets._index);\n            return new Animation(this._engine, animId);\n        }\n        if (newTargets.length != this.trackCount) {\n            throw Error('Expected ' +\n                this.trackCount.toString() +\n                ' targets, but got ' +\n                newTargets.length.toString());\n        }\n        const ptr = wasm._malloc(2 * newTargets.length);\n        for (let i = 0; i < newTargets.length; ++i) {\n            wasm.HEAPU16[ptr >> (1 + i)] = newTargets[i].objectId;\n        }\n        const animId = wasm._wl_animation_retarget(this._index, ptr);\n        wasm._free(ptr);\n        return new Animation(this._engine, animId);\n    }\n    /**\n     * Checks equality by comparing whether the wrapped native animation ids\n     * are equal.\n     *\n     * @param otherAnimation Animation to check equality with.\n     * @returns Whether this animation equals the given animation.\n     *\n     * @since 1.0.0\n     */\n    equals(otherAnimation) {\n        if (!otherAnimation)\n            return false;\n        return this._index === otherAnimation._index;\n    }\n}\n/**\n * Scene graph object.\n *\n * Node in the scene graph or \"entity\". Consists of transformation and a reference\n * to its parent object. Usually holds components and is accessible by components\n * through {@link Component#object}.\n *\n * Objects are stored in a data oriented manner inside WebAssembly memory. This class\n * is a JavaScript API wrapper around this memory for more convenient use in\n * components.\n *\n * Objects can be created and added to a scene through\n * {@link Scene#addObject} on the {@link WonderlandEngine.scene}.\n */\nexport class Object3D {\n    /**\n     * Object index in the manager.\n     *\n     * @hidden\n     */\n    _objectId = -1;\n    /** Wonderland Engine instance. @hidden */\n    _engine;\n    /**\n     * @param o Object id to wrap\n     *\n     * For performance reasons, please use {@link WonderlandEngine.wrapObject}\n     */\n    constructor(engine, o) {\n        this._objectId = o;\n        this._engine = engine;\n    }\n    /**\n     * Name of the object.\n     *\n     * Useful for identifying objects during debugging.\n     */\n    get name() {\n        const wasm = this._engine.wasm;\n        return wasm.UTF8ToString(wasm._wl_object_name(this.objectId));\n    }\n    /**\n     * Set the object's name.\n     *\n     * @param newName The new name to set.\n     */\n    set name(newName) {\n        const wasm = this._engine.wasm;\n        wasm._wl_object_set_name(this.objectId, wasm.tempUTF8(newName));\n    }\n    /**\n     * Parent of this object or `null` if parented to root.\n     */\n    get parent() {\n        const p = this._engine.wasm._wl_object_parent(this.objectId);\n        return p === 0 ? null : this._engine.wrapObject(p);\n    }\n    /**\n     * Children of this object.\n     *\n     * @note Child order is **undefined**. No assumptions should be made\n     * about the index of a specific object.\n     *\n     * If you need to access a specific child of this object, you can\n     * use {@link Object3D.findByName}.\n     *\n     * When the object exists in the scene at editor time, prefer passing it as\n     * a component property.\n     */\n    get children() {\n        const childrenCount = this._engine.wasm._wl_object_get_children_count(this.objectId);\n        if (childrenCount === 0)\n            return [];\n        const wasm = this._engine.wasm;\n        wasm.requireTempMem(childrenCount * 2);\n        this._engine.wasm._wl_object_get_children(this.objectId, wasm._tempMem, wasm._tempMemSize >> 1);\n        const children = new Array(childrenCount);\n        for (let i = 0; i < childrenCount; ++i) {\n            children[i] = this._engine.wrapObject(wasm._tempMemUint16[i]);\n        }\n        return children;\n    }\n    /**\n     * Reparent object to given object.\n     *\n     * @note Reparenting is not trivial and might have a noticeable performance impact.\n     *\n     * @param newParent New parent or `null` to parent to root\n     */\n    set parent(newParent) {\n        this._engine.wasm._wl_object_set_parent(this.objectId, newParent == null ? 0 : newParent.objectId);\n    }\n    /** Object index in the manager. */\n    get objectId() {\n        return this._objectId;\n    }\n    /** Hosting engine instance. */\n    get engine() {\n        return this._engine;\n    }\n    /**\n     * Clone this hierarchy into a new one.\n     *\n     * Cloning copies the hierarchy structure, object names,\n     * as well as components.\n     *\n     * JavaScript components are cloned using {@link Component.copy}. You can\n     * override this method in your components.\n     *\n     * @param parent The parent for the cloned hierarchy or `null` to clone\n     *     into the scene root. Defaults to `null`.\n     *\n     * @returns The clone of this object.\n     */\n    clone(parent = null) {\n        const engine = this._engine;\n        const id = engine.wasm._wl_object_clone(this._objectId, parent ? parent._objectId : 0);\n        return engine.wrapObject(id);\n    }\n    /**\n     * Reset local transformation (translation, rotation and scaling) to identity.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    resetTransform() {\n        this._engine.wasm._wl_object_reset_translation_rotation(this.objectId);\n        this._engine.wasm._wl_object_reset_scaling(this.objectId);\n        return this;\n    }\n    /**\n     * Reset local position and rotation to identity.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    resetPositionRotation() {\n        this._engine.wasm._wl_object_reset_translation_rotation(this.objectId);\n        return this;\n    }\n    /** @deprecated Please use {@link Object3D.resetPositionRotation} instead. */\n    resetTranslationRotation() {\n        return this.resetPositionRotation();\n    }\n    /**\n     * Reset local rotation, keep translation.\n     *\n     * @note To reset both rotation and translation, prefer\n     *       {@link resetTranslationRotation}.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    resetRotation() {\n        this._engine.wasm._wl_object_reset_rotation(this.objectId);\n        return this;\n    }\n    /**\n     * Reset local translation, keep rotation.\n     *\n     * @note To reset both rotation and translation, prefer\n     *       {@link resetTranslationRotation}.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    resetPosition() {\n        this._engine.wasm._wl_object_reset_translation(this.objectId);\n        return this;\n    }\n    /** @deprecated Please use {@link Object3D.resetPosition} instead. */\n    resetTranslation() {\n        return this.resetPosition();\n    }\n    /**\n     * Reset local scaling to identity (``[1.0, 1.0, 1.0]``).\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    resetScaling() {\n        this._engine.wasm._wl_object_reset_scaling(this.objectId);\n        return this;\n    }\n    /** @deprecated Please use {@link Object3D.translateLocal} instead. */\n    translate(v) {\n        return this.translateLocal(v);\n    }\n    /**\n     * Translate object by a vector in the parent's space.\n     *\n     * @param v Vector to translate by.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    translateLocal(v) {\n        this._engine.wasm._wl_object_translate(this.objectId, v[0], v[1], v[2]);\n        return this;\n    }\n    /**\n     * Translate object by a vector in object space.\n     *\n     * @param v Vector to translate by.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    translateObject(v) {\n        this._engine.wasm._wl_object_translate_obj(this.objectId, v[0], v[1], v[2]);\n        return this;\n    }\n    /**\n     * Translate object by a vector in world space.\n     *\n     * @param v Vector to translate by.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    translateWorld(v) {\n        this._engine.wasm._wl_object_translate_world(this.objectId, v[0], v[1], v[2]);\n        return this;\n    }\n    /** @deprecated Please use {@link Object3D.rotateAxisAngleDegLocal} instead. */\n    rotateAxisAngleDeg(a, d) {\n        this.rotateAxisAngleDegLocal(a, d);\n        return this;\n    }\n    /**\n     * Rotate around given axis by given angle (degrees) in local space.\n     *\n     * @param a Vector representing the rotation axis.\n     * @param d Angle in degrees.\n     *\n     * @note If the object is translated the rotation will be around\n     *     the parent. To rotate around the object origin, use\n     *     {@link rotateAxisAngleDegObject}\n     *\n     * @see {@link rotateAxisAngleRad}\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    rotateAxisAngleDegLocal(a, d) {\n        this._engine.wasm._wl_object_rotate_axis_angle(this.objectId, a[0], a[1], a[2], d);\n        return this;\n    }\n    /** @deprecated Please use {@link Object3D.rotateAxisAngleRadLocal} instead. */\n    rotateAxisAngleRad(a, d) {\n        return this.rotateAxisAngleRadLocal(a, d);\n    }\n    /**\n     * Rotate around given axis by given angle (radians) in local space.\n     *\n     * @param a Vector representing the rotation axis.\n     * @param d Angle in radians.\n     *\n     * @note If the object is translated the rotation will be around\n     *     the parent. To rotate around the object origin, use\n     *     {@link rotateAxisAngleDegObject}\n     *\n     * @see {@link rotateAxisAngleDeg}\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    rotateAxisAngleRadLocal(a, d) {\n        this._engine.wasm._wl_object_rotate_axis_angle_rad(this.objectId, a[0], a[1], a[2], d);\n        return this;\n    }\n    /**\n     * Rotate around given axis by given angle (degrees) in object space.\n     *\n     * @param a Vector representing the rotation axis.\n     * @param d Angle in degrees.\n     *\n     * Equivalent to prepending a rotation quaternion to the object's\n     * local transformation.\n     *\n     * @see {@link rotateAxisAngleRadObject}\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    rotateAxisAngleDegObject(a, d) {\n        this._engine.wasm._wl_object_rotate_axis_angle_obj(this.objectId, a[0], a[1], a[2], d);\n        return this;\n    }\n    /**\n     * Rotate around given axis by given angle (radians) in object space\n     * Equivalent to prepending a rotation quaternion to the object's\n     * local transformation.\n     *\n     * @param a Vector representing the rotation axis\n     * @param d Angle in degrees\n     *\n     * @see {@link rotateAxisAngleDegObject}\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    rotateAxisAngleRadObject(a, d) {\n        this._engine.wasm._wl_object_rotate_axis_angle_rad_obj(this.objectId, a[0], a[1], a[2], d);\n        return this;\n    }\n    /** @deprecated Please use {@link Object3D.rotateLocal} instead. */\n    rotate(q) {\n        this.rotateLocal(q);\n        return this;\n    }\n    /**\n     * Rotate by a quaternion.\n     *\n     * @param q the Quaternion to rotate by.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    rotateLocal(q) {\n        this._engine.wasm._wl_object_rotate_quat(this.objectId, q[0], q[1], q[2], q[3]);\n        return this;\n    }\n    /**\n     * Rotate by a quaternion in object space.\n     *\n     * Equivalent to prepending a rotation quaternion to the object's\n     * local transformation.\n     *\n     * @param q the Quaternion to rotate by.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    rotateObject(q) {\n        this._engine.wasm._wl_object_rotate_quat_obj(this.objectId, q[0], q[1], q[2], q[3]);\n        return this;\n    }\n    /** @deprecated Please use {@link Object3D.scaleLocal} instead. */\n    scale(v) {\n        this.scaleLocal(v);\n        return this;\n    }\n    /**\n     * Scale object by a vector in object space.\n     *\n     * @param v Vector to scale by.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    scaleLocal(v) {\n        this._engine.wasm._wl_object_scale(this.objectId, v[0], v[1], v[2]);\n        return this;\n    }\n    getPositionLocal(out = new Float32Array(3)) {\n        const wasm = this._engine.wasm;\n        /* Translation is different than rotation & scaling.\n         * We can't simply read the memory. */\n        wasm._wl_object_get_translation_local(this.objectId, wasm._tempMem);\n        out[0] = wasm._tempMemFloat[0];\n        out[1] = wasm._tempMemFloat[1];\n        out[2] = wasm._tempMemFloat[2];\n        return out;\n    }\n    getTranslationLocal(out = new Float32Array(3)) {\n        return this.getPositionLocal(out);\n    }\n    getPositionWorld(out = new Float32Array(3)) {\n        const wasm = this._engine.wasm;\n        /* Translation is different than rotation & scaling.\n         * We can't simply read the memory. */\n        wasm._wl_object_get_translation_world(this.objectId, wasm._tempMem);\n        out[0] = wasm._tempMemFloat[0];\n        out[1] = wasm._tempMemFloat[1];\n        out[2] = wasm._tempMemFloat[2];\n        return out;\n    }\n    getTranslationWorld(out = new Float32Array(3)) {\n        return this.getPositionWorld(out);\n    }\n    /**\n     * Set local / object space position.\n     *\n     * Concatenates a new translation dual quaternion onto the existing rotation.\n     *\n     * @param v New local position array/vector, expected to have at least 3 elements.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    setPositionLocal(v) {\n        this._engine.wasm._wl_object_set_translation_local(this.objectId, v[0], v[1], v[2]);\n        return this;\n    }\n    /** @deprecated Please use {@link Object3D.setPositionLocal} instead. */\n    setTranslationLocal(v) {\n        return this.setPositionLocal(v);\n    }\n    /**\n     * Set world space position.\n     *\n     * Applies the inverse parent transform with a new translation dual quaternion\n     * which is concatenated onto the existing rotation.\n     *\n     * @param v New world position array/vector, expected to have at least 3 elements.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    setPositionWorld(v) {\n        this._engine.wasm._wl_object_set_translation_world(this.objectId, v[0], v[1], v[2]);\n        return this;\n    }\n    /** @deprecated Please use {@link Object3D.setPositionWorld} instead. */\n    setTranslationWorld(v) {\n        return this.setPositionWorld(v);\n    }\n    getScalingLocal(out = new Float32Array(3)) {\n        const wasm = this._engine.wasm;\n        const ptr = wasm._wl_object_scaling_local(this.objectId) / 4; /* Align F32 */\n        out[0] = wasm.HEAPF32[ptr];\n        out[1] = wasm.HEAPF32[ptr + 1];\n        out[2] = wasm.HEAPF32[ptr + 2];\n        return out;\n    }\n    /**\n     * Set local / object space scaling.\n     *\n     * @param v New local scaling array/vector, expected to have at least 3 elements.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    setScalingLocal(v) {\n        this._engine.wasm._wl_object_set_scaling_local(this.objectId, v[0], v[1], v[2]);\n        return this;\n    }\n    getScalingWorld(out = new Float32Array(3)) {\n        const wasm = this._engine.wasm;\n        const ptr = wasm._wl_object_scaling_world(this.objectId) / 4; /* Align F32 */\n        out[0] = wasm.HEAPF32[ptr];\n        out[1] = wasm.HEAPF32[ptr + 1];\n        out[2] = wasm.HEAPF32[ptr + 2];\n        return out;\n    }\n    /**\n     * Set World space scaling.\n     *\n     * @param v New world scaling array/vector, expected to have at least 3 elements.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    setScalingWorld(v) {\n        this._engine.wasm._wl_object_set_scaling_world(this.objectId, v[0], v[1], v[2]);\n        return this;\n    }\n    getRotationLocal(out = new Float32Array(4)) {\n        const wasm = this._engine.wasm;\n        const ptr = wasm._wl_object_trans_local(this.objectId) / 4; /* Align F32 */\n        /* The first 4 floats represent the rotation quaternion. */\n        out[0] = wasm.HEAPF32[ptr];\n        out[1] = wasm.HEAPF32[ptr + 1];\n        out[2] = wasm.HEAPF32[ptr + 2];\n        out[3] = wasm.HEAPF32[ptr + 3];\n        return out;\n    }\n    /**\n     * Set local space rotation.\n     *\n     * @param v New world rotation array/vector, expected to have at least 4 elements.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    setRotationLocal(v) {\n        this._engine.wasm._wl_object_set_rotation_local(this.objectId, v[0], v[1], v[2], v[3]);\n        return this;\n    }\n    getRotationWorld(out = new Float32Array(4)) {\n        const wasm = this._engine.wasm;\n        const ptr = wasm._wl_object_trans_world(this.objectId) / 4; /* Align F32 */\n        /* The first 4 floats represent the rotation quaternion. */\n        out[0] = wasm.HEAPF32[ptr];\n        out[1] = wasm.HEAPF32[ptr + 1];\n        out[2] = wasm.HEAPF32[ptr + 2];\n        out[3] = wasm.HEAPF32[ptr + 3];\n        return out;\n    }\n    /**\n     * Set local space rotation.\n     *\n     * @param v New world rotation array/vector, expected to have at least 4 elements.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    setRotationWorld(v) {\n        this._engine.wasm._wl_object_set_rotation_world(this.objectId, v[0], v[1], v[2], v[3]);\n        return this;\n    }\n    getTransformLocal(out = new Float32Array(8)) {\n        const wasm = this._engine.wasm;\n        const ptr = wasm._wl_object_trans_local(this.objectId) / 4; /* Align F32 */\n        out[0] = wasm.HEAPF32[ptr];\n        out[1] = wasm.HEAPF32[ptr + 1];\n        out[2] = wasm.HEAPF32[ptr + 2];\n        out[3] = wasm.HEAPF32[ptr + 3];\n        out[4] = wasm.HEAPF32[ptr + 4];\n        out[5] = wasm.HEAPF32[ptr + 5];\n        out[6] = wasm.HEAPF32[ptr + 6];\n        out[7] = wasm.HEAPF32[ptr + 7];\n        return out;\n    }\n    /**\n     * Set local space rotation.\n     *\n     * @param v New local transform array, expected to have at least 8 elements.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    setTransformLocal(v) {\n        const wasm = this._engine.wasm;\n        const ptr = wasm._wl_object_trans_local(this.objectId) / 4; /* Align F32 */\n        wasm.HEAPF32[ptr] = v[0];\n        wasm.HEAPF32[ptr + 1] = v[1];\n        wasm.HEAPF32[ptr + 2] = v[2];\n        wasm.HEAPF32[ptr + 3] = v[3];\n        wasm.HEAPF32[ptr + 4] = v[4];\n        wasm.HEAPF32[ptr + 5] = v[5];\n        wasm.HEAPF32[ptr + 6] = v[6];\n        wasm.HEAPF32[ptr + 7] = v[7];\n        this.setDirty();\n        return this;\n    }\n    getTransformWorld(out = new Float32Array(8)) {\n        const wasm = this._engine.wasm;\n        const ptr = wasm._wl_object_trans_world(this.objectId) / 4; /* Align F32 */\n        out[0] = wasm.HEAPF32[ptr];\n        out[1] = wasm.HEAPF32[ptr + 1];\n        out[2] = wasm.HEAPF32[ptr + 2];\n        out[3] = wasm.HEAPF32[ptr + 3];\n        out[4] = wasm.HEAPF32[ptr + 4];\n        out[5] = wasm.HEAPF32[ptr + 5];\n        out[6] = wasm.HEAPF32[ptr + 6];\n        out[7] = wasm.HEAPF32[ptr + 7];\n        return out;\n    }\n    /**\n     * Set world space rotation.\n     *\n     * @param v New world transform array, expected to have at least 8 elements.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    setTransformWorld(v) {\n        const wasm = this._engine.wasm;\n        const ptr = wasm._wl_object_trans_world(this.objectId) / 4; /* Align F32 */\n        wasm.HEAPF32[ptr] = v[0];\n        wasm.HEAPF32[ptr + 1] = v[1];\n        wasm.HEAPF32[ptr + 2] = v[2];\n        wasm.HEAPF32[ptr + 3] = v[3];\n        wasm.HEAPF32[ptr + 4] = v[4];\n        wasm.HEAPF32[ptr + 5] = v[5];\n        wasm.HEAPF32[ptr + 6] = v[6];\n        wasm.HEAPF32[ptr + 7] = v[7];\n        this._engine.wasm._wl_object_trans_world_to_local(this.objectId);\n        return this;\n    }\n    /**\n     * Local space transformation.\n     *\n     * @deprecated Please use {@link Object3D.setTransformLocal} and\n     * {@link Object3D.getTransformLocal} instead.\n     */\n    get transformLocal() {\n        const wasm = this._engine.wasm;\n        return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_object_trans_local(this.objectId), 8);\n    }\n    /**\n     * Set local transform.\n     *\n     * @param t Local space transformation.\n     *\n     * @since 0.8.5\n     *\n     * @deprecated Please use {@link Object3D.setTransformLocal} and\n     * {@link Object3D.getTransformLocal} instead.\n     */\n    set transformLocal(t) {\n        this.transformLocal.set(t);\n        this.setDirty();\n    }\n    /**\n     * Global / world space transformation.\n     *\n     * May recompute transformations of the hierarchy of this object,\n     * if they were changed by JavaScript components this frame.\n     *\n     * @deprecated Please use {@link Object3D.setTransformWorld} and\n     * {@link Object3D.getTransformWorld} instead.\n     */\n    get transformWorld() {\n        const wasm = this._engine.wasm;\n        return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_object_trans_world(this.objectId), 8);\n    }\n    /**\n     * Set world transform.\n     *\n     * @param t Global / world space transformation.\n     *\n     * @since 0.8.5\n     *\n     * @deprecated Please use {@link Object3D.setTransformWorld} and\n     * {@link Object3D.getTransformWorld} instead.\n     */\n    set transformWorld(t) {\n        this.transformWorld.set(t);\n        this._engine.wasm._wl_object_trans_world_to_local(this.objectId);\n    }\n    /**\n     * Local / object space scaling.\n     *\n     * @deprecated Please use {@link Object3D.setScalingLocal} and\n     * {@link Object3D.getScalingLocal} instead.\n     */\n    get scalingLocal() {\n        const wasm = this._engine.wasm;\n        return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_object_scaling_local(this.objectId), 3);\n    }\n    /**\n     * Set local space scaling.\n     *\n     * @param s Local space scaling.\n     *\n     * @since 0.8.7\n     *\n     * @deprecated Please use {@link Object3D.setScalingLocal} and\n     * {@link Object3D.getScalingLocal} instead.\n     */\n    set scalingLocal(s) {\n        this.scalingLocal.set(s);\n        this.setDirty();\n    }\n    /**\n     * Global / world space scaling.\n     *\n     * May recompute transformations of the hierarchy of this object,\n     * if they were changed by JavaScript components this frame.\n     *\n     * @deprecated Please use {@link Object3D.setScalingWorld} and\n     * {@link Object3D.getScalingWorld} instead.\n     */\n    get scalingWorld() {\n        const wasm = this._engine.wasm;\n        return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_object_scaling_world(this.objectId), 3);\n    }\n    /**\n     * Set world space scaling.\n     *\n     * @param t World space scaling.\n     *\n     * @since 0.8.7\n     *\n     * @deprecated Please use {@link Object3D.setScalingWorld} and\n     * {@link Object3D.getScalingWorld} instead.\n     */\n    set scalingWorld(s) {\n        this.scalingWorld.set(s);\n        this._engine.wasm._wl_object_scaling_world_to_local(this.objectId);\n    }\n    /**\n     * Local space rotation.\n     *\n     * @since 0.8.7\n     *\n     * @deprecated Please use {@link Object3D.getRotationLocal} and\n     * {@link Object3D.setRotationLocal} instead.\n     */\n    get rotationLocal() {\n        return this.transformLocal.subarray(0, 4);\n    }\n    /**\n     * Global / world space rotation\n     *\n     * @since 0.8.7\n     *\n     * @deprecated Please use {@link Object3D.getRotationWorld} and\n     * {@link Object3D.setRotationWorld} instead.\n     */\n    get rotationWorld() {\n        return this.transformWorld.subarray(0, 4);\n    }\n    /**\n     * Set local space rotation.\n     *\n     * @param r Local space rotation\n     *\n     * @since 0.8.7\n     *\n     * @deprecated Please use {@link Object3D.getRotationLocal} and\n     * {@link Object3D.setRotationLocal} instead.\n     */\n    set rotationLocal(r) {\n        this._engine.wasm._wl_object_set_rotation_local(this.objectId, r[0], r[1], r[2], r[3]);\n    }\n    /**\n     * Set world space rotation.\n     *\n     * @param r Global / world space rotation.\n     *\n     * @since 0.8.7\n     *\n     * @deprecated Please use {@link Object3D.getRotationWorld} and\n     * {@link Object3D.setRotationWorld} instead.\n     */\n    set rotationWorld(r) {\n        this._engine.wasm._wl_object_set_rotation_world(this.objectId, r[0], r[1], r[2], r[3]);\n    }\n    /** @deprecated Please use {@link Object3D.getForwardWorld} instead. */\n    getForward(out) {\n        return this.getForwardWorld(out);\n    }\n    /**\n     * Compute the object's forward facing world space vector.\n     *\n     * The forward vector in object space is along the negative z-axis, i.e.,\n     * `[0, 0, -1]`.\n     *\n     * @param out Destination array/vector, expected to have at least 3 elements.\n     * @return The `out` parameter.\n     */\n    getForwardWorld(out) {\n        out[0] = 0;\n        out[1] = 0;\n        out[2] = -1;\n        this.transformVectorWorld(out);\n        return out;\n    }\n    /** @deprecated Please use {@link Object3D.getUpWorld} instead. */\n    getUp(out) {\n        return this.getUpWorld(out);\n    }\n    /**\n     * Compute the object's up facing world space vector.\n     *\n     * @param out Destination array/vector, expected to have at least 3 elements.\n     * @return The `out` parameter.\n     */\n    getUpWorld(out) {\n        out[0] = 0;\n        out[1] = 1;\n        out[2] = 0;\n        this.transformVectorWorld(out);\n        return out;\n    }\n    /** @deprecated Please use {@link Object3D.getRightWorld} instead. */\n    getRight(out) {\n        return this.getRightWorld(out);\n    }\n    /**\n     * Compute the object's right facing world space vector.\n     *\n     * @param out Destination array/vector, expected to have at least 3 elements.\n     * @return The `out` parameter.\n     */\n    getRightWorld(out) {\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        this.transformVectorWorld(out);\n        return out;\n    }\n    /**\n     * Transform a vector by this object's world transform.\n     *\n     * @param out Out vector\n     * @param v Vector to transform, default `out`\n     * @return The `out` parameter.\n     *\n     * @since 0.8.7\n     */\n    transformVectorWorld(out, v = out) {\n        const wasm = this._engine.wasm;\n        wasm._tempMemFloat[0] = v[0];\n        wasm._tempMemFloat[1] = v[1];\n        wasm._tempMemFloat[2] = v[2];\n        wasm._wl_object_transformVectorWorld(this.objectId, wasm._tempMem);\n        out[0] = wasm._tempMemFloat[0];\n        out[1] = wasm._tempMemFloat[1];\n        out[2] = wasm._tempMemFloat[2];\n        return out;\n    }\n    /**\n     * Transform a vector by this object's local transform.\n     *\n     * @param out Out vector\n     * @param v Vector to transform, default `out`\n     * @return The `out` parameter.\n     *\n     * @since 0.8.7\n     */\n    transformVectorLocal(out, v = out) {\n        const wasm = this._engine.wasm;\n        wasm._tempMemFloat[0] = v[0];\n        wasm._tempMemFloat[1] = v[1];\n        wasm._tempMemFloat[2] = v[2];\n        wasm._wl_object_transformVectorLocal(this.objectId, wasm._tempMem);\n        out[0] = wasm._tempMemFloat[0];\n        out[1] = wasm._tempMemFloat[1];\n        out[2] = wasm._tempMemFloat[2];\n        return out;\n    }\n    /**\n     * Transform a point by this object's world transform.\n     *\n     * @param out Out point.\n     * @param p Point to transform, default `out`.\n     * @return The `out` parameter.\n     *\n     * @since 0.8.7\n     */\n    transformPointWorld(out, p = out) {\n        const wasm = this._engine.wasm;\n        wasm._tempMemFloat[0] = p[0];\n        wasm._tempMemFloat[1] = p[1];\n        wasm._tempMemFloat[2] = p[2];\n        wasm._wl_object_transformPointWorld(this.objectId, wasm._tempMem);\n        out[0] = wasm._tempMemFloat[0];\n        out[1] = wasm._tempMemFloat[1];\n        out[2] = wasm._tempMemFloat[2];\n        return out;\n    }\n    /**\n     * Transform a point by this object's local transform.\n     *\n     * @param out Out point.\n     * @param p Point to transform, default `out`.\n     * @return The `out` parameter.\n     *\n     * @since 0.8.7\n     */\n    transformPointLocal(out, p = out) {\n        const wasm = this._engine.wasm;\n        wasm._tempMemFloat[0] = p[0];\n        wasm._tempMemFloat[1] = p[1];\n        wasm._tempMemFloat[2] = p[2];\n        wasm._wl_object_transformPointLocal(this.objectId, wasm._tempMem);\n        out[0] = wasm._tempMemFloat[0];\n        out[1] = wasm._tempMemFloat[1];\n        out[2] = wasm._tempMemFloat[2];\n        return out;\n    }\n    /**\n     * Transform a vector by this object's inverse world transform.\n     *\n     * @param out Out vector.\n     * @param v Vector to transform, default `out`.\n     * @return The `out` parameter.\n     *\n     * @since 0.8.7\n     */\n    transformVectorInverseWorld(out, v = out) {\n        const wasm = this._engine.wasm;\n        wasm._tempMemFloat[0] = v[0];\n        wasm._tempMemFloat[1] = v[1];\n        wasm._tempMemFloat[2] = v[2];\n        wasm._wl_object_transformVectorInverseWorld(this.objectId, wasm._tempMem);\n        out[0] = wasm._tempMemFloat[0];\n        out[1] = wasm._tempMemFloat[1];\n        out[2] = wasm._tempMemFloat[2];\n        return out;\n    }\n    /**\n     * Transform a vector by this object's inverse local transform.\n     *\n     * @param out Out vector\n     * @param v Vector to transform, default `out`\n     * @return The `out` parameter.\n     *\n     * @since 0.8.7\n     */\n    transformVectorInverseLocal(out, v = out) {\n        const wasm = this._engine.wasm;\n        wasm._tempMemFloat[0] = v[0];\n        wasm._tempMemFloat[1] = v[1];\n        wasm._tempMemFloat[2] = v[2];\n        wasm._wl_object_transformVectorInverseLocal(this.objectId, wasm._tempMem);\n        out[0] = wasm._tempMemFloat[0];\n        out[1] = wasm._tempMemFloat[1];\n        out[2] = wasm._tempMemFloat[2];\n        return out;\n    }\n    /**\n     * Transform a point by this object's inverse world transform.\n     *\n     * @param out Out point.\n     * @param p Point to transform, default `out`.\n     * @return The `out` parameter.\n     *\n     * @since 0.8.7\n     */\n    transformPointInverseWorld(out, p = out) {\n        const wasm = this._engine.wasm;\n        wasm._tempMemFloat[0] = p[0];\n        wasm._tempMemFloat[1] = p[1];\n        wasm._tempMemFloat[2] = p[2];\n        wasm._wl_object_transformPointInverseWorld(this.objectId, wasm._tempMem);\n        out[0] = wasm._tempMemFloat[0];\n        out[1] = wasm._tempMemFloat[1];\n        out[2] = wasm._tempMemFloat[2];\n        return out;\n    }\n    /**\n     * Transform a point by this object's inverse local transform.\n     *\n     * @param out Out point.\n     * @param p Point to transform, default `out`.\n     * @return The `out` parameter.\n     *\n     * @since 0.8.7\n     */\n    transformPointInverseLocal(out, p = out) {\n        const wasm = this._engine.wasm;\n        wasm._tempMemFloat.set(p);\n        wasm._wl_object_transformPointInverseLocal(this.objectId, wasm._tempMem);\n        out[0] = wasm._tempMemFloat[0];\n        out[1] = wasm._tempMemFloat[1];\n        out[2] = wasm._tempMemFloat[2];\n        return out;\n    }\n    /**\n     * Transform an object space dual quaternion into world space.\n     *\n     * @param out Out transformation.\n     * @param q Local space transformation, default `out`.\n     * @return The `out` parameter.\n     *\n     * @since 0.8.7\n     */\n    toWorldSpaceTransform(out, q = out) {\n        const wasm = this._engine.wasm;\n        wasm._tempMemFloat.set(q);\n        wasm._wl_object_toWorldSpaceTransform(this.objectId, wasm._tempMem);\n        out[0] = wasm._tempMemFloat[0];\n        out[1] = wasm._tempMemFloat[1];\n        out[2] = wasm._tempMemFloat[2];\n        out[3] = wasm._tempMemFloat[3];\n        out[4] = wasm._tempMemFloat[4];\n        out[5] = wasm._tempMemFloat[5];\n        out[6] = wasm._tempMemFloat[6];\n        out[7] = wasm._tempMemFloat[7];\n        return out;\n    }\n    /**\n     * Transform a world space dual quaternion into local space.\n     *\n     * @param out Out transformation\n     * @param q World space transformation, default `out`\n     * @return The `out` parameter.\n     *\n     * @since 0.8.7\n     */\n    toLocalSpaceTransform(out, q = out) {\n        const p = this.parent;\n        if (p) {\n            p.toObjectSpaceTransform(out, q);\n            return out;\n        }\n        if (out !== q) {\n            out[0] = q[0];\n            out[1] = q[1];\n            out[2] = q[2];\n            out[3] = q[3];\n            out[4] = q[4];\n            out[5] = q[5];\n            out[6] = q[6];\n            out[7] = q[7];\n        }\n        return out;\n    }\n    /**\n     * Transform a world space dual quaternion into object space.\n     *\n     * @param out Out transformation.\n     * @param q World space transformation, default `out`\n     * @return The `out` parameter.\n     *\n     * @since 0.8.7\n     */\n    toObjectSpaceTransform(out, q = out) {\n        const wasm = this._engine.wasm;\n        wasm._tempMemFloat.set(q);\n        wasm._wl_object_toObjectSpaceTransform(this.objectId, wasm._tempMem);\n        out[0] = wasm._tempMemFloat[0];\n        out[1] = wasm._tempMemFloat[1];\n        out[2] = wasm._tempMemFloat[2];\n        out[3] = wasm._tempMemFloat[3];\n        out[4] = wasm._tempMemFloat[4];\n        out[5] = wasm._tempMemFloat[5];\n        out[6] = wasm._tempMemFloat[6];\n        out[7] = wasm._tempMemFloat[7];\n        return out;\n    }\n    /**\n     * Turn towards / look at target.\n     *\n     * Rotates the object so that its forward vector faces towards the target\n     * position. The `up` vector acts as a hint to uniquely orient the object's\n     * up direction. When orienting a view component, the projected `up` vector\n     * faces upwards on the viewing plane.\n     *\n     * @param p Target position to turn towards, in world space.\n     * @param up Up vector to align object with, in world space. Default is `[0, 1, 0]`.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    lookAt(p, up = UP_VECTOR) {\n        this._engine.wasm._wl_object_lookAt(this.objectId, p[0], p[1], p[2], up[0], up[1], up[2]);\n        return this;\n    }\n    /** Destroy the object with all of its components and remove it from the scene */\n    destroy() {\n        if (this._objectId < 0)\n            return;\n        this.engine.wasm._wl_scene_remove_object(this._objectId);\n        this.engine._destroyObject(this);\n    }\n    /**\n     * Mark transformation dirty.\n     *\n     * Causes an eventual recalculation of {@link transformWorld}, either\n     * on next {@link getTranslationWorld}, {@link transformWorld} or\n     * {@link scalingWorld} or the beginning of next frame, whichever\n     * happens first.\n     */\n    setDirty() {\n        this._engine.wasm._wl_object_set_dirty(this.objectId);\n    }\n    /**\n     * Disable/enable all components of this object.\n     *\n     * @param b New state for the components.\n     *\n     * @since 0.8.5\n     */\n    set active(b) {\n        const comps = this.getComponents();\n        for (let c of comps) {\n            c.active = b;\n        }\n    }\n    getComponent(typeOrClass, index = 0) {\n        const type = isString(typeOrClass) ? typeOrClass : typeOrClass.TypeName;\n        const wasm = this._engine.wasm;\n        const componentType = wasm._wl_get_component_manager_index(wasm.tempUTF8(type));\n        if (componentType < 0) {\n            /* Not a native component, try js: */\n            const typeIndex = wasm._componentTypeIndices[type];\n            if (typeIndex === undefined)\n                return null;\n            const jsIndex = wasm._wl_get_js_component_index(this.objectId, typeIndex, index);\n            if (jsIndex < 0)\n                return null;\n            const component = this._engine.wasm._components[jsIndex];\n            return component.constructor !== BrokenComponent ? component : null;\n        }\n        const componentId = this._engine.wasm._wl_get_component_id(this.objectId, componentType, index);\n        return this._engine._wrapComponent(type, componentType, componentId);\n    }\n    getComponents(typeOrClass) {\n        const wasm = this._engine.wasm;\n        let componentType = null;\n        let type = null;\n        if (typeOrClass) {\n            type = isString(typeOrClass) ? typeOrClass : typeOrClass.TypeName;\n            componentType = wasm._typeIndexFor(type);\n        }\n        const components = [];\n        const maxComps = Math.floor((wasm._tempMemSize / 3) * 2);\n        const componentsCount = wasm._wl_object_get_components(this.objectId, wasm._tempMem, maxComps);\n        const offset = 2 * componentsCount;\n        wasm._wl_object_get_component_types(this.objectId, wasm._tempMem + offset, maxComps);\n        const jsManagerIndex = wasm._jsManagerIndex;\n        for (let i = 0; i < componentsCount; ++i) {\n            const t = wasm._tempMemUint8[i + offset];\n            const componentId = wasm._tempMemUint16[i];\n            /* Handle JS types separately */\n            if (t == jsManagerIndex) {\n                const typeIndex = wasm._wl_get_js_component_index_for_id(componentId);\n                const comp = wasm._components[typeIndex];\n                const matches = componentType === null || comp.type == type;\n                if (comp.constructor !== BrokenComponent && matches) {\n                    components.push(comp);\n                }\n                continue;\n            }\n            if (componentType === null) {\n                const managerName = wasm._typeNameFor(t);\n                components.push(this._engine._wrapComponent(managerName, t, componentId));\n            }\n            else if (t == componentType) {\n                /* Optimized manager name retrieval, already have type */\n                components.push(this._engine._wrapComponent(type, componentType, componentId));\n            }\n        }\n        return components;\n    }\n    addComponent(typeOrClass, params) {\n        const wasm = this._engine.wasm;\n        const type = isString(typeOrClass) ? typeOrClass : typeOrClass.TypeName;\n        const componentType = wasm._typeIndexFor(type);\n        let component = null;\n        let componentIndex = null;\n        if (componentType < 0) {\n            /* JavaScript component */\n            if (!(type in wasm._componentTypeIndices)) {\n                throw new TypeError(\"Unknown component type '\" + type + \"'\");\n            }\n            const componentId = wasm._wl_object_add_js_component(this.objectId, wasm._componentTypeIndices[type]);\n            componentIndex = wasm._wl_get_js_component_index_for_id(componentId);\n            component = wasm._components[componentIndex];\n        }\n        else {\n            /* native component */\n            const componentId = wasm._wl_object_add_component(this.objectId, componentType);\n            component = this._engine._wrapComponent(type, componentType, componentId);\n        }\n        if (params !== undefined)\n            component.copy(params);\n        /* Explicitly initialize native components */\n        if (componentType < 0) {\n            /* @todo: `componentIndex` can be null here, that's an error */\n            wasm._wljs_component_init(componentIndex);\n            /* start() is called through onActivate() */\n        }\n        /* If it was not explicitly requested by the user to leave the component inactive,\n         * we activate it as a final step. This invalidates componentIndex! */\n        if (!params || !('active' in params && !params.active)) {\n            component.active = true;\n        }\n        return component;\n    }\n    /**\n     * Search for descendants matching the name.\n     *\n     * This method is a wrapper around {@link Object3D.findByNameDirect} and\n     * {@link Object3D.findByNameRecursive}.\n     *\n     * @param name The name to search for.\n     * @param recursive If `true`, the method will look at all the descendants of this object.\n     *     If `false`, this method will only perform the search in direct children.\n     * @returns An array of {@link Object3D} matching the name.\n     *\n     * @since 1.1.0\n     */\n    findByName(name, recursive = false) {\n        return recursive ? this.findByNameRecursive(name) : this.findByNameDirect(name);\n    }\n    /**\n     * Search for all **direct** children matching the name.\n     *\n     * @note Even though this method is heavily optimized, it does perform\n     * a linear search to find the objects. Do not use in a hot path.\n     *\n     * @param name The name to search for.\n     * @returns An array of {@link Object3D} matching the name.\n     *\n     * @since 1.1.0\n     */\n    findByNameDirect(name) {\n        const wasm = this._engine.wasm;\n        const id = this._objectId;\n        /* Divide by 4 to get half as many ushort as possible */\n        const tempSizeU16 = wasm._tempMemSize >> 2;\n        const maxCount = tempSizeU16 - 2; /* Reserve two ushort */\n        const buffer = wasm._tempMemUint16;\n        buffer[maxCount] = 0; /* Index offset */\n        buffer[maxCount + 1] = 0; /* child count */\n        const bufferPtr = wasm._tempMem;\n        const indexPtr = bufferPtr + maxCount * 2;\n        const childCountPtr = bufferPtr + maxCount * 2 + 2;\n        const namePtr = wasm.tempUTF8(name, (maxCount + 2) * 2);\n        const result = [];\n        let read = 0;\n        while ((read = wasm._wl_object_findByName(id, namePtr, indexPtr, childCountPtr, bufferPtr, maxCount))) {\n            for (let i = 0; i < read; ++i)\n                result.push(this.engine.wrapObject(buffer[i]));\n        }\n        return result;\n    }\n    /**\n     * Search for **all descendants** matching the name.\n     *\n     * @note Even though this method is heavily optimized, it does perform\n     * a linear search to find the objects. Do not use in a hot path.\n     *\n     * @param name The name to search for.\n     * @returns An array of {@link Object3D} matching the name.\n     *\n     * @since 1.1.0\n     */\n    findByNameRecursive(name) {\n        const wasm = this._engine.wasm;\n        const id = this._objectId;\n        /* Divide by 4 to get half as many ushort as possible */\n        const tempSizeU16 = wasm._tempMemSize >> 2;\n        const maxCount = tempSizeU16 - 1; /* Reserve one ushort */\n        const buffer = wasm._tempMemUint16;\n        buffer[maxCount] = 0; /* Index offset */\n        const bufferPtr = wasm._tempMem;\n        const indexPtr = bufferPtr + maxCount * 2;\n        const namePtr = wasm.tempUTF8(name, (maxCount + 1) * 2);\n        let read = 0;\n        const result = [];\n        while ((read = wasm._wl_object_findByNameRecursive(id, namePtr, indexPtr, bufferPtr, maxCount))) {\n            for (let i = 0; i < read; ++i)\n                result.push(this.engine.wrapObject(buffer[i]));\n        }\n        return result;\n    }\n    /**\n     * Whether given object's transformation has changed.\n     */\n    get changed() {\n        return !!this._engine.wasm._wl_object_is_changed(this.objectId);\n    }\n    /**\n     * `true` if the object is destroyed, `false` otherwise.\n     *\n     * If {@link WonderlandEngine.erasePrototypeOnDestroy} is `true`,\n     * reading a custom property will not work:\n     *\n     * ```js\n     * engine.erasePrototypeOnDestroy = true;\n     *\n     * const obj = scene.addObject();\n     * obj.customParam = 'Hello World!';\n     *\n     * console.log(obj.isDestroyed); // Prints `false`\n     * obj.destroy();\n     * console.log(obj.isDestroyed); // Prints `true`\n     * console.log(obj.customParam); // Throws an error\n     * ```\n     *\n     * @since 1.1.1\n     */\n    get isDestroyed() {\n        return this._objectId < 0;\n    }\n    /**\n     * Checks equality by comparing whether the wrapped native object ids are\n     * equal.\n     *\n     * @param otherObject Object to check equality with.\n     * @returns Whether this object equals the given object.\n     */\n    equals(otherObject) {\n        if (!otherObject)\n            return false;\n        return this.objectId == otherObject.objectId;\n    }\n}\n/**\n * Wrapper around a native skin data.\n */\nexport class Skin {\n    /**\n     * Index of the skin in the manager.\n     * @hidden\n     */\n    _index;\n    /** Wonderland Engine instance. @hidden */\n    _engine;\n    constructor(engine, index) {\n        this._engine = engine;\n        this._index = index;\n    }\n    /** Amount of joints in this skin. */\n    get jointCount() {\n        return this._engine.wasm._wl_skin_get_joint_count(this._index);\n    }\n    /** Joints object ids for this skin */\n    get jointIds() {\n        const wasm = this._engine.wasm;\n        return new Uint16Array(wasm.HEAPU16.buffer, wasm._wl_skin_joint_ids(this._index), this.jointCount);\n    }\n    /**\n     * Dual quaternions in a flat array of size 8 times {@link jointCount}.\n     *\n     * Inverse bind transforms of the skin.\n     */\n    get inverseBindTransforms() {\n        const wasm = this._engine.wasm;\n        return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_skin_inverse_bind_transforms(this._index), 8 * this.jointCount);\n    }\n    /**\n     * Vectors in a flat array of size 3 times {@link jointCount}.\n     *\n     * Inverse bind scalings of the skin.\n     */\n    get inverseBindScalings() {\n        const wasm = this._engine.wasm;\n        return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_skin_inverse_bind_scalings(this._index), 3 * this.jointCount);\n    }\n    /**\n     * Checks equality by comparing whether the wrapped native skin ids are\n     * equal.\n     *\n     * @param otherSkin Skin to check equality with.\n     * @returns Whether this skin equals the given skin.\n     *\n     * @since 1.0.0\n     */\n    equals(otherSkin) {\n        if (!otherSkin)\n            return false;\n        return this._index === otherSkin._index;\n    }\n}\n/* For backward compatibility with < 1.0.0. */\nexport { Object3D as Object };\n/**\n * Ray hit.\n *\n * Result of a {@link Scene.rayCast}.\n *\n * @note this class wraps internal engine data and should only be created internally.\n */\nexport class RayHit {\n    /** Wonderland Engine instance. @hidden */\n    _engine;\n    /** Pointer to the memory heap. */\n    _ptr;\n    /**\n     * @param ptr Pointer to the ray hits memory.\n     */\n    constructor(engine, ptr) {\n        if ((ptr & 3) !== 0) {\n            throw new Error('Misaligned pointer: please report a bug');\n        }\n        this._engine = engine;\n        this._ptr = ptr;\n    }\n    /** Array of ray hit locations. */\n    get locations() {\n        let p = this._ptr;\n        let l = [];\n        for (let i = 0; i < this.hitCount; ++i) {\n            l.push(new Float32Array(this._engine.wasm.HEAPF32.buffer, p + 12 * i, 3));\n        }\n        return l;\n    }\n    /** Array of ray hit normals (only when using {@link Physics#rayCast}. */\n    get normals() {\n        let p = this._ptr + 48;\n        let l = [];\n        for (let i = 0; i < this.hitCount; ++i) {\n            l.push(new Float32Array(this._engine.wasm.HEAPF32.buffer, p + 12 * i, 3));\n        }\n        return l;\n    }\n    /**\n     * Prefer these to recalculating the distance from locations.\n     *\n     * Distances of array hits to ray origin.\n     */\n    get distances() {\n        const p = this._ptr + 48 * 2;\n        return new Float32Array(this._engine.wasm.HEAPF32.buffer, p, this.hitCount);\n    }\n    /** Hit objects */\n    get objects() {\n        const HEAPU16 = this._engine.wasm.HEAPU16;\n        const objects = [null, null, null, null];\n        let p = (this._ptr + (48 * 2 + 16)) >> 1;\n        for (let i = 0; i < this.hitCount; ++i) {\n            objects[i] = this._engine.wrapObject(HEAPU16[p + i]);\n        }\n        return objects;\n    }\n    /** Number of hits (max 4) */\n    get hitCount() {\n        return Math.min(this._engine.wasm.HEAPU32[this._ptr / 4 + 30], 4);\n    }\n}\nclass math {\n    /** (Experimental!) Cubic Hermite spline interpolation for vector3 and quaternions.\n     *\n     * With `f == 0`, `out` will be `b`, if `f == 1`, `out` will be c.\n     *\n     * Whether a quaternion or vector3 interpolation is intended is determined by\n     * length of `a`.\n     *\n     * @param out Array to write result to.\n     * @param a First tangent/handle.\n     * @param b First point or quaternion.\n     * @param c Second point or quaternion.\n     * @param d Second handle.\n     * @param f Interpolation factor in [0; 1].\n     * @returns The `out` parameter.\n     *\n     * @since 0.8.6\n     */\n    static cubicHermite(out, a, b, c, d, f, engine = WL) {\n        const wasm = engine.wasm;\n        wasm._tempMemFloat.subarray(0).set(a);\n        wasm._tempMemFloat.subarray(4).set(b);\n        wasm._tempMemFloat.subarray(8).set(c);\n        wasm._tempMemFloat.subarray(12).set(d);\n        const isQuat = a.length == 4;\n        wasm._wl_math_cubicHermite(wasm._tempMem + 4 * 16, wasm._tempMem + 4 * 0, wasm._tempMem + 4 * 4, wasm._tempMem + 4 * 8, wasm._tempMem + 4 * 12, f, isQuat);\n        out[0] = wasm._tempMemFloat[16];\n        out[1] = wasm._tempMemFloat[17];\n        out[2] = wasm._tempMemFloat[18];\n        if (isQuat)\n            out[3] = wasm._tempMemFloat[19];\n        return out;\n    }\n}\nexport { math };\n/**\n * Class for accessing internationalization (i18n) features.\n *\n * Allows {@link I18N.onLanguageChanged \"detecting language change\"},\n * {@link I18N.language \"setting the current language\"} or translating\n * {@link I18N.translate \"individual terms\"}.\n *\n * Internationalization works with terms,\n * a string type keyword that is linked to a different text for each language.\n *\n * Internally, string parameters for text and js components are\n * automatically swapped during language change, given they are linked to a term.\n * If manual text swapping is desired, {@link I18N.translate}\n * can be used to retrieve the current translation for any term.\n *\n * You can also use the {@link I18N.onLanguageChanged} to manually update text\n * when a language is changed to for example update a number in a string.\n *\n * @since 1.0.0\n */\nexport class I18N {\n    /**\n     * {@link Emitter} for language change events.\n     *\n     * First parameter to a listener is the old language index,\n     * second parameter is the new language index.\n     *\n     * Usage from a within a component:\n     *\n     * ```js\n     * this.engine.i18n.onLanguageChanged.add((oldLanguageIndex, newLanguageIndex) => {\n     *     const oldLanguage = this.engine.i18n.languageName(oldLanguageIndex);\n     *     const newLanguage = this.engine.i18n.languageName(newLanguageIndex);\n     *     console.log(\"Switched from\", oldLanguage, \"to\", newLanguage);\n     * });\n     * ```\n     */\n    onLanguageChanged = new Emitter();\n    /** Wonderland Engine instance. @hidden */\n    _engine;\n    /** Previously set language index. @hidden */\n    _prevLanguageIndex = -1;\n    /**\n     * Constructor\n     */\n    constructor(engine) {\n        this._engine = engine;\n    }\n    /**\n     * Set current language and apply translations to linked text parameters.\n     *\n     * @note This is equivalent to {@link I18N.setLanguage}.\n     *\n     * @param code Language code to switch to\n     */\n    set language(code) {\n        this.setLanguage(code);\n    }\n    /** Get current language code. */\n    get language() {\n        const wasm = this._engine.wasm;\n        const code = wasm._wl_i18n_currentLanguage();\n        if (code === 0)\n            return null;\n        return wasm.UTF8ToString(code);\n    }\n    /**\n     * Get the current language index.\n     *\n     * This method is more efficient than its equivalent:\n     *\n     * ```js\n     * const index = i18n.languageIndex(i18n.language);\n     * ```\n     */\n    get currentIndex() {\n        return this._engine.wasm._wl_i18n_currentLanguageIndex();\n    }\n    /** Previous language index. */\n    get previousIndex() {\n        return this._prevLanguageIndex;\n    }\n    /**\n     * Set current language and apply translations to linked text parameters.\n     *\n     * @param code The language code.\n     * @returns A promise that resolves with the current index code when the\n     *     language is loaded.\n     */\n    setLanguage(code) {\n        if (code == null)\n            return Promise.resolve(this.currentIndex);\n        const wasm = this._engine.wasm;\n        this._prevLanguageIndex = this.currentIndex;\n        wasm._wl_i18n_setLanguage(wasm.tempUTF8(code));\n        return this._engine.scene\n            ._flushAppend(this._engine.scene.baseURL)\n            .then(() => this.currentIndex);\n    }\n    /**\n     * Get translated string for a term for the currently loaded language.\n     *\n     * @param term Term to translate\n     */\n    translate(term) {\n        const wasm = this._engine.wasm;\n        const translation = wasm._wl_i18n_translate(wasm.tempUTF8(term));\n        if (translation === 0)\n            return null;\n        return wasm.UTF8ToString(translation);\n    }\n    /**\n     * Get the number of languages in the project.\n     *\n     */\n    languageCount() {\n        const wasm = this._engine.wasm;\n        return wasm._wl_i18n_languageCount();\n    }\n    /**\n     * Get a language code.\n     *\n     * @param index Index of the language to get the code from\n     */\n    languageIndex(code) {\n        const wasm = this._engine.wasm;\n        return wasm._wl_i18n_languageIndex(wasm.tempUTF8(code));\n    }\n    /**\n     * Get a language code.\n     *\n     * @param index Index of the language to get the code from\n     */\n    languageCode(index) {\n        const wasm = this._engine.wasm;\n        const code = wasm._wl_i18n_languageCode(index);\n        if (code === 0)\n            return null;\n        return wasm.UTF8ToString(code);\n    }\n    /**\n     * Get a language name.\n     *\n     * @param index Index of the language to get the name from\n     */\n    languageName(index) {\n        const wasm = this._engine.wasm;\n        const name = wasm._wl_i18n_languageName(index);\n        if (name === 0)\n            return null;\n        return wasm.UTF8ToString(name);\n    }\n}\n/** Properties of a WebXR session */\nexport class XR {\n    /** Wonderland WASM bridge. @hidden */\n    #wasm;\n    #mode;\n    constructor(wasm, mode) {\n        this.#wasm = wasm;\n        this.#mode = mode;\n    }\n    /** Current WebXR session mode */\n    get sessionMode() {\n        return this.#mode;\n    }\n    /** Current WebXR session */\n    get session() {\n        return this.#wasm.webxr_session;\n    }\n    /** Current WebXR frame */\n    get frame() {\n        return this.#wasm.webxr_frame;\n    }\n    referenceSpaceForType(type) {\n        return this.#wasm.webxr_refSpaces[type] ?? null;\n    }\n    /** Set current reference space type used for retrieving eye, head, hand and joint poses */\n    set currentReferenceSpace(refSpace) {\n        this.#wasm.webxr_refSpace = refSpace;\n        this.#wasm.webxr_refSpaceType = null;\n        for (const type of Object.keys(this.#wasm.webxr_refSpaces)) {\n            if (this.#wasm.webxr_refSpaces[type] === refSpace) {\n                /* Keep track of reference space type */\n                this.#wasm.webxr_refSpaceType = type;\n            }\n        }\n    }\n    /** Current reference space type used for retrieving eye, head, hand and joint poses */\n    get currentReferenceSpace() {\n        return this.#wasm.webxr_refSpace;\n    }\n    /** Current WebXR reference space type or `null` if not a default reference space */\n    get currentReferenceSpaceType() {\n        return this.#wasm.webxr_refSpaceType;\n    }\n    /** Current WebXR base layer  */\n    get baseLayer() {\n        return this.#wasm.webxr_baseLayer;\n    }\n    /** Current WebXR framebuffer */\n    get framebuffers() {\n        if (!Array.isArray(this.#wasm.webxr_fbo)) {\n            return [this.#wasm.GL.framebuffers[this.#wasm.webxr_fbo]];\n        }\n        return this.#wasm.webxr_fbo.map((id) => this.#wasm.GL.framebuffers[id]);\n    }\n}\n", "/**\n * Fetch a file as an `ArrayBuffer`, with fetch progress passed to a callback.\n *\n * @param path Path of the file to fetch\n * @param onProgress Callback receiving the current fetch progress and total\n *     size, in bytes. Also called a final time on completion.\n * @returns Promise that resolves when the fetch successfully completes\n */\nexport function fetchWithProgress(path, onProgress) {\n    return new Promise((resolve, reject) => {\n        const xhr = new XMLHttpRequest();\n        xhr.open('GET', path);\n        xhr.responseType = 'arraybuffer';\n        xhr.onprogress = (progress) => {\n            if (progress.lengthComputable) {\n                onProgress?.(progress.loaded, progress.total);\n            }\n        };\n        xhr.onload = () => {\n            if (xhr.status >= 200 && xhr.status < 300) {\n                const buffer = xhr.response;\n                onProgress?.(buffer.byteLength, buffer.byteLength);\n                resolve(buffer);\n            }\n            else {\n                reject(xhr.statusText);\n            }\n        };\n        xhr.onerror = () => reject(xhr.statusText);\n        xhr.send();\n    });\n}\n/**\n * Get parent path from a URL.\n *\n * @param url URL to get the parent from.\n * @returns Parent URL without trailing slash.\n */\nexport function getBaseUrl(url) {\n    return url.substring(0, url.lastIndexOf('/'));\n}\n", "/**\n * Schedule a timeout, resolving in `time` milliseconds.\n *\n * @note `setTimeout` being a macro-task, this method can\n * be use as a debounce call.\n *\n * @param time The time until it resolves, in milliseconds.\n * @returns A promise resolving in `time` ms.\n */\nexport function timeout(time) {\n    return new Promise((res) => setTimeout(res, time));\n}\n/**\n * Clamp the value in the range [min; max].\n *\n * @param val The value to clamp.\n * @param min The minimum value (inclusive).\n * @param max The maximum value (inclusive).\n * @returns The clamped value.\n */\nexport function clamp(val, min, max) {\n    return Math.max(Math.min(max, val), min);\n}\n", "import { LogTag } from './index.js';\nimport { Emitter } from './utils/event.js';\nimport { fetchWithProgress, getBaseUrl } from './utils/fetch.js';\nimport { clamp, timeout } from './utils/misc.js';\nimport { isString } from './utils/object.js';\nimport { Material, RayHit, ViewComponent } from './wonderland.js';\n/**\n * Constants\n */\n/** Magic number for .bin */\nconst MAGIC_BIN = 'WLEV';\n/**\n * Provides global scene functionality like raycasting.\n */\nexport class Scene {\n    /** Called before rendering the scene */\n    onPreRender = new Emitter();\n    /** Called after the scene has been rendered */\n    onPostRender = new Emitter();\n    /** Wonderland Engine instance. @hidden */\n    _engine;\n    /** Ray hit pointer in WASM heap. @hidden */\n    _rayHit;\n    /** Ray hit. @hidden */\n    _hit;\n    /**\n     * Relative directory of the scene that was loaded with {@link Scene.load}\n     * Used for loading any files relative to the main scene.\n     *\n     * We need this for the tests that load bin files since we aren't loading\n     * from the deploy folder directly. (test/resources/projects/*.bin)\n     *\n     * @hidden\n     */\n    _baseURL;\n    constructor(engine) {\n        this._engine = engine;\n        this._rayHit = engine.wasm._malloc(4 * (3 * 4 + 3 * 4 + 4 + 2) + 4);\n        this._hit = new RayHit(this._engine, this._rayHit);\n        this._baseURL = '';\n    }\n    /**\n     * Currently active view components.\n     */\n    get activeViews() {\n        const wasm = this._engine.wasm;\n        const count = wasm._wl_scene_get_active_views(this._engine.wasm._tempMem, 16);\n        const views = [];\n        const viewTypeIndex = wasm._typeIndexFor('view');\n        for (let i = 0; i < count; ++i) {\n            views.push(new ViewComponent(this._engine, viewTypeIndex, this._engine.wasm._tempMemInt[i]));\n        }\n        return views;\n    }\n    /**\n     * Relative directory of the scene that was loaded with {@link Scene.load}\n     * Used for loading any files relative to the main scene.\n     *\n     * @hidden\n     */\n    get baseURL() {\n        return this._baseURL;\n    }\n    /**\n     * Cast a ray through the scene and find intersecting objects.\n     *\n     * The resulting ray hit will contain up to **4** closest ray hits,\n     * sorted by increasing distance.\n     *\n     * @param o Ray origin.\n     * @param d Ray direction.\n     * @param group Collision group to filter by: only objects that are\n     *        part of given group are considered for raycast.\n     * @param maxDistance Maximum **inclusive** hit distance. Defaults to `100`.\n     *\n     * @returns The scene cached {@link RayHit} instance.\n     * @note The returned object is owned by the Scene instance\n     *   will be reused with the next {@link Scene#rayCast} call.\n     */\n    rayCast(o, d, group, maxDistance = 100.0) {\n        this._engine.wasm._wl_scene_ray_cast(o[0], o[1], o[2], d[0], d[1], d[2], group, this._rayHit, maxDistance);\n        return this._hit;\n    }\n    /**\n     * Add an object to the scene.\n     *\n     * @param parent Parent object or `null`.\n     * @returns A newly created object.\n     */\n    addObject(parent = null) {\n        const parentId = parent ? parent.objectId : 0;\n        const objectId = this._engine.wasm._wl_scene_add_object(parentId);\n        return this._engine.wrapObject(objectId);\n    }\n    /**\n     * Batch-add objects to the scene.\n     *\n     * Will provide better performance for adding multiple objects (e.g. > 16)\n     * than calling {@link Scene#addObject} repeatedly in a loop.\n     *\n     * By providing upfront information of how many objects will be required,\n     * the engine is able to batch-allocate the required memory rather than\n     * convervatively grow the memory in small steps.\n     *\n     * **Experimental:** This API might change in upcoming versions.\n     *\n     * @param count Number of objects to add.\n     * @param parent Parent object or `null`, default `null`.\n     * @param componentCountHint Hint for how many components in total will\n     *      be added to the created objects afterwards, default `0`.\n     * @returns Newly created objects\n     */\n    addObjects(count, parent = null, componentCountHint = 0) {\n        const parentId = parent ? parent.objectId : 0;\n        this._engine.wasm.requireTempMem(count * 2);\n        const actualCount = this._engine.wasm._wl_scene_add_objects(parentId, count, componentCountHint || 0, this._engine.wasm._tempMem, this._engine.wasm._tempMemSize >> 1);\n        const ids = this._engine.wasm._tempMemUint16.subarray(0, actualCount);\n        const wrapper = this._engine.wrapObject.bind(this._engine);\n        const objects = Array.from(ids, wrapper);\n        return objects;\n    }\n    /**\n     * Pre-allocate memory for a given amount of objects and components.\n     *\n     * Will provide better performance for adding objects later with {@link Scene#addObject}\n     * and {@link Scene#addObjects}.\n     *\n     * By providing upfront information of how many objects will be required,\n     * the engine is able to batch-allocate the required memory rather than\n     * conservatively grow the memory in small steps.\n     *\n     * **Experimental:** This API might change in upcoming versions.\n     *\n     * @param objectCount Number of objects to add.\n     * @param componentCountPerType Amount of components to\n     *      allocate for {@link Object3D.addComponent}, e.g. `{mesh: 100, collision: 200, \"my-comp\": 100}`.\n     * @since 0.8.10\n     */\n    reserveObjects(objectCount, componentCountPerType) {\n        const wasm = this._engine.wasm;\n        componentCountPerType = componentCountPerType || {};\n        const jsManagerIndex = wasm._jsManagerIndex;\n        let countsPerTypeIndex = wasm._tempMemInt.subarray();\n        countsPerTypeIndex.fill(0);\n        for (const e of Object.entries(componentCountPerType)) {\n            const typeIndex = wasm._typeIndexFor(e[0]);\n            countsPerTypeIndex[typeIndex < 0 ? jsManagerIndex : typeIndex] += e[1];\n        }\n        wasm._wl_scene_reserve_objects(objectCount, wasm._tempMem);\n    }\n    /**\n     * Top-level objects of this scene.\n     *\n     * See {@link Object3D.children} for more information.\n     *\n     * @since 1.2.0\n     */\n    get children() {\n        const root = this._engine.wrapObject(0);\n        return root.children;\n    }\n    /**\n     * Search for objects matching the name.\n     *\n     * See {@link Object3D.findByName} for more information.\n     *\n     * @param name The name to search for.\n     * @param recursive If `true`, the method will look at all the objects of\n     *     this scene. If `false`, this method will only perform the search in\n     *     root objects.\n     * @returns An array of {@link Object3D} matching the name.\n     *\n     * @since 1.2.0\n     */\n    findByName(name, recursive = false) {\n        const root = this._engine.wrapObject(0);\n        return root.findByName(name, recursive);\n    }\n    /**\n     * Search for all **top-level** objects matching the name.\n     *\n     * See {@link Object3D.findByNameDirect} for more information.\n     *\n     * @param name The name to search for.\n     * @returns An array of {@link Object3D} matching the name.\n     *\n     * @since 1.2.0\n     */\n    findByNameDirect(name) {\n        const root = this._engine.wrapObject(0);\n        return root.findByNameDirect(name);\n    }\n    /**\n     * Search for **all objects** matching the name.\n     *\n     * See {@link Object3D.findByNameRecursive} for more information.\n     *\n     * @param name The name to search for.\n     * @returns An array of {@link Object3D} matching the name.\n     *\n     * @since 1.2.0\n     */\n    findByNameRecursive(name) {\n        const root = this._engine.wrapObject(0);\n        return root.findByNameRecursive(name);\n    }\n    /**\n     * Set the background clear color.\n     *\n     * @param color new clear color (RGBA).\n     * @since 0.8.5\n     */\n    set clearColor(color) {\n        this._engine.wasm._wl_scene_set_clearColor(color[0], color[1], color[2], color[3]);\n    }\n    /**\n     * Set whether to clear the color framebuffer before drawing.\n     *\n     * This function is useful if an external framework (e.g. an AR tracking\n     * framework) is responsible for drawing a camera frame before Wonderland\n     * Engine draws the scene on top of it.\n     *\n     * @param b Whether to enable color clear.\n     * @since 0.9.4\n     */\n    set colorClearEnabled(b) {\n        this._engine.wasm._wl_scene_enableColorClear(b);\n    }\n    /** Hosting engine instance. */\n    get engine() {\n        return this._engine;\n    }\n    /**\n     * Load a scene file (.bin).\n     *\n     * Will replace the currently active scene with the one loaded\n     * from given file. It is assumed that JavaScript components required by\n     * the new scene were registered in advance.\n     *\n     * Once the scene is loaded successfully and initialized,\n     * {@link WonderlandEngine.onSceneLoaded} is notified.\n     *\n     * #### ArrayBuffer\n     *\n     * The `load()` method accepts an in-memory buffer:\n     *\n     * ```js\n     * scene.load({\n     *     buffer: new ArrayBuffer(...),\n     *     baseURL: 'https://my-website/assets'\n     * })\n     * ```\n     *\n     * @note The `baseURL` is mandatory. It's used to fetch images and languages.\n     *\n     * Use {@link Scene.setLoadingProgress} to update the loading progress bar\n     * when using an ArrayBuffer.\n     *\n     * @param opts Path to the file to load, or an option object.\n     *     For more information about the options, see the {@link SceneLoadOptions} documentation.\n     * @returns Promise that resolves when the scene was loaded.\n     */\n    async load(options) {\n        let buffer = null;\n        let baseURL = null;\n        let filename = null;\n        if (isString(options)) {\n            filename = options;\n            buffer = await fetchWithProgress(filename, (bytes, size) => {\n                this.engine.log.info(LogTag.Scene, `Scene downloading: ${bytes} / ${size}`);\n                this.setLoadingProgress(bytes / size);\n            });\n            baseURL = getBaseUrl(filename);\n            this.engine.log.info(LogTag.Scene, `Scene download of ${buffer.byteLength} bytes successful.`);\n        }\n        else {\n            ({ buffer, baseURL } = options);\n            filename = baseURL ? `${baseURL}/scene.bin` : 'scene.bin';\n        }\n        if (!buffer) {\n            throw new Error('Failed to load scene, buffer not provided');\n        }\n        if (!isString(baseURL)) {\n            throw new Error('Failed to load scene, baseURL not provided');\n        }\n        if (!this._engine.onLoadingScreenEnd.isDataRetained) {\n            this._engine.onLoadingScreenEnd.notify();\n        }\n        this._baseURL = baseURL;\n        const wasm = this._engine.wasm;\n        const size = buffer.byteLength;\n        const ptr = wasm._malloc(size);\n        new Uint8Array(wasm.HEAPU8.buffer, ptr, size).set(new Uint8Array(buffer));\n        try {\n            /** @todo: Remove third parameter at 1.2.0 */\n            wasm._wl_load_scene_bin(ptr, size, wasm.tempUTF8(filename));\n        }\n        finally {\n            /* Catch calls to abort(), e.g. via asserts */\n            wasm._free(ptr);\n        }\n        const i18n = this._engine.i18n;\n        const langPromise = i18n.setLanguage(i18n.languageCode(0));\n        await Promise.all([langPromise, this._flushAppend(this._baseURL)]);\n        this._engine.onSceneLoaded.notify();\n    }\n    /**\n     * Append a scene file.\n     *\n     * Loads and parses the file and its images and appends the result\n     * to the currently active scene.\n     *\n     * Supported formats are streamable Wonderland scene files (.bin) and glTF\n     * 3D scenes (.gltf, .glb).\n     *\n     * ```js\n     * WL.scene.append(filename).then(root => {\n     *     // root contains the loaded scene\n     * });\n     * ```\n     *\n     * In case the `loadGltfExtensions` option is set to true, the response\n     * will be an object containing both the root of the loaded scene and\n     * any glTF extensions found on nodes, meshes and the root of the file.\n     *\n     * ```js\n     * WL.scene.append(filename, { loadGltfExtensions: true }).then(({root, extensions}) => {\n     *     // root contains the loaded scene\n     *     // extensions.root contains any extensions at the root of glTF document\n     *     const rootExtensions = extensions.root;\n     *     // extensions.mesh and extensions.node contain extensions indexed by Object id\n     *     const childObject = root.children[0];\n     *     const meshExtensions = root.meshExtensions[childObject.objectId];\n     *     const nodeExtensions = root.nodeExtensions[childObject.objectId];\n     *     // extensions.idMapping contains a mapping from glTF node index to Object id\n     * });\n     * ```\n     *\n     * If the file to be loaded is located in a subfolder, it might be useful\n     * to define the `baseURL` option. This will ensure any bin files\n     * referenced by the loaded bin file are loaded at the correct path.\n     *\n     * ```js\n     * WL.scene.append(filename, { baseURL: 'scenes' }).then(({root, extensions}) => {\n     *     // do stuff\n     * });\n     * ```\n     *\n     * @param file The .bin, .gltf or .glb file to append. Should be a URL or\n     *   an `ArrayBuffer` with the file content.\n     * @param options Additional options for loading.\n     * @returns Promise that resolves when the scene was appended.\n     */\n    async append(file, options = {}) {\n        const { loadGltfExtensions = false, baseURL = isString(file) ? getBaseUrl(file) : this._baseURL, } = options;\n        const wasm = this._engine.wasm;\n        const buffer = isString(file) ? await fetchWithProgress(file) : file;\n        let error = null;\n        let result = undefined;\n        let callback = wasm.addFunction((objectId, extensionData, extensionDataSize) => {\n            if (objectId < 0) {\n                error = new Error(`Scene.append(): Internal runtime error, found root id = ${objectId}`);\n                return;\n            }\n            const root = objectId ? this._engine.wrapObject(objectId) : null;\n            result = root;\n            if (!extensionData || !extensionDataSize)\n                return;\n            const marshalled = new Uint32Array(wasm.HEAPU32.buffer, extensionData, extensionDataSize / 4);\n            const extensions = this._unmarshallGltfExtensions(marshalled);\n            result = { root, extensions };\n        }, 'viii');\n        const size = buffer.byteLength;\n        const ptr = wasm._malloc(size);\n        const data = new Uint8Array(wasm.HEAPU8.buffer, ptr, size);\n        data.set(new Uint8Array(buffer));\n        const isBinFile = data.byteLength > MAGIC_BIN.length &&\n            data\n                .subarray(0, MAGIC_BIN.length)\n                .every((value, i) => value === MAGIC_BIN.charCodeAt(i));\n        try {\n            if (isBinFile) {\n                wasm._wl_append_scene_bin(ptr, size, callback);\n            }\n            else {\n                wasm._wl_append_scene_gltf(ptr, size, loadGltfExtensions, callback);\n            }\n        }\n        catch (e) {\n            wasm.removeFunction(callback);\n            throw e;\n        }\n        finally {\n            wasm._free(ptr);\n        }\n        /* Debounce this call to allow the animation loop to be scheduled.\n         * Without this, the promise might hang forever. */\n        while (result === undefined && !error)\n            await timeout(4);\n        wasm.removeFunction(callback);\n        if (error)\n            throw error;\n        if (isBinFile)\n            await this._flushAppend(baseURL);\n        return result;\n    }\n    /**\n     * Update the loading screen progress bar.\n     *\n     * @param value Current loading percentage, in the range [0; 1].\n     */\n    setLoadingProgress(percentage) {\n        const wasm = this.engine.wasm;\n        wasm._wl_set_loading_screen_progress(clamp(percentage, 0, 1));\n    }\n    /**\n     * Set the current material to render the sky.\n     *\n     * @note The sky needs to be enabled in the editor when creating the scene.\n     * For more information, please refer to the background [tutorial](https://wonderlandengine.com/tutorials/background-effect/).\n     */\n    set skyMaterial(material) {\n        this._engine.wasm._wl_scene_set_sky_material(material?._index ?? 0);\n    }\n    /** Current sky material, or `null` if no sky is set. */\n    get skyMaterial() {\n        const id = this._engine.wasm._wl_scene_get_sky_material();\n        return id > 0 ? new Material(this._engine, id) : null;\n    }\n    /**\n     * Load all currently queued bin files.\n     *\n     * Used by {@link Scene.append} and {@link Scene.load}\n     * to load all delay-load bins.\n     *\n     * Used by {@link I18N.language} to trigger loading the\n     * associated language bin, after it was queued.\n     *\n     * @param baseURL Url that is added to each path.\n     * @param options Additional options for loading.\n     *\n     * @hidden\n     */\n    _flushAppend(baseURL) {\n        const wasm = this._engine.wasm;\n        const count = wasm._wl_scene_queued_bin_count();\n        if (!count)\n            return Promise.resolve();\n        const urls = new Array(count).fill(0).map((_, i) => {\n            const ptr = wasm._wl_scene_queued_bin_path(i);\n            return wasm.UTF8ToString(ptr);\n        });\n        wasm._wl_scene_clear_queued_bin_list();\n        const promises = urls.map((path) => this.append(baseURL.length ? `${baseURL}/${path}` : path));\n        return Promise.all(promises).then((data) => {\n            const i18n = this._engine.i18n;\n            this._engine.i18n.onLanguageChanged.notify(i18n.previousIndex, i18n.currentIndex);\n            return data;\n        });\n    }\n    /**\n     * Unmarshalls the GltfExtensions from an Uint32Array.\n     *\n     * @param data Array containing the gltf extension data.\n     * @returns The extensions stored in an object literal.\n     *\n     * @hidden\n     */\n    _unmarshallGltfExtensions(data) {\n        /* @todo: This method should be moved in the internal Emscripten library. */\n        const extensions = {\n            root: {},\n            mesh: {},\n            node: {},\n            idMapping: [],\n        };\n        let index = 0;\n        const readString = () => {\n            const strPtr = data[index++];\n            const strLen = data[index++];\n            return this._engine.wasm.UTF8ViewToString(strPtr, strPtr + strLen);\n        };\n        const idMappingSize = data[index++];\n        const idMapping = new Array(idMappingSize);\n        for (let i = 0; i < idMappingSize; ++i) {\n            idMapping[i] = data[index++];\n        }\n        extensions.idMapping = idMapping;\n        const meshExtensionsSize = data[index++];\n        for (let i = 0; i < meshExtensionsSize; ++i) {\n            const objectId = data[index++];\n            extensions.mesh[idMapping[objectId]] = JSON.parse(readString());\n        }\n        const nodeExtensionsSize = data[index++];\n        for (let i = 0; i < nodeExtensionsSize; ++i) {\n            const objectId = data[index++];\n            extensions.node[idMapping[objectId]] = JSON.parse(readString());\n        }\n        const rootExtensionsStr = readString();\n        if (rootExtensionsStr) {\n            extensions.root = JSON.parse(rootExtensionsStr);\n        }\n        return extensions;\n    }\n    /**\n     * Reset the scene.\n     *\n     * This method deletes all used and allocated objects, and components.\n     */\n    reset() {\n        this._engine.wasm._wl_scene_reset();\n        this._baseURL = '';\n    }\n}\n", "import { Texture } from './wonderland.js';\n/**\n * Manage textures.\n *\n * This manager is accessible on the engine instance using {@link WonderlandEngine.textures}.\n *\n * Usage:\n *\n * ```js\n * this.engine.load('path/to/texture.png').then((texture) => {\n *     console.log('Loaded!');\n *     console.log(texture);\n * })\n * ```\n */\nexport class TextureManager {\n    /** Wonderland Engine instance. @hidden */\n    _engine;\n    /** Texture cache. @hidden */\n    #cache = [];\n    /** @hidden */\n    constructor(engine) {\n        this._engine = engine;\n    }\n    /**\n     * Retrieve the texture with the given id.\n     *\n     * @param id The texture identifier.\n     * @return The {@link Texture} if found, `null` otherwise.\n     */\n    get(id) {\n        return this.#cache[id] ?? null;\n    }\n    /**\n     * Load an image from URL as {@link Texture}.\n     *\n     * @param filename URL to load from.\n     * @param crossOrigin Cross origin flag for the image object.\n     * @returns Loaded texture.\n     */\n    load(filename, crossOrigin) {\n        let image = new Image();\n        image.crossOrigin = crossOrigin ?? image.crossOrigin;\n        image.src = filename;\n        return new Promise((resolve, reject) => {\n            image.onload = () => {\n                let texture = new Texture(this._engine, image);\n                if (!texture.valid) {\n                    reject('Failed to add image ' +\n                        image.src +\n                        ' to texture atlas. Probably incompatible format.');\n                }\n                resolve(texture);\n            };\n            image.onerror = function () {\n                reject('Failed to load image. Not found or no read access');\n            };\n        });\n    }\n    /**\n     * Wrap a texture ID using {@link Texture}.\n     *\n     * @note This method performs caching and will return the same\n     * instance on subsequent calls.\n     *\n     * @param id ID of the texture to create.\n     *\n     * @returns The texture.\n     */\n    wrap(id) {\n        const texture = this.#cache[id] ?? (this.#cache[id] = new Texture(this._engine, id));\n        texture['_id'] = id;\n        return texture;\n    }\n    /** Number of textures allocated in the manager. */\n    get allocatedCount() {\n        return this.#cache.length;\n    }\n    /**\n     * Number of textures in the manager.\n     *\n     * @note For performance reasons, avoid calling this method when possible.\n     */\n    get count() {\n        let count = 0;\n        for (const tex of this.#cache) {\n            if (tex && tex.id >= 0)\n                ++count;\n        }\n        return count;\n    }\n    /**\n     * Set a new texture in the manager cache.\n     *\n     * @note This api is meant to be used internally.\n     *\n     * @param texture The texture to add.\n     *\n     * @hidden\n     */\n    _set(texture) {\n        /* @todo: Destroy texture at previous id? */\n        this.#cache[texture.id] = texture;\n    }\n    /**\n     * Destroys the texture.\n     *\n     * @note This api is meant to be used internally.\n     *\n     * @param texture The texture to destroy.\n     *\n     * @hidden\n     */\n    _destroy(texture) {\n        this._engine.wasm._wl_texture_destroy(texture.id);\n        const img = texture['_imageIndex'];\n        if (img !== null) {\n            this._engine.wasm._images[img] = null;\n        }\n    }\n    /**\n     * Reset the manager.\n     *\n     * @note This api is meant to be used internally.\n     *\n     * @hidden\n     */\n    _reset() {\n        this.#cache.length = 0;\n    }\n}\n", "import { CollisionComponent, AnimationComponent, LightComponent, MeshComponent, PhysXComponent, InputComponent, ViewComponent, TextComponent, Object as Object3D, Physics, I18N, DestroyedObjectInstance, DestroyedComponentInstance, DestroyedTextureInstance, } from './wonderland.js';\nimport { Emitter, RetainEmitter } from './utils/event.js';\nimport { isString } from './utils/object.js';\nimport { Scene } from './scene.js';\nimport { TextureManager } from './texture-manager.js';\nimport { LogTag } from './index.js';\nfunction checkXRSupport() {\n    if (!navigator.xr) {\n        const isLocalhost = location.hostname === 'localhost' || location.hostname === '127.0.0.1';\n        const missingHTTPS = location.protocol !== 'https:' && !isLocalhost;\n        return Promise.reject(missingHTTPS\n            ? 'WebXR is only supported with HTTPS or on localhost!'\n            : 'WebXR unsupported in this browser.');\n    }\n    return Promise.resolve();\n}\n/**\n * Main Wonderland Engine instance.\n *\n * Controls the canvas, rendering, and JS <-> WASM communication.\n */\nexport class WonderlandEngine {\n    /**\n     * {@link Emitter} for WebXR session end events.\n     *\n     * Usage from within a component:\n     *\n     * ```js\n     * this.engine.onXRSessionEnd.add(() => console.log(\"XR session ended.\"));\n     * ```\n     */\n    onXRSessionEnd = new Emitter();\n    /**\n     * {@link RetainEmitter} for WebXR session start events.\n     *\n     * Usage from within a component:\n     *\n     * ```js\n     * this.engine.onXRSessionStart.add((session, mode) => console.log(session, mode));\n     * ```\n     *\n     * By default, this emitter is retained and will automatically call any callback added\n     * while a session is already started:\n     *\n     * ```js\n     * // XR session is already active.\n     * this.engine.onXRSessionStart.add((session, mode) => {\n     *     console.log(session, mode); // Triggered immediately.\n     * });\n     * ```\n     */\n    onXRSessionStart = new RetainEmitter();\n    /**\n     * {@link Emitter} for canvas / main framebuffer resize events.\n     *\n     * Usage from within a component:\n     *\n     * ```js\n     * this.engine.onResize.add(() => {\n     *     const canvas = this.engine.canvas;\n     *     console.log(`New Size: ${canvas.width}, ${canvas.height}`);\n     * });\n     * ```\n     *\n     * @note The size of the canvas is in physical pixels, and is set via {@link WonderlandEngine.resize}.\n     */\n    onResize = new Emitter();\n    /** Whether AR is supported by the browser. */\n    arSupported = false;\n    /** Whether VR is supported by the browser. */\n    vrSupported = false;\n    /**\n     * {@link RetainEmitter} signalling the end of the loading screen.\n     *\n     * Listeners get notified when the first call to {@link Scene#load()} is\n     * invoked. At this point the new scene has not become active, and none of\n     * its resources or components are initialized.\n     *\n     * Compared to {@link onSceneLoaded}, this does not wait for all components\n     * to be fully initialized and activated. Any handler added inside\n     * {@link Component#init()}, {@link Component#start()} or\n     * {@link Component#onActivate()} will be called immediately.\n     *\n     * Usage:\n     *\n     * ```js\n     * this.engine.onLoadingScreenEnd.add(() => console.log(\"Wait is over!\"));\n     * ```\n     */\n    onLoadingScreenEnd = new RetainEmitter();\n    /**\n     * {@link Emitter} for scene loaded events.\n     *\n     * Listeners get notified when a call to {@link Scene#load()} finishes. At\n     * this point all resources are loaded and all components had their\n     * {@link Component#init()} as well as (if active)\n     * {@link Component#start()} and {@link Component#onActivate()} methods\n     * called.\n     *\n     * Usage from within a component:\n     *\n     * ```js\n     * this.engine.onSceneLoaded.add(() => console.log(\"Scene switched!\"));\n     * ```\n     */\n    onSceneLoaded = new Emitter();\n    /**\n     * Current main scene.\n     */\n    scene = null;\n    /**\n     * Access to internationalization.\n     */\n    i18n = new I18N(this);\n    /**\n     * WebXR related state, `null` if no XR session is active.\n     */\n    xr = null;\n    /**\n     * If `true`, {@link Texture}, {@link Object3D}, and {@link Component}\n     * instances have their prototype erased upon destruction.\n     *\n     * #### Object\n     *\n     * ```js\n     * engine.erasePrototypeOnDestroy = true;\n     *\n     * const obj = engine.scene.addObject();\n     * obj.name = 'iamalive';\n     * console.log(obj.name); // Prints 'iamalive'\n     *\n     * obj.destroy();\n     * console.log(obj.name); // Throws an error\n     * ```\n     *\n     * #### Component\n     *\n     * Components will also be affected:\n     *\n     * ```js\n     * class MyComponent extends Component {\n     *     static TypeName = 'my-component';\n     *     static Properties = {\n     *         alive: Property.bool(true)\n     *     };\n     *\n     *     start() {\n     *         this.destroy();\n     *         console.log(this.alive) // Throws an error\n     *     }\n     * }\n     * ```\n     *\n     * A component is also destroyed if its ancestor gets destroyed:\n     *\n     * ```js\n     * class MyComponent extends Component {\n     *     ...\n     *     start() {\n     *         this.object.parent.destroy();\n     *         console.log(this.alive) // Throws an error\n     *     }\n     * }\n     * ```\n     *\n     * @note Native components will not be erased if destroyed via object destruction:\n     *\n     * ```js\n     * const mesh = obj.addComponent('mesh');\n     * obj.destroy();\n     * console.log(mesh.active) // Doesn't throw even if the mesh is destroyed\n     * ```\n     *\n     * @since 1.1.1\n     */\n    erasePrototypeOnDestroy = false;\n    /**\n     * Component class instances per type to avoid GC.\n     *\n     * @note Maps the manager index to the list of components.\n     *\n     * @hidden\n     */\n    _componentCache = {};\n    /** Object class instances to avoid GC. @hidden */\n    _objectCache = [];\n    /**\n     * WebAssembly bridge.\n     *\n     * @hidden\n     */\n    #wasm;\n    /**\n     * Physics manager, only available when physx is enabled in the runtime.\n     *\n     * @hidden\n     */\n    #physics = null;\n    /** Texture manager. @hidden */\n    #textures = new TextureManager(this);\n    /**\n     * Resize observer to track for canvas size changes.\n     *\n     * @hidden\n     */\n    #resizeObserver = null;\n    /**\n     * Initial reference space type set by webxr_init. See {@link _init} for\n     * more information.\n     *\n     * @hidden\n     */\n    #initialReferenceSpaceType = null;\n    /**\n     * Create a new engine instance.\n     *\n     * @param wasm Wasm bridge instance\n     * @param loadingScreen Loading screen .bin file data\n     *\n     * @hidden\n     */\n    constructor(wasm, loadingScreen) {\n        this.#wasm = wasm;\n        this.#wasm['_setEngine'](this); /* String lookup to bypass private. */\n        this.#wasm._loadingScreen = loadingScreen;\n        this._componentCache = {};\n        this._objectCache.length = 0;\n        this.canvas.addEventListener('webglcontextlost', (e) => this.log.error(LogTag.Engine, 'Context lost:', e), false);\n    }\n    /**\n     * Start the engine if it's not already running.\n     *\n     * When using the {@link loadRuntime} function, this method is called\n     * automatically.\n     */\n    start() {\n        this.wasm._wl_application_start();\n    }\n    /**\n     * Register a custom JavaScript component type.\n     *\n     * You can register a component directly using a class inheriting from {@link Component}:\n     *\n     * ```js\n     * import { Component, Type } from '@wonderlandengine/api';\n     *\n     * export class MyComponent extends Component {\n     *     static TypeName = 'my-component';\n     *     static Properties = {\n     *         myParam: {type: Type.Float, default: 42.0},\n     *     };\n     *     init() {}\n     *     start() {}\n     *     update(dt) {}\n     *     onActivate() {}\n     *     onDeactivate() {}\n     *     onDestroy() {}\n     * });\n     *\n     * // Here, we assume we have an engine already instantiated.\n     * // In general, the registration occurs in the `index.js` file in your\n     * // final application.\n     * engine.registerComponent(MyComponent);\n     * ```\n     *\n     * {@label CLASSES}\n     * @param classes Custom component(s) extending {@link Component}.\n     *\n     * @since 1.0.0\n     */\n    registerComponent(...classes) {\n        for (const arg of classes) {\n            this.wasm._registerComponent(arg);\n        }\n    }\n    /**\n     * Checks whether the given component is registered or not.\n     *\n     * @param typeOrClass A string representing the component typename (e.g., `'cursor-component'`),\n     *     or a component class (e.g., `CursorComponent`).\n     * @returns `true` if the component is registered, `false` otherwise.\n     */\n    isRegistered(typeOrClass) {\n        return this.#wasm.isRegistered(isString(typeOrClass) ? typeOrClass : typeOrClass.TypeName);\n    }\n    /**\n     * Resize the canvas and the rendering context.\n     *\n     * @note The `width` and `height` parameters will be scaled by the\n     * `devicePixelRatio` value. By default, the pixel ratio used is\n     * [window.devicePixelRatio](https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio).\n     *\n     * @param width The width, in CSS pixels.\n     * @param height The height, in CSS pixels.\n     * @param devicePixelRatio The pixel ratio factor.\n     */\n    resize(width, height, devicePixelRatio = window.devicePixelRatio) {\n        width = width * devicePixelRatio;\n        height = height * devicePixelRatio;\n        this.canvas.width = width;\n        this.canvas.height = height;\n        this.wasm._wl_application_resize(width, height);\n        this.onResize.notify();\n    }\n    /**\n     * Run the next frame.\n     *\n     * @param fixedDelta The elapsed time between this frame and the previous one.\n     *\n     * @note The engine automatically schedules next frames. You should only\n     * use this method for testing.\n     */\n    nextFrame(fixedDelta = 0) {\n        this.#wasm._wl_nextFrame(fixedDelta);\n    }\n    /**\n     * Request an XR session.\n     *\n     * @note Please use this call instead of directly calling `navigator.xr.requestSession()`.\n     * Wonderland Engine requires to be aware that a session is started, and this\n     * is done through this call.\n     *\n     * @param mode The XR mode.\n     * @param features An array of required features, e.g., `['local-floor', 'hit-test']`.\n     * @param optionalFeatures An array of optional features, e.g., `['bounded-floor', 'depth-sensing']`.\n     * @returns A promise resolving with the `XRSession`, a string error message otherwise.\n     */\n    requestXRSession(mode, features, optionalFeatures = []) {\n        return checkXRSupport().then(() => this.#wasm.webxr_requestSession(mode, features, optionalFeatures));\n    }\n    /**\n     * Offer an XR session.\n     *\n     * Adds an interactive UI element to the browser interface to start an XR\n     * session. Browser support is optional, so it's advised to still allow\n     * requesting a session with a UI element on the website itself.\n     *\n     * @note Please use this call instead of directly calling `navigator.xr.offerSession()`.\n     * Wonderland Engine requires to be aware that a session is started, and this\n     * is done through this call.\n     *\n     * @param mode The XR mode.\n     * @param features An array of required features, e.g., `['local-floor', 'hit-test']`.\n     * @param optionalFeatures An array of optional features, e.g., `['bounded-floor', 'depth-sensing']`.\n     * @returns A promise resolving with the `XRSession`, a string error message otherwise.\n     *\n     * @since 1.1.5\n     */\n    offerXRSession(mode, features, optionalFeatures = []) {\n        return checkXRSupport().then(() => this.#wasm.webxr_offerSession(mode, features, optionalFeatures));\n    }\n    /**\n     * Wrap an object ID using {@link Object}.\n     *\n     * @note This method performs caching and will return the same\n     * instance on subsequent calls.\n     *\n     * @param objectId ID of the object to create.\n     *\n     * @returns The object\n     */\n    wrapObject(objectId) {\n        const cache = this._objectCache;\n        const o = cache[objectId] || (cache[objectId] = new Object3D(this, objectId));\n        o['_objectId'] = objectId;\n        return o;\n    }\n    /* Public Getters & Setter */\n    /**\n     * WebAssembly bridge.\n     *\n     * @note Use with care. This object is used to communicate\n     * with the WebAssembly code throughout the api.\n     *\n     * @hidden\n     */\n    get wasm() {\n        return this.#wasm;\n    }\n    /** Canvas element that Wonderland Engine renders to. */\n    get canvas() {\n        return this.#wasm.canvas;\n    }\n    /**\n     * Current WebXR session or `null` if no session active.\n     *\n     * @deprecated Use {@link XR.session} on the {@link xr}\n     * object instead.\n     */\n    get xrSession() {\n        return this.xr?.session ?? null;\n    }\n    /**\n     * Current WebXR frame or `null` if no session active.\n     *\n     * @deprecated Use {@link XR.frame} on the {@link xr}\n     * object instead.\n     */\n    get xrFrame() {\n        return this.xr?.frame ?? null;\n    }\n    /**\n     * Current WebXR base layer or `null` if no session active.\n     *\n     * @deprecated Use {@link XR.baseLayer} on the {@link xr}\n     * object instead.\n     */\n    get xrBaseLayer() {\n        return this.xr?.baseLayer ?? null;\n    }\n    /**\n     * Current WebXR framebuffer or `null` if no session active.\n     *\n     * @deprecated Use {@link XR.framebuffers} on the\n     * {@link xr} object instead.\n     */\n    get xrFramebuffer() {\n        return this.xr?.framebuffers[0] ?? null;\n    }\n    /** Framebuffer scale factor. */\n    get xrFramebufferScaleFactor() {\n        return this.#wasm.webxr_framebufferScaleFactor;\n    }\n    set xrFramebufferScaleFactor(value) {\n        this.#wasm.webxr_framebufferScaleFactor = value;\n    }\n    /** Physics manager, only available when physx is enabled in the runtime. */\n    get physics() {\n        return this.#physics;\n    }\n    /**\n     * Texture managger.\n     *\n     * Use this to load or programmatically create new textures at runtime.\n     */\n    get textures() {\n        return this.#textures;\n    }\n    /*\n     * Enable or disable the mechanism to automatically resize the canvas.\n     *\n     * Internally, the engine uses a [ResizeObserver](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver).\n     * Changing the canvas css will thus automatically be tracked by the engine.\n     */\n    set autoResizeCanvas(flag) {\n        const state = !!this.#resizeObserver;\n        if (state === flag)\n            return;\n        if (!flag) {\n            this.#resizeObserver?.unobserve(this.canvas);\n            this.#resizeObserver = null;\n            return;\n        }\n        this.#resizeObserver = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.target === this.canvas) {\n                    this.resize(entry.contentRect.width, entry.contentRect.height);\n                }\n            }\n        });\n        this.#resizeObserver.observe(this.canvas);\n    }\n    /** `true` if the canvas is automatically resized by the engine. */\n    get autoResizeCanvas() {\n        return this.#resizeObserver !== null;\n    }\n    /** Retrieves the runtime version. */\n    get runtimeVersion() {\n        const wasm = this.#wasm;\n        const v = wasm._wl_application_version(wasm._tempMem);\n        return {\n            major: wasm._tempMemUint16[0],\n            minor: wasm._tempMemUint16[1],\n            patch: wasm._tempMemUint16[2],\n            rc: wasm._tempMemUint16[3],\n        };\n    }\n    /** Engine {@link Logger}. Use it to turn on / off logging. */\n    get log() {\n        return this.#wasm._log;\n    }\n    /* Internal-Only Methods */\n    /**\n     * Initialize the engine.\n     *\n     * @note Should be called after the WebAssembly is fully loaded.\n     *\n     * @hidden\n     */\n    _init() {\n        this.scene = new Scene(this);\n        /* Force the reference space to 'local'/'viewer' for the loading screen\n         * to make sure the head input is at the origin. Doing it this way to\n         * avoid adding JS components to the loading screen. */\n        const onXRStart = () => {\n            this.#initialReferenceSpaceType = this.xr.currentReferenceSpaceType;\n            const newSpace = this.xr.referenceSpaceForType('local') ??\n                this.xr.referenceSpaceForType('viewer');\n            this.xr.currentReferenceSpace = newSpace;\n        };\n        /* Not once() because the user can enter and exit XR several times\n         * during a long loading screen */\n        this.onXRSessionStart.add(onXRStart);\n        /* This is called before all init()/start()/onActivate() so we avoid\n         * overwriting a user-set reference space */\n        this.onLoadingScreenEnd.once(() => {\n            this.onXRSessionStart.remove(onXRStart);\n            if (!this.xr || !this.#initialReferenceSpaceType)\n                return;\n            this.xr.currentReferenceSpace =\n                this.xr.referenceSpaceForType(this.#initialReferenceSpaceType) ??\n                    this.xr.referenceSpaceForType('viewer');\n            this.#initialReferenceSpaceType = null;\n        });\n        /* Setup the error handler. This is used to to manage native errors. */\n        this.#wasm._wl_set_error_callback(this.#wasm.addFunction((messagePtr) => {\n            throw new Error(this.#wasm.UTF8ToString(messagePtr));\n        }, 'vi'));\n        this.#physics = null;\n        if (this.#wasm.withPhysX) {\n            /* Setup the physics callback. */\n            const physics = new Physics(this);\n            this.#wasm._wl_physx_set_collision_callback(this.#wasm.addFunction((a, index, type, b) => {\n                const callback = physics._callbacks[a][index];\n                const component = new PhysXComponent(this, this.wasm._typeIndexFor('physx'), b);\n                callback(type, component);\n            }, 'viiii'));\n            this.#physics = physics;\n        }\n        this.resize(this.canvas.clientWidth, this.canvas.clientHeight);\n    }\n    /**\n     * Reset the runtime state, including:\n     *     - Component cache\n     *     - Images\n     *     - Callbacks\n     *\n     * @note This api is meant to be used internally.\n     *\n     * @hidden\n     */\n    _reset() {\n        this._componentCache = {};\n        this._objectCache.length = 0;\n        this.#textures._reset();\n        this.scene.reset();\n        this.wasm.reset();\n    }\n    /**\n     * Retrieves a component instance if it exists, or create and cache\n     * a new one.\n     *\n     * @note This api is meant to be used internally. Please have a look at\n     * {@link Object3D.addComponent} instead.\n     *\n     * @param type component type name\n     * @param componentType Component manager index\n     * @param componentId Component id in the manager\n     *\n     * @returns JavaScript instance wrapping the native component\n     *\n     * @hidden\n     */\n    _wrapComponent(type, componentType, componentId) {\n        if (componentId < 0)\n            return null;\n        /* @todo: extremely slow in JS to do that... Better to use a Map or allocate the array. */\n        const c = this._componentCache[componentType] ||\n            (this._componentCache[componentType] = []);\n        if (c[componentId]) {\n            return c[componentId];\n        }\n        let component;\n        if (type == 'collision') {\n            component = new CollisionComponent(this, componentType, componentId);\n        }\n        else if (type == 'text') {\n            component = new TextComponent(this, componentType, componentId);\n        }\n        else if (type == 'view') {\n            component = new ViewComponent(this, componentType, componentId);\n        }\n        else if (type == 'mesh') {\n            component = new MeshComponent(this, componentType, componentId);\n        }\n        else if (type == 'input') {\n            component = new InputComponent(this, componentType, componentId);\n        }\n        else if (type == 'light') {\n            component = new LightComponent(this, componentType, componentId);\n        }\n        else if (type == 'animation') {\n            component = new AnimationComponent(this, componentType, componentId);\n        }\n        else if (type == 'physx') {\n            component = new PhysXComponent(this, componentType, componentId);\n        }\n        else {\n            const typeIndex = this.wasm._componentTypeIndices[type];\n            const constructor = this.wasm._componentTypes[typeIndex];\n            component = new constructor(this);\n        }\n        /* Sets the manager and identifier from the outside, to\n         * simplify the user's constructor. */\n        /* @ts-ignore */\n        component._engine = this;\n        component._manager = componentType;\n        component._id = componentId;\n        c[componentId] = component;\n        return component;\n    }\n    /**\n     * Perform cleanup upon object destruction.\n     *\n     * @param instance The instance to destroy.\n     *\n     * @hidden\n     */\n    _destroyObject(instance) {\n        const id = instance.objectId;\n        instance._objectId = -1;\n        /* Destroy the prototype of this instance to avoid using a dangling object */\n        if (this.erasePrototypeOnDestroy && instance) {\n            Object.setPrototypeOf(instance, DestroyedObjectInstance);\n        }\n        /* Remove from the cache to avoid side-effects when\n         * re-creating an object with the same id. */\n        this._objectCache[id] = null;\n    }\n    /**\n     * Perform cleanup upon component destruction.\n     *\n     * @param instance The instance to destroy.\n     *\n     * @hidden\n     */\n    _destroyComponent(instance) {\n        const id = instance._id;\n        const manager = instance._manager;\n        instance._id = -1;\n        instance._manager = -1;\n        /* Destroy the prototype of this instance to avoid using a dangling component */\n        if (this.erasePrototypeOnDestroy && instance) {\n            Object.setPrototypeOf(instance, DestroyedComponentInstance);\n        }\n        /* Remove from the cache to avoid side-effects when\n         * re-creating a component with the same id. */\n        const cache = this._componentCache[manager];\n        if (cache)\n            cache[id] = null;\n    }\n    /**\n     * Perform cleanup upon texture destruction.\n     *\n     * @param texture The instance to destroy.\n     *\n     * @hidden\n     */\n    _destroyTexture(texture) {\n        this.textures._destroy(texture);\n        if (this.erasePrototypeOnDestroy) {\n            Object.setPrototypeOf(texture, DestroyedTextureInstance);\n        }\n    }\n}\n", "/**\n * Assert that the given bit index is less than 32.\n *\n * @param bit The bit to test.\n */\nfunction assert(bit) {\n    if (bit >= 32) {\n        throw new Error(`BitSet.enable(): Value ${bit} is over 31`);\n    }\n}\n/**\n * Stores a bit pattern to quickly test if an index is enabled / disabled.\n *\n * This class can store up to **32** different values in the range [0; 31].\n *\n * #### Usage\n *\n * ```js\n * const bitset = new BitSet();\n * bitset.enable(10); // Enable bit at index `10`.\n * console.log(bitset.enabled(10)); // Prints 'true'.\n * ```\n *\n * #### TypeScript\n *\n * The set can be typed over an enum:\n *\n * ```ts\n * enum Tag {\n *     First = 0,\n *     Second = 1,\n * }\n *\n * const bitset = new BitSet<Tag>();\n * bitset.enable(Tag.First);\n * ```\n */\nexport class BitSet {\n    /** Enabled bits. @hidden */\n    _bits = 0;\n    /**\n     * Enable the bit at the given index.\n     *\n     * @param bits A spread of all the bits to enable.\n     * @returns Reference to self (for method chaining).\n     */\n    enable(...bits) {\n        for (const bit of bits) {\n            assert(bit);\n            /* Casts the result to an unsigned integer */\n            this._bits |= (1 << bit) >>> 0;\n        }\n        return this;\n    }\n    /**\n     * Enable all bits.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    enableAll() {\n        this._bits = ~0;\n        return this;\n    }\n    /**\n     * Disable the bit at the given index.\n     *\n     * @param bits A spread of all the bits to disable.\n     * @returns Reference to self (for method chaining).\n     */\n    disable(...bits) {\n        for (const bit of bits) {\n            assert(bit);\n            /* Casts the result to an unsigned integer */\n            this._bits &= ~((1 << bit) >>> 0);\n        }\n        return this;\n    }\n    /**\n     * Disable all bits.\n     *\n     * @returns Reference to self (for method chaining).\n     */\n    disableAll() {\n        this._bits = 0;\n        return this;\n    }\n    /**\n     * Checker whether the bit is set or not.\n     *\n     * @param bit The bit to check.\n     * @returns `true` if it's enabled, `false` otherwise.\n     */\n    enabled(bit) {\n        return !!(this._bits & ((1 << bit) >>> 0));\n    }\n}\n", "import { BitSet } from './bitset.js';\n/**\n * Logging levels supported by {@link Logger}.\n */\nexport var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"Info\"] = 0] = \"Info\";\n    LogLevel[LogLevel[\"Warn\"] = 1] = \"Warn\";\n    LogLevel[LogLevel[\"Error\"] = 2] = \"Error\";\n})(LogLevel || (LogLevel = {}));\n/**\n * Logging wrapper.\n *\n * This is used to allow turning on/off:\n *     - `console.log`\n *     - `console.warn`\n *     - `console.error`\n *\n * #### Usage\n *\n * ```js\n * import {Logger, LogLevel, LogTag} from '@wonderlandengine/api';\n *\n * // Create a logger with only the \"error\" and \"warn\" levels activated\n * const logger = new Logger(LogLevel.Warn, LogLevel.Error);\n *\n * // Only the \"error\" and \"warn\" levels are activated,\n * // this message isn't logged.\n * logger.info(LogTag.Component, 'This message is shushed')\n *\n * // Prints 'Hello Error!'\n * logger.error(LogTag.Component, 'Hello Error!');\n *\n * // Prints 'Hello Warning!'\n * logger.warn(LogTag.Component, 'Hello Warning!');\n * ```\n *\n * The log levels can be changed at anytime using the {@link BitSet} api:\n *\n * ```js\n * // Enable the \"info\" level\n * logger.levels.enable(LogLevel.Info);\n * * // Disable the \"warn\" level\n * logger.levels.disable(LogLevel.Warn);\n * ```\n *\n * #### Tags\n *\n * In addition, the logger supports tagging messages:\n *\n * ```js\n * import {Logger, LogLevel, LogTag} from '@wonderlandengine/api';\n *\n * const logger = new Logger(LogLevel.Info);\n *\n * logger.tags.disableAll();\n *\n * // All tags are off, this message isn't logged\n * logger.info(LogTag.Component, 'This message is shushed');\n *\n * logger.tags.enable(LogTag.Component);\n * logger.info(LogTag.Component, 'Hello World!') // Prints 'Hello World!'\n * ```\n *\n * The tagging system gives another layer of control to enable / disable\n * some specific logs.\n */\nexport class Logger {\n    /**\n     * Bitset of enabled levels.\n     *\n     * @hidden\n     */\n    levels = new BitSet();\n    /**\n     * Bitset of enabled tags.\n     *\n     * @hidden\n     */\n    tags = new BitSet().enableAll();\n    /**\n     * Create a new logger instance.\n     *\n     * @param levels Default set of levels to enable.\n     */\n    constructor(...levels) {\n        this.levels.enable(...levels);\n    }\n    /**\n     * Log the message(s) using `console.log`.\n     *\n     * @param tag Tag represented by a positive integer.\n     * @param msg A spread of message to log.\n     * @returns Reference to self (for method chaining).\n     */\n    info(tag, ...msg) {\n        if (this.levels.enabled(LogLevel.Info) && this.tags.enabled(tag)) {\n            console.log(...msg);\n        }\n        return this;\n    }\n    /**\n     * Log the message(s) using `console.warn`.\n     *\n     * @param tag Tag represented by a positive integer.\n     * @param msg A spread of message to log.\n     * @returns Reference to self (for method chaining).\n     */\n    warn(tag, ...msg) {\n        if (this.levels.enabled(LogLevel.Warn) && this.tags.enabled(tag)) {\n            console.warn(...msg);\n        }\n        return this;\n    }\n    /**\n     * Log the message(s) using `console.error`.\n     *\n     * @param tag Tag represented by a positive integer.\n     * @param msg A spread of message to log.\n     * @returns Reference to self (for method chaining).\n     */\n    error(tag, ...msg) {\n        if (this.levels.enabled(LogLevel.Error) && this.tags.enabled(tag)) {\n            console.error(...msg);\n        }\n        return this;\n    }\n}\n", "import { LogTag } from './index.js';\nimport { Type } from './property.js';\nimport { RetainEmitter } from './utils/event.js';\nimport { Logger } from './utils/logger.js';\nimport { inheritProperties, Animation, Component, Material, Mesh, BrokenComponent, Skin, XR, } from './wonderland.js';\n/**\n * Default component parameter value per type.\n */\nconst _componentDefaults = new Map([\n    [Type.Bool, false],\n    [Type.Int, 0],\n    [Type.Float, 0.0],\n    [Type.String, ''],\n    [Type.Enum, undefined],\n    [Type.Object, null],\n    [Type.Mesh, null],\n    [Type.Texture, null],\n    [Type.Material, null],\n    [Type.Animation, null],\n    [Type.Skin, null],\n    [Type.Color, [0.0, 0.0, 0.0, 1.0]],\n]);\n/**\n * Setup the defaults value of the properties on a given\n * component class.\n *\n * @param ctor The component class\n */\nfunction _setupDefaults(ctor) {\n    for (const name in ctor.Properties) {\n        const p = ctor.Properties[name];\n        if (p.type === Type.Enum) {\n            /* Enum default can be a string or an index. Convert to and/or\n             * sanity-check the index. */\n            if (p.values?.length) {\n                /* Don't try to look up the default if the user specified a\n                 * number or we already converted to one. */\n                if (typeof p.default !== 'number') {\n                    /* If undefined, missing element or wrong type this returns\n                     * -1 which becomes 0 below. This matches editor behavior. */\n                    p.default = p.values.indexOf(p.default);\n                }\n                if (p.default < 0 || p.default >= p.values.length) {\n                    p.default = 0;\n                }\n            }\n            else {\n                /* There's no index value that makes sense */\n                p.default = undefined;\n            }\n        }\n        else {\n            p.default = p.default ?? _componentDefaults.get(p.type);\n        }\n        ctor.prototype[name] = p.default;\n    }\n}\n/**\n * Low-level wrapper to interact with the WebAssembly code.\n *\n * @hidden\n */\nexport class WASM {\n    /**\n     * Emscripten worker field.\n     *\n     * @note This api is meant to be used internally.\n     */\n    worker = '';\n    /**\n     * Emscripten wasm field.\n     *\n     * @note This api is meant to be used internally.\n     */\n    wasm = null;\n    /**\n     * Emscripten canvas.\n     *\n     * @note This api is meant to be used internally.\n     */\n    canvas = null;\n    /** Current WebXR  */\n    /**\n     * Emscripten WebXR session.\n     *\n     * @note This api is meant to be used internally.\n     */\n    webxr_session = null;\n    /**\n     * Emscripten WebXR request session callback.\n     *\n     * @note This api is meant to be used internally.\n     */\n    webxr_requestSession = null;\n    /**\n     * Emscripten WebXR offer session callback.\n     *\n     * @note This api is meant to be used internally.\n     */\n    webxr_offerSession = null;\n    /**\n     * Emscripten WebXR frame.\n     *\n     * @note This api is meant to be used internally.\n     */\n    webxr_frame = null;\n    /**\n     * Emscripten current WebXR reference space.\n     *\n     * @note This api is meant to be used internally.\n     */\n    webxr_refSpace = null;\n    /**\n     * Emscripten WebXR reference spaces.\n     *\n     * @note This api is meant to be used internally.\n     */\n    webxr_refSpaces = null;\n    /**\n     * Emscripten WebXR current reference space type.\n     *\n     * @note This api is meant to be used internally.\n     */\n    webxr_refSpaceType = null;\n    /**\n     * Emscripten WebXR GL projection layer.\n     *\n     * @note This api is meant to be used internally.\n     */\n    webxr_baseLayer = null;\n    /**\n     * Emscripten WebXR framebuffer scale factor.\n     *\n     * @note This api is meant to be used internally.\n     */\n    webxr_framebufferScaleFactor = 1.0;\n    /**\n     * Emscripten WebXR framebuffer(s).\n     *\n     * @note This api is meant to be used internally.\n     */\n    /* webxr_fbo will not get overwritten if we are rendering to the\n     * default framebuffer, e.g., when using WebXR emulator. */\n    webxr_fbo = 0;\n    /**\n     * Convert a WASM memory view to a JavaScript string.\n     *\n     * @param ptr Pointer start\n     * @param ptrEnd Pointer end\n     * @returns JavaScript string\n     */\n    UTF8ViewToString;\n    /** Logger instance. */\n    _log = new Logger();\n    /** If `true`, logs will not spam the console on error. */\n    _deactivate_component_on_error = false;\n    /** Temporary memory pointer. */\n    _tempMem = null;\n    /** Temporary memory size. */\n    _tempMemSize = 0;\n    /** Temporary float memory view. */\n    _tempMemFloat = null;\n    /** Temporary int memory view. */\n    _tempMemInt = null;\n    /** Temporary uint8 memory view. */\n    _tempMemUint8 = null;\n    /** Temporary uint32 memory view. */\n    _tempMemUint32 = null;\n    /** Temporary uint16 memory view. */\n    _tempMemUint16 = null;\n    /** Loading screen .bin file data */\n    _loadingScreen = null;\n    /** List of callbacks triggered when the scene is loaded. */\n    _sceneLoadedCallback = [];\n    /**\n     * Material definition cache. Each pipeline has its own\n     * associated material definition.\n     */\n    _materialDefinitions = [];\n    /** Image cache. */\n    _images = [];\n    /** Component instances. */\n    _components = [];\n    /** Component Type info. */\n    _componentTypes = [];\n    /** Index per component type name. */\n    _componentTypeIndices = {};\n    /** Wonderland engine instance. */\n    _engine = null;\n    /**\n     * `true` if this runtime is using physx.\n     *\n     * @note This api is meant to be used internally.\n     */\n    _withPhysX = false;\n    /** Decoder for UTF8 `ArrayBuffer` to JavaScript string. */\n    _utf8Decoder = new TextDecoder('utf8');\n    /** JavaScript manager index. */\n    _jsManagerIndexCached = null;\n    /**\n     * Registration index of {@link BrokenComponent}.\n     *\n     * This is used to return dummy instances when a component\n     * isn't registered.\n     *\n     * @hidden\n     */\n    _brokenComponentIndex = 0;\n    /**\n     * Create a new instance of the WebAssembly <> API bridge.\n     *\n     * @param threads `true` if the runtime used has threads support\n     */\n    constructor(threads) {\n        if (threads) {\n            this.UTF8ViewToString = (s, e) => {\n                if (!s)\n                    return '';\n                return this._utf8Decoder.decode(this.HEAPU8.slice(s, e));\n            };\n            return;\n        }\n        this.UTF8ViewToString = (s, e) => {\n            if (!s)\n                return '';\n            return this._utf8Decoder.decode(this.HEAPU8.subarray(s, e));\n        };\n        this._brokenComponentIndex = this._registerComponent(BrokenComponent);\n    }\n    /**\n     * Reset the cache of the library.\n     *\n     * @note Should only be called when tearing down the runtime.\n     */\n    reset() {\n        /* Cancel in-flight images */\n        for (const img of this._images) {\n            if (!img || !img.src)\n                continue;\n            img.src = '';\n            img.onload = null;\n            img.onerror = null;\n        }\n        this._images = [];\n        this.allocateTempMemory(1024);\n        this._materialDefinitions = [];\n        this._components = [];\n        this._componentTypes = [];\n        this._componentTypeIndices = {};\n        this._jsManagerIndexCached = null;\n        this._brokenComponentIndex = this._registerComponent(BrokenComponent);\n    }\n    /**\n     * Checks whether the given component is registered or not.\n     *\n     * @param ctor  A string representing the component typename (e.g., `'cursor-component'`).\n     * @returns `true` if the component is registered, `false` otherwise.\n     */\n    isRegistered(type) {\n        return type in this._componentTypeIndices;\n    }\n    /**\n     * Register a legacy component in this Emscripten instance.\n     *\n     * @note This api is meant to be used internally.\n     *\n     * @param typeName The name of the component.\n     * @param params An object containing the parameters (properties).\n     * @param object The object's prototype.\n     * @returns The registration index\n     */\n    _registerComponentLegacy(typeName, params, object) {\n        const ctor = class CustomComponent extends Component {\n        };\n        ctor.TypeName = typeName;\n        ctor.Properties = params;\n        Object.assign(ctor.prototype, object);\n        return this._registerComponent(ctor);\n    }\n    /**\n     * Register a class component in this Emscripten instance.\n     *\n     * @note This api is meant to be used internally.\n     *\n     * @param ctor The class to register.\n     * @returns The registration index.\n     */\n    _registerComponent(ctor) {\n        if (!ctor.TypeName)\n            throw new Error('no name provided for component.');\n        if (!ctor.prototype._triggerInit) {\n            throw new Error(`registerComponent(): Component ${ctor.TypeName} must extend Component`);\n        }\n        inheritProperties(ctor);\n        _setupDefaults(ctor);\n        const typeIndex = ctor.TypeName in this._componentTypeIndices\n            ? this._componentTypeIndices[ctor.TypeName]\n            : this._componentTypes.length;\n        this._componentTypes[typeIndex] = ctor;\n        this._componentTypeIndices[ctor.TypeName] = typeIndex;\n        if (ctor === BrokenComponent)\n            return typeIndex;\n        this._log.info(LogTag.Engine, 'Registered component', ctor.TypeName, `(class ${ctor.name})`, 'with index', typeIndex);\n        if (ctor.onRegister)\n            ctor.onRegister(this._engine);\n        return typeIndex;\n    }\n    /**\n     * Allocate the requested amount of temporary memory\n     * in this WASM instance.\n     *\n     * @param size The number of bytes to allocate\n     */\n    allocateTempMemory(size) {\n        this._log.info(LogTag.Engine, 'Allocating temp mem:', size);\n        this._tempMemSize = size;\n        if (this._tempMem)\n            this._free(this._tempMem);\n        this._tempMem = this._malloc(this._tempMemSize);\n        this.updateTempMemory();\n    }\n    /**\n     * @todo: Delete this and only keep `allocateTempMemory`\n     *\n     * @param size Number of bytes to allocate\n     */\n    requireTempMem(size) {\n        if (this._tempMemSize >= size)\n            return;\n        /* Grow in 1kb increments */\n        this.allocateTempMemory(Math.ceil(size / 1024) * 1024);\n    }\n    /**\n     * Update the temporary memory views. This must be called whenever the\n     * temporary memory address changes.\n     *\n     * @note This api is meant to be used internally.\n     */\n    updateTempMemory() {\n        this._tempMemFloat = new Float32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2);\n        this._tempMemInt = new Int32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2);\n        this._tempMemUint32 = new Uint32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2);\n        this._tempMemUint16 = new Uint16Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 1);\n        this._tempMemUint8 = new Uint8Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize);\n    }\n    /**\n     * Returns a uint8 buffer view on temporary WASM memory.\n     *\n     * **Note**: this method might allocate if the requested memory is bigger\n     * than the current temporary memory allocated.\n     *\n     * @param count The number of **elements** required\n     * @returns A {@link TypedArray} over the WASM memory\n     */\n    getTempBufferU8(count) {\n        this.requireTempMem(count);\n        return this._tempMemUint8;\n    }\n    /**\n     * Returns a uint16 buffer view on temporary WASM memory.\n     *\n     * **Note**: this method might allocate if the requested memory is bigger\n     * than the current temporary memory allocated.\n     *\n     * @param count The number of **elements** required\n     * @returns A {@link TypedArray} over the WASM memory\n     */\n    getTempBufferU16(count) {\n        this.requireTempMem(count * 2);\n        return this._tempMemUint16;\n    }\n    /**\n     * Returns a uint32 buffer view on temporary WASM memory.\n     *\n     * **Note**: this method might allocate if the requested memory is bigger\n     * than the current temporary memory allocated.\n     *\n     * @param count The number of **elements** required.\n     * @returns A {@link TypedArray} over the WASM memory.\n     */\n    getTempBufferU32(count) {\n        this.requireTempMem(count * 4);\n        return this._tempMemUint32;\n    }\n    /**\n     * Returns a int32 buffer view on temporary WASM memory.\n     *\n     * **Note**: this method might allocate if the requested memory is bigger\n     * than the current temporary memory allocated.\n     *\n     * @param count The number of **elements** required.\n     * @returns A {@link TypedArray} over the WASM memory.\n     */\n    getTempBufferI32(count) {\n        this.requireTempMem(count * 4);\n        return this._tempMemInt;\n    }\n    /**\n     * Returns a float32 buffer view on temporary WASM memory.\n     *\n     * **Note**: this method might allocate if the requested memory is bigger\n     * than the current temporary memory allocated.\n     *\n     * @param count The number of **elements** required.\n     * @returns A {@link TypedArray} over the WASM memory.\n     */\n    getTempBufferF32(count) {\n        this.requireTempMem(count * 4);\n        return this._tempMemFloat;\n    }\n    /**\n     * Copy the string into temporary WASM memory and retrieve the pointer.\n     *\n     * @note This method will compute the strlen and append a `\\0`.\n     *\n     * @note The result should be used **directly** otherwise it might get\n     * overridden by any next call modifying the temporary memory.\n     *\n     * @param str The string to write to temporary memory\n     * @param byteOffset The starting byte offset in the temporary memory at which\n     *     the string should be written. This is useful when using multiple temporaries.\n     * @return The temporary pointer onto the WASM memory\n     */\n    tempUTF8(str, byteOffset = 0) {\n        const strLen = this.lengthBytesUTF8(str) + 1;\n        this.requireTempMem(strLen + byteOffset);\n        const ptr = this._tempMem + byteOffset;\n        this.stringToUTF8(str, ptr, strLen);\n        return ptr;\n    }\n    /**\n     * Return the index of the component type.\n     *\n     * @note This method uses malloc and copies the string\n     * to avoid overwriting caller's temporary data.\n     *\n     * @param type The type\n     * @return The component type index\n     */\n    _typeIndexFor(type) {\n        const lengthBytes = this.lengthBytesUTF8(type) + 1;\n        const mem = this._malloc(lengthBytes);\n        this.stringToUTF8(type, mem, lengthBytes);\n        const componentType = this._wl_get_component_manager_index(mem);\n        this._free(mem);\n        return componentType;\n    }\n    /**\n     * Return the name of component type stored at the given index.\n     *\n     * @param typeIndex The type index\n     * @return The name as a string\n     */\n    _typeNameFor(typeIndex) {\n        return this.UTF8ToString(this._wl_component_manager_name(typeIndex));\n    }\n    /**\n     * Returns `true` if the runtime supports physx or not.\n     */\n    get withPhysX() {\n        return this._withPhysX;\n    }\n    /** JavaScript manager index. */\n    get _jsManagerIndex() {\n        if (this._jsManagerIndexCached === null) {\n            this._jsManagerIndexCached = this._typeIndexFor('js');\n        }\n        return this._jsManagerIndexCached;\n    }\n    /**\n     * Set the engine instance holding this bridge.\n     *\n     * @note This api is meant to be used internally.\n     *\n     * @param engine The engine instance.\n     */\n    _setEngine(engine) {\n        this._engine = engine;\n    }\n    /* WebAssembly to JS call bridge. */\n    _wljs_xr_session_start(mode) {\n        if (this._engine.xr === null) {\n            this._engine.xr = new XR(this, mode);\n            this._engine.onXRSessionStart.notify(this.webxr_session, mode);\n        }\n    }\n    _wljs_xr_session_end() {\n        const startEmitter = this._engine.onXRSessionStart;\n        if (startEmitter instanceof RetainEmitter)\n            startEmitter.reset();\n        this._engine.onXRSessionEnd.notify();\n        this._engine.xr = null;\n    }\n    _wljs_xr_disable() {\n        /* @todo This could directly be fully handled in JS. */\n        this._engine.arSupported = false;\n        this._engine.vrSupported = false;\n    }\n    _wljs_allocate(numComponents) {\n        this._components = new Array(numComponents);\n    }\n    _wljs_init(withPhysX) {\n        this._withPhysX = withPhysX;\n        /* Target memory for JS API functions that return arrays */\n        this.allocateTempMemory(1024);\n    }\n    _wljs_reallocate(numComponents) {\n        if (numComponents > this._components.length) {\n            this._components.length = numComponents;\n        }\n    }\n    _wljs_scene_add_material_definition(definitionId) {\n        const definition = new Map();\n        /* Cache material definition for faster read/write */\n        const nbParams = this._wl_material_definition_get_count(definitionId);\n        for (let i = 0; i < nbParams; ++i) {\n            const name = this.UTF8ToString(this._wl_material_definition_get_param_name(definitionId, i));\n            const t = this._wl_material_definition_get_param_type(definitionId, i);\n            definition.set(name, {\n                index: i,\n                type: {\n                    type: t & 0xff,\n                    componentCount: (t >> 8) & 0xff,\n                    metaType: (t >> 16) & 0xff,\n                },\n            });\n        }\n        this._materialDefinitions[definitionId] = definition;\n    }\n    _wljs_set_component_param_bool(c, p, pe, v) {\n        const param = this.UTF8ViewToString(p, pe);\n        this._components[c][param] = v !== 0;\n    }\n    _wljs_set_component_param_int(c, p, pe, v) {\n        const param = this.UTF8ViewToString(p, pe);\n        this._components[c][param] = v;\n    }\n    _wljs_set_component_param_float(c, p, pe, v) {\n        const param = this.UTF8ViewToString(p, pe);\n        this._components[c][param] = v;\n    }\n    _wljs_set_component_param_string(c, p, pe, v, ve) {\n        const param = this.UTF8ViewToString(p, pe);\n        const value = this.UTF8ViewToString(v, ve);\n        this._components[c][param] = value;\n    }\n    _wljs_set_component_param_color(c, p, pe, v) {\n        const param = this.UTF8ViewToString(p, pe);\n        this._components[c][param] = new Float32Array([0, 8, 16, 24].map((s) => ((v >>> s) & 0xff) / 255.0));\n    }\n    _wljs_set_component_param_object(c, p, pe, v) {\n        const param = this.UTF8ViewToString(p, pe);\n        this._components[c][param] =\n            v > 0 ? this._engine.wrapObject(v) : null;\n    }\n    _wljs_set_component_param_mesh(c, p, pe, v) {\n        const param = this.UTF8ViewToString(p, pe);\n        this._components[c][param] =\n            v > 0 ? new Mesh(this._engine, v) : null;\n    }\n    _wljs_set_component_param_texture(c, p, pe, v) {\n        const param = this.UTF8ViewToString(p, pe);\n        this._components[c][param] =\n            v > 0 ? this._engine.textures.wrap(v) : null;\n    }\n    _wljs_set_component_param_material(c, p, pe, v) {\n        const param = this.UTF8ViewToString(p, pe);\n        this._components[c][param] =\n            v > 0 ? new Material(this._engine, v) : null;\n    }\n    _wljs_set_component_param_animation(c, p, pe, v) {\n        const param = this.UTF8ViewToString(p, pe);\n        this._components[c][param] =\n            v > 0 ? new Animation(this._engine, v) : null;\n    }\n    _wljs_set_component_param_skin(c, p, pe, v) {\n        const param = this.UTF8ViewToString(p, pe);\n        this._components[c][param] =\n            v > 0 ? new Skin(this._engine, v) : null;\n    }\n    _wljs_get_component_type_index(namePtr, nameEndPtr) {\n        const typename = this.UTF8ViewToString(namePtr, nameEndPtr);\n        const index = this._componentTypeIndices[typename];\n        if (index === undefined) {\n            return this._brokenComponentIndex;\n        }\n        return index;\n    }\n    _wljs_component_create(jsManagerIndex, index, id, type, object) {\n        const ctor = this._componentTypes[type];\n        if (!ctor) {\n            throw new Error(`Type index ${type} isn't registered`);\n        }\n        let component = null;\n        try {\n            component = new ctor();\n        }\n        catch (e) {\n            this._log.error(LogTag.Component, `Exception during instantiation of component ${ctor.TypeName}`);\n            this._log.error(LogTag.Component, e);\n            component = new BrokenComponent(this._engine);\n        }\n        /* Sets the manager and identifier from the outside, to simplify the user's constructor. */\n        /* @ts-ignore */\n        component._engine = this._engine;\n        component._manager = jsManagerIndex;\n        component._id = id;\n        component._object = this._engine.wrapObject(object);\n        try {\n            component.resetProperties();\n        }\n        catch (e) {\n            this._log.error(LogTag.Component, `Exception during ${component.type} resetProperties() on object ${component.object.name}`);\n            this._log.error(LogTag.Component, e);\n        }\n        this._components[index] = component;\n        return component;\n    }\n    _wljs_component_init(component) {\n        const c = this._components[component];\n        c._triggerInit();\n    }\n    _wljs_component_update(component, dt) {\n        const c = this._components[component];\n        c._triggerUpdate(dt);\n    }\n    _wljs_component_onActivate(component) {\n        const c = this._components[component];\n        if (c)\n            c._triggerOnActivate();\n    }\n    _wljs_component_onDeactivate(component) {\n        const c = this._components[component];\n        c._triggerOnDeactivate();\n    }\n    _wljs_component_onDestroy(component) {\n        const c = this._components[component];\n        c._triggerOnDestroy();\n    }\n    _wljs_swap(a, b) {\n        const componentA = this._components[a];\n        this._components[a] = this._components[b];\n        this._components[b] = componentA;\n    }\n    _wljs_copy(src, dst) {\n        const destComp = this._components[dst];\n        try {\n            destComp.copy(this._components[src]);\n        }\n        catch (e) {\n            this._log.error(LogTag.Component, `Exception during ${destComp.type} copy() on object ${destComp.object.name}`);\n            this._log.error(LogTag.Component, e);\n        }\n    }\n}\n/*\n * Api <> Runtime compatibility.\n *\n * Some features exposed in the API are only available from a specific\n * runtime version.\n *\n * Every added feature must throw by default. If the runtime loaded\n * has the specific feature, the method will be overwritten by Emscripten\n * upon loading.\n */\nfunction throwInvalidRuntime(version) {\n    return function () {\n        throw new Error(`Feature added in version ${version}.` +\n            `\\n\\t\u2192 Please use a Wonderland Engine editor version >= ${version}`);\n    };\n}\nconst requireRuntime1_1_1 = throwInvalidRuntime('1.1.1');\nconst requireRuntime1_1_5 = throwInvalidRuntime('1.1.5');\n/** @todo: Remove at 1.2.0 */\nWASM.prototype._wl_physx_component_get_offsetTranslation = requireRuntime1_1_1;\nWASM.prototype._wl_physx_component_set_offsetTranslation = requireRuntime1_1_1;\nWASM.prototype._wl_physx_component_get_offsetTransform = requireRuntime1_1_1;\nWASM.prototype._wl_physx_component_set_offsetRotation = requireRuntime1_1_1;\nWASM.prototype._wl_object_clone = requireRuntime1_1_1;\nWASM.prototype._wl_physx_component_set_sleepOnActivate = requireRuntime1_1_5;\nWASM.prototype._wl_physx_component_get_sleepOnActivate = requireRuntime1_1_5;\nWASM.prototype.webxr_offerSession = requireRuntime1_1_5;\n", "/**\n * This file is automatically generated.\n *\n * **Do not** modify this file directly, but instead update\n * the 'write-version.mjs' script.\n */\n/** Version of this API. */\nexport const APIVersion = {\n    major: 1,\n    minor: 1,\n    patch: 5,\n    rc: 0\n};\n", "import { Component, Type } from '@wonderlandengine/api';\n/**\n * 8thwall camera component.\n *\n * Sets up the 8thwall pipeline and retrieves tracking events to place an\n * object at the location of the tracked AR camera / mobile device.\n *\n * Use this for SLAM tracking based on 8thwall.\n *\n * Make sure to enable 8thwall in \"Project Settings\" > \"AR\". See also the\n * [AR Getting Started Guide](/getting-started/quick-start-ar)\n *\n *\n * Currently only supports world-tracking (SLAM) using BACK camera.\n *\n * - remove any occurrences of the old 8thwall-camera component in the editor\n * - Add this component to NonVrCamera\n *\n * IMPORTANT!\n * - until it get's fixed, select 'customIndexHtml' in the project settings\n * - open a generated index.html and crossorigin=\"anonymous\" attribute to the <script> tag where //apps.8thwall.com/xrweb is loaded\n *\n *\n * ######### Using UI overlays #############\n * By default, this component renders own UI to give the user feedback about rejected permissions or tracking errors.\n * It can be changed by enabling useCustomUIOverlays flag.\n *\n * If useCustomUIOverlays is enabled, you are expected handle the following events dispatched by the window object:\n * - \"8thwall-request-user-interaction\" - used only on iOS safari. Request a user to perform and interaction with the page so that javascript is allowed to allowed to request a motion/camera/mic permissions.\n *  Make sure the window object is dispatching an '8thwall-safe-to-request-permissions' event after interaction has happened.\n * ```\n * <button onclick=\"window.dispatchEvent(new Event('8thwall-safe-to-request-permissions'))\">Allow Sensors</button>\n * ```\n *\n * - \"8thwall-permission-fail\" - user rejected any of the permissions\n *\n * - \"8thwall-error\" - runtime 8thwall error occurred\n */\nclass ARCamera8thwall extends Component {\n    static TypeName = '8thwall-camera';\n    static Properties = {\n        /** Override the WL html overlays for handling camera/motion permissions and error handling */\n        useCustomUIOverlays: { type: Type.Bool, default: false },\n    };\n    /* 8thwall camera pipeline module name */\n    name = 'wonderland-engine-8thwall-camera';\n    started = false;\n    view = null; // cache camera\n    position = [0, 0, 0]; // cache 8thwall cam position\n    rotation = [0, 0, 0, -1]; // cache 8thwall cam rotation\n    glTextureRenderer = null; // cache XR8.GlTextureRenderer.pipelineModule\n    promptForDeviceMotion() {\n        return new Promise(async (resolve, reject) => {\n            // Tell anyone who's interested that we want to get some user interaction\n            window.dispatchEvent(new Event('8thwall-request-user-interaction'));\n            // Wait until someone response that user interaction happened\n            window.addEventListener('8thwall-safe-to-request-permissions', async () => {\n                try {\n                    const motionEvent = await DeviceMotionEvent.requestPermission();\n                    resolve(motionEvent);\n                }\n                catch (exception) {\n                    reject(exception);\n                }\n            });\n        });\n    }\n    async getPermissions() {\n        // iOS \"feature\". If we want to request the DeviceMotion permission, user has to interact with the page at first (touch it).\n        // If there was no interaction done so far, we will render a HTML overlay with would get the user to interact with the screen\n        if (DeviceMotionEvent && DeviceMotionEvent.requestPermission) {\n            try {\n                const result = await DeviceMotionEvent.requestPermission();\n                // The user must have rejected the motion event on previous page load. (safari remembers this choice).\n                if (result !== 'granted') {\n                    throw new Error('MotionEvent');\n                }\n            }\n            catch (exception) {\n                // User had no interaction with the page so far\n                if (exception.name === 'NotAllowedError') {\n                    const motionEvent = await this.promptForDeviceMotion();\n                    if (motionEvent !== 'granted') {\n                        throw new Error('MotionEvent');\n                    }\n                }\n                else {\n                    throw new Error('MotionEvent');\n                }\n            }\n        }\n        try {\n            // make sure we get the camera stream\n            const stream = await navigator.mediaDevices.getUserMedia({\n                video: true,\n                audio: true,\n            });\n            // If we successfully acquired the camera stream - we can stop it and wait until 8thwall requests it again\n            stream.getTracks().forEach((track) => {\n                track.stop();\n            });\n        }\n        catch (exception) {\n            throw new Error('Camera');\n        }\n    }\n    init() {\n        this.view = this.object.getComponent('view');\n        this.onUpdate = this.onUpdate.bind(this);\n        this.onAttach = this.onAttach.bind(this);\n        this.onException = this.onException.bind(this);\n        this.onCameraStatusChange = this.onCameraStatusChange.bind(this);\n    }\n    async start() {\n        this.view = this.object.getComponent('view');\n        if (!this.useCustomUIOverlays) {\n            OverlaysHandler.init();\n        }\n        try {\n            await this.getPermissions();\n        }\n        catch (error) {\n            // User did not grant the camera or motionEvent permissions\n            window.dispatchEvent(new CustomEvent('8thwall-permission-fail', { detail: error }));\n            return;\n        }\n        await this.waitForXR8();\n        XR8.XrController.configure({\n            disableWorldTracking: false,\n        });\n        this.glTextureRenderer = XR8.GlTextureRenderer.pipelineModule();\n        XR8.addCameraPipelineModules([\n            this.glTextureRenderer,\n            XR8.XrController.pipelineModule(),\n            this,\n        ]);\n        const config = {\n            cameraConfig: {\n                direction: XR8.XrConfig.camera().BACK,\n            },\n            canvas: Module.canvas,\n            allowedDevices: XR8.XrConfig.device().ANY,\n            ownRunLoop: false,\n        };\n        XR8.run(config);\n    }\n    /**\n     * @private\n     * 8thwall pipeline function\n     */\n    onAttach(params) {\n        this.started = true;\n        this.engine.scene.colorClearEnabled = false;\n        const gl = Module.ctx;\n        const rot = this.object.rotationWorld;\n        const pos = this.object.getTranslationWorld([]);\n        this.position = Array.from(pos);\n        this.rotation = Array.from(rot);\n        XR8.XrController.updateCameraProjectionMatrix({\n            origin: { x: pos[0], y: pos[1], z: pos[2] },\n            facing: { x: rot[0], y: rot[1], z: rot[2], w: rot[3] },\n            cam: {\n                pixelRectWidth: Module.canvas.width,\n                pixelRectHeight: Module.canvas.height,\n                nearClipPlane: this.view.near,\n                farClipPlane: this.view.far,\n            },\n        });\n        this.engine.scene.onPreRender.push(() => {\n            gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);\n            XR8.runPreRender(Date.now());\n            XR8.runRender(); // <--- tell 8thwall to do it's thing (alternatively call this.glTextureRenderer.onRender() if you only care about camera feed )\n        });\n        this.engine.scene.onPostRender.push(() => {\n            XR8.runPostRender(Date.now());\n        });\n    }\n    /**\n     * @private\n     * 8thwall pipeline function\n     */\n    onCameraStatusChange(e) {\n        if (e && e.status === 'failed') {\n            this.onException(new Error(`Camera failed with status: ${e.status}`));\n        }\n    }\n    /**\n     * @private\n     * 8thwall pipeline function\n     */\n    onUpdate(e) {\n        if (!e.processCpuResult.reality)\n            return;\n        const { rotation, position, intrinsics } = e.processCpuResult.reality;\n        this.rotation[0] = rotation.x;\n        this.rotation[1] = rotation.y;\n        this.rotation[2] = rotation.z;\n        this.rotation[3] = rotation.w;\n        this.position[0] = position.x;\n        this.position[1] = position.y;\n        this.position[2] = position.z;\n        if (intrinsics) {\n            const projectionMatrix = this.view.projectionMatrix;\n            for (let i = 0; i < 16; i++) {\n                /* Some processCpuResult.reality.intrinsics are set to Infinity,\n                 * which brakes our projectionMatrix. So we just filter those elements out. */\n                if (Number.isFinite(intrinsics[i])) {\n                    projectionMatrix[i] = intrinsics[i];\n                }\n            }\n        }\n        if (position && rotation) {\n            this.object.rotationWorld = this.rotation;\n            this.object.setTranslationWorld(this.position);\n        }\n    }\n    /**\n     * @private\n     * 8thwall pipeline function\n     */\n    onException(error) {\n        console.error('8thwall exception:', error);\n        window.dispatchEvent(new CustomEvent('8thwall-error', { detail: error }));\n    }\n    waitForXR8() {\n        return new Promise((resolve, _rej) => {\n            if (window.XR8) {\n                resolve();\n            }\n            else {\n                window.addEventListener('xrloaded', () => resolve());\n            }\n        });\n    }\n}\nexport { ARCamera8thwall };\nconst OverlaysHandler = {\n    init: function () {\n        this.handleRequestUserInteraction = this.handleRequestUserInteraction.bind(this);\n        this.handlePermissionFail = this.handlePermissionFail.bind(this);\n        this.handleError = this.handleError.bind(this);\n        window.addEventListener('8thwall-request-user-interaction', this.handleRequestUserInteraction);\n        window.addEventListener('8thwall-permission-fail', this.handlePermissionFail);\n        window.addEventListener('8thwall-error', this.handleError);\n    },\n    handleRequestUserInteraction: function () {\n        const overlay = this.showOverlay(requestPermissionOverlay);\n        window.addEventListener('8thwall-safe-to-request-permissions', () => {\n            overlay.remove();\n        });\n    },\n    handlePermissionFail: function (_reason) {\n        this.showOverlay(failedPermissionOverlay);\n    },\n    handleError: function (_error) {\n        this.showOverlay(runtimeErrorOverlay);\n    },\n    showOverlay: function (htmlContent) {\n        const overlay = document.createElement('div');\n        overlay.innerHTML = htmlContent;\n        document.body.appendChild(overlay);\n        return overlay;\n    },\n};\nconst requestPermissionOverlay = `\r\n<style>\r\n  #request-permission-overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 999;\r\n    color: #fff;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    text-align: center;\r\n    font-family: sans-serif;\r\n  }\r\n\r\n  .request-permission-overlay_title {\r\n    margin: 30px;\r\n    font-size: 32px;\r\n  }\r\n\r\n  .request-permission-overlay_button {\r\n    background-color: #e80086;\r\n    font-size: 22px;\r\n    padding: 10px 30px;\r\n    color: #fff;\r\n    border-radius: 15px;\r\n    border: none;\r\n  }\r\n</style>\r\n\r\n<div id=\"request-permission-overlay\">\r\n  <div class=\"request-permission-overlay_title\">This app requires to use your camera and motion sensors</div>\r\n\r\n  <button class=\"request-permission-overlay_button\" onclick=\"window.dispatchEvent(new Event('8thwall-safe-to-request-permissions'))\">OK</button>\r\n</div>`;\nconst failedPermissionOverlay = `\r\n<style>\r\n  #failed-permission-overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 999;\r\n    color: #fff;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    text-align: center;\r\n    font-family: sans-serif;\r\n  }\r\n\r\n  .failed-permission-overlay_title {\r\n    margin: 30px;\r\n    font-size: 32px;\r\n  }\r\n\r\n  .failed-permission-overlay_button {\r\n    background-color: #e80086;\r\n    font-size: 22px;\r\n    padding: 10px 30px;\r\n    color: #fff;\r\n    border-radius: 15px;\r\n    border: none;\r\n  }\r\n</style>\r\n\r\n<div id=\"failed-permission-overlay\">\r\n  <div class=\"failed-permission-overlay_title\">Failed to grant permissions. Reset the the permissions and refresh the page.</div>\r\n\r\n  <button class=\"failed-permission-overlay_button\" onclick=\"window.location.reload()\">Refresh the page</button>\r\n</div>`;\nconst runtimeErrorOverlay = `\r\n<style>\r\n  #wall-error-overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 999;\r\n    color: #fff;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    text-align: center;\r\n    font-family: sans-serif;\r\n  }\r\n\r\n  .wall-error-overlay_title {\r\n    margin: 30px;\r\n    font-size: 32px;\r\n  }\r\n\r\n  .wall-error-overlay_button {\r\n    background-color: #e80086;\r\n    font-size: 22px;\r\n    padding: 10px 30px;\r\n    color: #fff;\r\n    border-radius: 15px;\r\n    border: none;\r\n  }\r\n</style>\r\n\r\n<div id=\"wall-error-overlay\">\r\n  <div class=\"wall-error-overlay_title\">Error has occurred. Please reload the page</div>\r\n\r\n  <button class=\"wall-error-overlay_button\" onclick=\"window.location.reload()\">Reload</button>\r\n</div>`;\n", "const tempVec = new Float32Array(3);\nconst tempQuat = new Float32Array(4);\nexport function setXRRigidTransformLocal(o, transform) {\n    const r = transform.orientation;\n    tempQuat[0] = r.x;\n    tempQuat[1] = r.y;\n    tempQuat[2] = r.z;\n    tempQuat[3] = r.w;\n    const t = transform.position;\n    tempVec[0] = t.x;\n    tempVec[1] = t.y;\n    tempVec[2] = t.z;\n    o.resetTranslationRotation();\n    o.transformLocal.set(tempQuat);\n    o.translate(tempVec);\n}\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Emitter } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { setXRRigidTransformLocal } from './utils/webxr.js';\nvar tempVec3 = new Float32Array(3);\nvar tempQuat = new Float32Array(4);\n/**\n * Sets the location of the object to the location of an XRAnchor\n *\n * Create anchors using the `Anchor.create()` static function.\n *\n * Example for use with cursor:\n * ```js\n * cursorTarget.onClick.add((object, cursor, originalEvent) => {\n *     /* Only events in XR will have a frame attached *\\/\n *     if(!originalEvent.frame) return;\n *     Anchor.create(anchorObject, {uuid: id, persist: true}, originalEvent.frame);\n * });\n * ```\n */\nclass Anchor extends Component {\n    static TypeName = 'anchor';\n    /* Static management of all anchors */\n    static #anchors = [];\n    persist = false;\n    /** Unique identifier to load a persistent anchor from, or empty/null if unknown */\n    uuid = null;\n    /** The xrAnchor, if created */\n    xrAnchor = null;\n    /** Emits events when the anchor is created either by being restored or newly created */\n    onCreate = new Emitter();\n    /** Whether the anchor is currently being tracked */\n    visible = false;\n    /** Emits an event when this anchor starts tracking */\n    onTrackingFound = new Emitter();\n    /** Emits an event when this anchor stops tracking */\n    onTrackingLost = new Emitter();\n    /** XRFrame to use for creating the anchor */\n    xrFrame = null;\n    /** XRHitTestResult to use for creating the anchor */\n    xrHitResult = null;\n    /** Retrieve all anchors of the current scene */\n    static getAllAnchors() {\n        return Anchor.#anchors;\n    }\n    static #addAnchor(anchor) {\n        Anchor.#anchors.push(anchor);\n    }\n    static #removeAnchor(anchor) {\n        const index = Anchor.#anchors.indexOf(anchor);\n        if (index < 0)\n            return;\n        Anchor.#anchors.splice(index, 1);\n    }\n    /**\n     * Create a new anchor\n     *\n     * @param o Object to attach the component to\n     * @param params Parameters for the anchor component\n     * @param frame XRFrame to use for anchor cration, if null, will use the current frame if available\n     * @param hitResult Optional hit-test result to create the anchor with\n     * @returns Promise for the newly created anchor component\n     */\n    static create(o, params, frame, hitResult) {\n        const a = o.addComponent(Anchor, { ...params, active: false });\n        if (a === null)\n            return null;\n        a.xrHitResult = hitResult ?? null;\n        a.xrFrame = frame ?? null;\n        a.onCreate.once(() => ((a.xrFrame = null), (a.xrHitResult = null)));\n        a.active = true;\n        return a.onCreate.promise();\n    }\n    #getFrame() {\n        return this.xrFrame || this.engine.xr.frame;\n    }\n    async #createAnchor() {\n        if (!this.#getFrame().createAnchor) {\n            throw new Error(\"Cannot create anchor - anchors not supported, did you enable the 'anchors' WebXR feature?\");\n        }\n        if (this.xrHitResult) {\n            if (this.xrHitResult.createAnchor === undefined) {\n                throw new Error('Requested anchor on XRHitTestResult, but WebXR hit-test feature is not available.');\n            }\n            return this.xrHitResult.createAnchor();\n        }\n        else {\n            this.object.getTranslationWorld(tempVec3);\n            tempQuat.set(this.object.rotationWorld);\n            const rotation = tempQuat;\n            const anchorPose = new XRRigidTransform({ x: tempVec3[0], y: tempVec3[1], z: tempVec3[2] }, { x: rotation[0], y: rotation[1], z: rotation[2], w: rotation[3] });\n            return this.#getFrame()?.createAnchor(anchorPose, this.engine.xr.currentReferenceSpace);\n        }\n    }\n    #onAddAnchor(anchor) {\n        if (!anchor)\n            return;\n        if (this.persist) {\n            if (anchor.requestPersistentHandle !== undefined) {\n                anchor.requestPersistentHandle().then((uuid) => {\n                    this.uuid = uuid;\n                    this.#onCreate(anchor);\n                    Anchor.#addAnchor(this);\n                });\n                return;\n            }\n            else {\n                console.warn('anchor: Persistent anchors are not supported by your client. Ignoring persist property.');\n            }\n        }\n        this.#onCreate(anchor);\n    }\n    #onRestoreAnchor(anchor) {\n        this.#onCreate(anchor);\n    }\n    #onCreate(anchor) {\n        this.xrAnchor = anchor;\n        this.onCreate.notify(this);\n    }\n    start() {\n        if (this.uuid && this.engine.xr) {\n            this.persist = true;\n            if (this.engine.xr.session.restorePersistentAnchor === undefined) {\n                console.warn('anchor: Persistent anchors are not supported by your client. Ignoring persist property.');\n            }\n            this.engine.xr.session.restorePersistentAnchor(this.uuid).then(this.#onRestoreAnchor.bind(this));\n        }\n        else if (this.#getFrame()) {\n            this.#createAnchor().then(this.#onAddAnchor.bind(this));\n        }\n        else {\n            throw new Error('Anchors can only be created during the XR frame in an active XR session');\n        }\n    }\n    update() {\n        if (!this.xrAnchor || !this.engine.xr)\n            return;\n        /* We need to use the actual frame from the draw callback here */\n        const pose = this.engine.xr.frame.getPose(this.xrAnchor.anchorSpace, this.engine.xr.currentReferenceSpace);\n        const visible = !!pose;\n        if (visible != this.visible) {\n            this.visible = visible;\n            (visible ? this.onTrackingFound : this.onTrackingLost).notify(this);\n        }\n        if (pose) {\n            setXRRigidTransformLocal(this.object, pose.transform);\n        }\n    }\n    onDestroy() {\n        Anchor.#removeAnchor(this);\n    }\n}\n__decorate([\n    property.bool(false)\n], Anchor.prototype, \"persist\", void 0);\n__decorate([\n    property.string()\n], Anchor.prototype, \"uuid\", void 0);\nexport { Anchor };\n", "import { Component, Emitter } from '@wonderlandengine/api';\n/**\n * Click/hover/move/button target for [cursor](#cursor).\n *\n * To trigger code when clicking, hovering, unhovering, moving cursor, pressing\n * cursor button or releasing cursor button, use `.addClickFunction(f)`,\n * `.addHoverFunction(f)`, `.addUnHoverFunction(f)`,\n * `.addMoveFunction(f)`, `.addDownFunction(f)` and\n * `.addUpFunction(f)` respectively with any `function f() {}`.\n *\n * To call members on a different component, you can set up a cursor target like\n * so:\n *\n * ```js\n * start: function() {\n *   let target = this.object.addComponent('cursor-target');\n *   target.onClick.add(this.onClick.bind(this));\n * },\n * onClick: function() {\n *   console.log(this.object.name, \"was clicked!\");\n * }\n * ```\n * **Functions:**\n *\n * ```js\n * const target = this.object.getComponent(CursorTarget);\n * const callback = function(object, cursorComponent) {};\n *\n * target.onHover.add(callback);\n * target.onHover.remove(callback);\n *\n * target.onUnHover.add(callback);\n * target.onUnHover.remove(callback);\n *\n * target.onClick.add(callback);\n * target.onClick.remove(callback);\n *\n * target.onMove.add(callback);\n * target.onMove.remove(callback);\n *\n * target.onDown.add(callback);\n * target.onDown.remove(callback);\n *\n * target.onUp.add(callback);\n * target.onUp.remove(callback);\n * ```\n *\n * **Requirements:**\n * - a `collision` component to be attached to the same object.\n *\n * See [Animation Example](/showcase/animation).\n */\nclass CursorTarget extends Component {\n    static TypeName = 'cursor-target';\n    static Properties = {};\n    /** Emitter for events when the target is hovered */\n    onHover = new Emitter();\n    /** Emitter for events when the target is unhovered */\n    onUnhover = new Emitter();\n    /** Emitter for events when the target is clicked */\n    onClick = new Emitter();\n    /** Emitter for events when the cursor moves on the target */\n    onMove = new Emitter();\n    /** Emitter for events when the user pressed the select button on the target */\n    onDown = new Emitter();\n    /** Emitter for events when the user unpressed the select button on the target */\n    onUp = new Emitter();\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    this.onHover.add(f);\n     */\n    addHoverFunction(f) {\n        this.onHover.add(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    this.onHover.remove(f);\n     */\n    removeHoverFunction(f) {\n        this.onHover.remove(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    this.onUnhover.add(f);\n     */\n    addUnHoverFunction(f) {\n        this.onUnhover.add(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    this.onUnhover.remove(f);\n     */\n    removeUnHoverFunction(f) {\n        this.onUnhover.remove(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    this.onClick.add(f);\n     */\n    addClickFunction(f) {\n        this.onClick.add(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    component.onClick.remove(f);\n     */\n    removeClickFunction(f) {\n        this.onClick.remove(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    component.onMove.add(f);\n     */\n    addMoveFunction(f) {\n        this.onMove.add(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    component.onMove.remove(f);\n     */\n    removeMoveFunction(f) {\n        this.onMove.remove(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    component.onDown.add(f);\n     */\n    addDownFunction(f) {\n        this.onDown.add(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    component.onDown.remove(f);\n     */\n    removeDownFunction(f) {\n        this.onDown.remove(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    component.onUp.add(f);\n     */\n    addUpFunction(f) {\n        this.onUp.add(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    component.onUp.remove(f);\n     */\n    removeUpFunction(f) {\n        this.onUp.remove(f);\n    }\n}\nexport { CursorTarget };\n", "/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};", "import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;", "import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;", "import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();", "import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();", "import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();", "import * as glMatrix from \"./common.js\";\nimport * as quat from \"./quat.js\";\nimport * as mat4 from \"./mat4.js\";\n/**\n * Dual Quaternion<br>\n * Format: [real, dual]<br>\n * Quaternion format: XYZW<br>\n * Make sure to have normalized dual quaternions, otherwise the functions may not work as intended.<br>\n * @module quat2\n */\n\n/**\n * Creates a new identity dual quat\n *\n * @returns {quat2} a new dual quaternion [real -> rotation, dual -> translation]\n */\n\nexport function create() {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    dq[0] = 0;\n    dq[1] = 0;\n    dq[2] = 0;\n    dq[4] = 0;\n    dq[5] = 0;\n    dq[6] = 0;\n    dq[7] = 0;\n  }\n\n  dq[3] = 1;\n  return dq;\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat2} a dual quaternion to clone\n * @returns {quat2} new dual quaternion\n * @function\n */\n\nexport function clone(a) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = a[0];\n  dq[1] = a[1];\n  dq[2] = a[2];\n  dq[3] = a[3];\n  dq[4] = a[4];\n  dq[5] = a[5];\n  dq[6] = a[6];\n  dq[7] = a[7];\n  return dq;\n}\n/**\n * Creates a new dual quat initialized with the given values\n *\n * @param {Number} x1 X component\n * @param {Number} y1 Y component\n * @param {Number} z1 Z component\n * @param {Number} w1 W component\n * @param {Number} x2 X component\n * @param {Number} y2 Y component\n * @param {Number} z2 Z component\n * @param {Number} w2 W component\n * @returns {quat2} new dual quaternion\n * @function\n */\n\nexport function fromValues(x1, y1, z1, w1, x2, y2, z2, w2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  dq[4] = x2;\n  dq[5] = y2;\n  dq[6] = z2;\n  dq[7] = w2;\n  return dq;\n}\n/**\n * Creates a new dual quat from the given values (quat and translation)\n *\n * @param {Number} x1 X component\n * @param {Number} y1 Y component\n * @param {Number} z1 Z component\n * @param {Number} w1 W component\n * @param {Number} x2 X component (translation)\n * @param {Number} y2 Y component (translation)\n * @param {Number} z2 Z component (translation)\n * @returns {quat2} new dual quaternion\n * @function\n */\n\nexport function fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  var ax = x2 * 0.5,\n      ay = y2 * 0.5,\n      az = z2 * 0.5;\n  dq[4] = ax * w1 + ay * z1 - az * y1;\n  dq[5] = ay * w1 + az * x1 - ax * z1;\n  dq[6] = az * w1 + ax * y1 - ay * x1;\n  dq[7] = -ax * x1 - ay * y1 - az * z1;\n  return dq;\n}\n/**\n * Creates a dual quat from a quaternion and a translation\n *\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\n * @param {ReadonlyQuat} q a normalized quaternion\n * @param {ReadonlyVec3} t tranlation vector\n * @returns {quat2} dual quaternion receiving operation result\n * @function\n */\n\nexport function fromRotationTranslation(out, q, t) {\n  var ax = t[0] * 0.5,\n      ay = t[1] * 0.5,\n      az = t[2] * 0.5,\n      bx = q[0],\n      by = q[1],\n      bz = q[2],\n      bw = q[3];\n  out[0] = bx;\n  out[1] = by;\n  out[2] = bz;\n  out[3] = bw;\n  out[4] = ax * bw + ay * bz - az * by;\n  out[5] = ay * bw + az * bx - ax * bz;\n  out[6] = az * bw + ax * by - ay * bx;\n  out[7] = -ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Creates a dual quat from a translation\n *\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\n * @param {ReadonlyVec3} t translation vector\n * @returns {quat2} dual quaternion receiving operation result\n * @function\n */\n\nexport function fromTranslation(out, t) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = t[0] * 0.5;\n  out[5] = t[1] * 0.5;\n  out[6] = t[2] * 0.5;\n  out[7] = 0;\n  return out;\n}\n/**\n * Creates a dual quat from a quaternion\n *\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\n * @param {ReadonlyQuat} q the quaternion\n * @returns {quat2} dual quaternion receiving operation result\n * @function\n */\n\nexport function fromRotation(out, q) {\n  out[0] = q[0];\n  out[1] = q[1];\n  out[2] = q[2];\n  out[3] = q[3];\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n/**\n * Creates a new dual quat from a matrix (4x4)\n *\n * @param {quat2} out the dual quaternion\n * @param {ReadonlyMat4} a the matrix\n * @returns {quat2} dual quat receiving operation result\n * @function\n */\n\nexport function fromMat4(out, a) {\n  //TODO Optimize this\n  var outer = quat.create();\n  mat4.getRotation(outer, a);\n  var t = new glMatrix.ARRAY_TYPE(3);\n  mat4.getTranslation(t, a);\n  fromRotationTranslation(out, outer, t);\n  return out;\n}\n/**\n * Copy the values from one dual quat to another\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the source dual quaternion\n * @returns {quat2} out\n * @function\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  return out;\n}\n/**\n * Set a dual quat to the identity dual quaternion\n *\n * @param {quat2} out the receiving quaternion\n * @returns {quat2} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n/**\n * Set the components of a dual quat to the given values\n *\n * @param {quat2} out the receiving quaternion\n * @param {Number} x1 X component\n * @param {Number} y1 Y component\n * @param {Number} z1 Z component\n * @param {Number} w1 W component\n * @param {Number} x2 X component\n * @param {Number} y2 Y component\n * @param {Number} z2 Z component\n * @param {Number} w2 W component\n * @returns {quat2} out\n * @function\n */\n\nexport function set(out, x1, y1, z1, w1, x2, y2, z2, w2) {\n  out[0] = x1;\n  out[1] = y1;\n  out[2] = z1;\n  out[3] = w1;\n  out[4] = x2;\n  out[5] = y2;\n  out[6] = z2;\n  out[7] = w2;\n  return out;\n}\n/**\n * Gets the real part of a dual quat\n * @param  {quat} out real part\n * @param  {ReadonlyQuat2} a Dual Quaternion\n * @return {quat} real part\n */\n\nexport var getReal = quat.copy;\n/**\n * Gets the dual part of a dual quat\n * @param  {quat} out dual part\n * @param  {ReadonlyQuat2} a Dual Quaternion\n * @return {quat} dual part\n */\n\nexport function getDual(out, a) {\n  out[0] = a[4];\n  out[1] = a[5];\n  out[2] = a[6];\n  out[3] = a[7];\n  return out;\n}\n/**\n * Set the real component of a dual quat to the given quaternion\n *\n * @param {quat2} out the receiving quaternion\n * @param {ReadonlyQuat} q a quaternion representing the real part\n * @returns {quat2} out\n * @function\n */\n\nexport var setReal = quat.copy;\n/**\n * Set the dual component of a dual quat to the given quaternion\n *\n * @param {quat2} out the receiving quaternion\n * @param {ReadonlyQuat} q a quaternion representing the dual part\n * @returns {quat2} out\n * @function\n */\n\nexport function setDual(out, q) {\n  out[4] = q[0];\n  out[5] = q[1];\n  out[6] = q[2];\n  out[7] = q[3];\n  return out;\n}\n/**\n * Gets the translation of a normalized dual quat\n * @param  {vec3} out translation\n * @param  {ReadonlyQuat2} a Dual Quaternion to be decomposed\n * @return {vec3} translation\n */\n\nexport function getTranslation(out, a) {\n  var ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3];\n  out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n  out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n  out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  return out;\n}\n/**\n * Translates a dual quat by the given vector\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {quat2} out\n */\n\nexport function translate(out, a, v) {\n  var ax1 = a[0],\n      ay1 = a[1],\n      az1 = a[2],\n      aw1 = a[3],\n      bx1 = v[0] * 0.5,\n      by1 = v[1] * 0.5,\n      bz1 = v[2] * 0.5,\n      ax2 = a[4],\n      ay2 = a[5],\n      az2 = a[6],\n      aw2 = a[7];\n  out[0] = ax1;\n  out[1] = ay1;\n  out[2] = az1;\n  out[3] = aw1;\n  out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;\n  out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;\n  out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;\n  out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;\n  return out;\n}\n/**\n * Rotates a dual quat around the X axis\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {number} rad how far should the rotation be\n * @returns {quat2} out\n */\n\nexport function rotateX(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateX(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\n * Rotates a dual quat around the Y axis\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {number} rad how far should the rotation be\n * @returns {quat2} out\n */\n\nexport function rotateY(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateY(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\n * Rotates a dual quat around the Z axis\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {number} rad how far should the rotation be\n * @returns {quat2} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateZ(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\n * Rotates a dual quat by a given quaternion (a * q)\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {ReadonlyQuat} q quaternion to rotate by\n * @returns {quat2} out\n */\n\nexport function rotateByQuatAppend(out, a, q) {\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3],\n      ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  out[0] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[1] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[2] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[3] = aw * qw - ax * qx - ay * qy - az * qz;\n  ax = a[4];\n  ay = a[5];\n  az = a[6];\n  aw = a[7];\n  out[4] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[5] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[6] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[7] = aw * qw - ax * qx - ay * qy - az * qz;\n  return out;\n}\n/**\n * Rotates a dual quat by a given quaternion (q * a)\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat} q quaternion to rotate by\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @returns {quat2} out\n */\n\nexport function rotateByQuatPrepend(out, q, a) {\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3],\n      bx = a[0],\n      by = a[1],\n      bz = a[2],\n      bw = a[3];\n  out[0] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[1] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[2] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[3] = qw * bw - qx * bx - qy * by - qz * bz;\n  bx = a[4];\n  by = a[5];\n  bz = a[6];\n  bw = a[7];\n  out[4] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[5] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[6] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[7] = qw * bw - qx * bx - qy * by - qz * bz;\n  return out;\n}\n/**\n * Rotates a dual quat around a given axis. Does the normalisation automatically\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @param {Number} rad how far the rotation should be\n * @returns {quat2} out\n */\n\nexport function rotateAroundAxis(out, a, axis, rad) {\n  //Special case for rad = 0\n  if (Math.abs(rad) < glMatrix.EPSILON) {\n    return copy(out, a);\n  }\n\n  var axisLength = Math.hypot(axis[0], axis[1], axis[2]);\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  var bx = s * axis[0] / axisLength;\n  var by = s * axis[1] / axisLength;\n  var bz = s * axis[2] / axisLength;\n  var bw = Math.cos(rad);\n  var ax1 = a[0],\n      ay1 = a[1],\n      az1 = a[2],\n      aw1 = a[3];\n  out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  var ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  out[4] = ax * bw + aw * bx + ay * bz - az * by;\n  out[5] = ay * bw + aw * by + az * bx - ax * bz;\n  out[6] = az * bw + aw * bz + ax * by - ay * bx;\n  out[7] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Adds two dual quat's\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @returns {quat2} out\n * @function\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  return out;\n}\n/**\n * Multiplies two dual quat's\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @returns {quat2} out\n */\n\nexport function multiply(out, a, b) {\n  var ax0 = a[0],\n      ay0 = a[1],\n      az0 = a[2],\n      aw0 = a[3],\n      bx1 = b[4],\n      by1 = b[5],\n      bz1 = b[6],\n      bw1 = b[7],\n      ax1 = a[4],\n      ay1 = a[5],\n      az1 = a[6],\n      aw1 = a[7],\n      bx0 = b[0],\n      by0 = b[1],\n      bz0 = b[2],\n      bw0 = b[3];\n  out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;\n  out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;\n  out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;\n  out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;\n  out[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;\n  out[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;\n  out[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;\n  out[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;\n  return out;\n}\n/**\n * Alias for {@link quat2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a dual quat by a scalar number\n *\n * @param {quat2} out the receiving dual quat\n * @param {ReadonlyQuat2} a the dual quat to scale\n * @param {Number} b amount to scale the dual quat by\n * @returns {quat2} out\n * @function\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  return out;\n}\n/**\n * Calculates the dot product of two dual quat's (The dot product of the real parts)\n *\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = quat.dot;\n/**\n * Performs a linear interpolation between two dual quats's\n * NOTE: The resulting dual quaternions won't always be normalized (The error is most noticeable when t = 0.5)\n *\n * @param {quat2} out the receiving dual quat\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var mt = 1 - t;\n  if (dot(a, b) < 0) t = -t;\n  out[0] = a[0] * mt + b[0] * t;\n  out[1] = a[1] * mt + b[1] * t;\n  out[2] = a[2] * mt + b[2] * t;\n  out[3] = a[3] * mt + b[3] * t;\n  out[4] = a[4] * mt + b[4] * t;\n  out[5] = a[5] * mt + b[5] * t;\n  out[6] = a[6] * mt + b[6] * t;\n  out[7] = a[7] * mt + b[7] * t;\n  return out;\n}\n/**\n * Calculates the inverse of a dual quat. If they are normalized, conjugate is cheaper\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a dual quat to calculate inverse of\n * @returns {quat2} out\n */\n\nexport function invert(out, a) {\n  var sqlen = squaredLength(a);\n  out[0] = -a[0] / sqlen;\n  out[1] = -a[1] / sqlen;\n  out[2] = -a[2] / sqlen;\n  out[3] = a[3] / sqlen;\n  out[4] = -a[4] / sqlen;\n  out[5] = -a[5] / sqlen;\n  out[6] = -a[6] / sqlen;\n  out[7] = a[7] / sqlen;\n  return out;\n}\n/**\n * Calculates the conjugate of a dual quat\n * If the dual quaternion is normalized, this function is faster than quat2.inverse and produces the same result.\n *\n * @param {quat2} out the receiving quaternion\n * @param {ReadonlyQuat2} a quat to calculate conjugate of\n * @returns {quat2} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  out[4] = -a[4];\n  out[5] = -a[5];\n  out[6] = -a[6];\n  out[7] = a[7];\n  return out;\n}\n/**\n * Calculates the length of a dual quat\n *\n * @param {ReadonlyQuat2} a dual quat to calculate length of\n * @returns {Number} length of a\n * @function\n */\n\nexport var length = quat.length;\n/**\n * Alias for {@link quat2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a dual quat\n *\n * @param {ReadonlyQuat2} a dual quat to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = quat.squaredLength;\n/**\n * Alias for {@link quat2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a dual quat\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a dual quaternion to normalize\n * @returns {quat2} out\n * @function\n */\n\nexport function normalize(out, a) {\n  var magnitude = squaredLength(a);\n\n  if (magnitude > 0) {\n    magnitude = Math.sqrt(magnitude);\n    var a0 = a[0] / magnitude;\n    var a1 = a[1] / magnitude;\n    var a2 = a[2] / magnitude;\n    var a3 = a[3] / magnitude;\n    var b0 = a[4];\n    var b1 = a[5];\n    var b2 = a[6];\n    var b3 = a[7];\n    var a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;\n    out[0] = a0;\n    out[1] = a1;\n    out[2] = a2;\n    out[3] = a3;\n    out[4] = (b0 - a0 * a_dot_b) / magnitude;\n    out[5] = (b1 - a1 * a_dot_b) / magnitude;\n    out[6] = (b2 - a2 * a_dot_b) / magnitude;\n    out[7] = (b3 - a3 * a_dot_b) / magnitude;\n  }\n\n  return out;\n}\n/**\n * Returns a string representation of a dual quatenion\n *\n * @param {ReadonlyQuat2} a dual quaternion to represent as a string\n * @returns {String} string representation of the dual quat\n */\n\nexport function str(a) {\n  return \"quat2(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \")\";\n}\n/**\n * Returns whether or not the dual quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat2} a the first dual quaternion.\n * @param {ReadonlyQuat2} b the second dual quaternion.\n * @returns {Boolean} true if the dual quaternions are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];\n}\n/**\n * Returns whether or not the dual quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat2} a the first dual quat.\n * @param {ReadonlyQuat2} b the second dual quat.\n * @returns {Boolean} true if the dual quats are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7));\n}", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Emitter } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { setXRRigidTransformLocal } from './utils/webxr.js';\n/**\n * Sets up a [WebXR Device API \"Hit Test\"](https://immersive-web.github.io/hit-test/)\n * and places the object to the hit location.\n *\n * **Requirements:**\n *  - Specify `'hit-test'` in the required or optional features on the AR button in your html file.\n *    See [Wastepaperbin AR](/showcase/wpb-ar) as an example.\n */\nclass HitTestLocation extends Component {\n    static TypeName = 'hit-test-location';\n    tempScaling = new Float32Array(3);\n    visible = false;\n    xrHitTestSource = null;\n    /** Reference space for creating the hit test when the session starts */\n    xrReferenceSpace = null;\n    /**\n     * For maintaining backwards compatibility: Whether to scale the object to 0 and back.\n     * @deprecated Use onHitLost and onHitFound instead.\n     */\n    scaleObject = true;\n    /** Emits an event when the hit test switches from visible to invisible */\n    onHitLost = new Emitter();\n    /** Emits an event when the hit test switches from invisible to visible */\n    onHitFound = new Emitter();\n    onSessionStartCallback = null;\n    onSessionEndCallback = null;\n    start() {\n        this.onSessionStartCallback = this.onXRSessionStart.bind(this);\n        this.onSessionEndCallback = this.onXRSessionEnd.bind(this);\n        if (this.scaleObject) {\n            this.tempScaling.set(this.object.scalingLocal);\n            this.object.scale([0, 0, 0]);\n            this.onHitLost.add(() => {\n                this.tempScaling.set(this.object.scalingLocal);\n                this.object.scale([0, 0, 0]);\n            });\n            this.onHitFound.add(() => {\n                this.object.scalingLocal.set(this.tempScaling);\n                this.object.setDirty();\n            });\n        }\n    }\n    onActivate() {\n        this.engine.onXRSessionStart.add(this.onSessionStartCallback);\n        this.engine.onXRSessionEnd.add(this.onSessionEndCallback);\n    }\n    onDeactivate() {\n        this.engine.onXRSessionStart.remove(this.onSessionStartCallback);\n        this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);\n    }\n    update() {\n        const wasVisible = this.visible;\n        if (this.xrHitTestSource) {\n            const frame = this.engine.xrFrame;\n            if (!frame)\n                return;\n            let hitTestResults = frame.getHitTestResults(this.xrHitTestSource);\n            if (hitTestResults.length > 0) {\n                let pose = hitTestResults[0].getPose(this.engine.xr.currentReferenceSpace);\n                this.visible = !!pose;\n                if (pose) {\n                    setXRRigidTransformLocal(this.object, pose.transform);\n                }\n            }\n            else {\n                this.visible = false;\n            }\n        }\n        /* Emit events for visible state change */\n        if (this.visible != wasVisible) {\n            (this.visible ? this.onHitFound : this.onHitLost).notify(this);\n        }\n    }\n    getHitTestResults(frame = this.engine.xr?.frame ?? null) {\n        if (!frame)\n            return [];\n        /* May happen if the hit test source couldn't be created */\n        if (!this.xrHitTestSource)\n            return [];\n        return frame.getHitTestResults(this.xrHitTestSource);\n    }\n    onXRSessionStart(session) {\n        if (session.requestHitTestSource === undefined) {\n            console.error('hit-test-location: hit test feature not available. Deactivating component.');\n            this.active = false;\n            return;\n        }\n        session\n            .requestHitTestSource({\n            space: this.xrReferenceSpace ??\n                this.engine.xr.referenceSpaceForType('viewer'),\n        })\n            .then((hitTestSource) => {\n            this.xrHitTestSource = hitTestSource;\n        })\n            .catch(console.error);\n    }\n    onXRSessionEnd() {\n        if (!this.xrHitTestSource)\n            return;\n        this.xrHitTestSource.cancel();\n        this.xrHitTestSource = null;\n    }\n}\n__decorate([\n    property.bool(true)\n], HitTestLocation.prototype, \"scaleObject\", void 0);\nexport { HitTestLocation };\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, ViewComponent, Emitter, } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { vec3, mat4 } from 'gl-matrix';\nimport { CursorTarget } from './cursor-target.js';\nimport { HitTestLocation } from './hit-test-location.js';\nconst tempVec = new Float32Array(3);\n/** Global target for {@link Cursor} */\nclass CursorTargetEmitters {\n    /** Emitter for events when the target is hovered */\n    onHover = new Emitter();\n    /** Emitter for events when the target is unhovered */\n    onUnhover = new Emitter();\n    /** Emitter for events when the target is clicked */\n    onClick = new Emitter();\n    /** Emitter for events when the cursor moves on the target */\n    onMove = new Emitter();\n    /** Emitter for events when the user pressed the select button on the target */\n    onDown = new Emitter();\n    /** Emitter for events when the user unpressed the select button on the target */\n    onUp = new Emitter();\n}\n/**\n * 3D cursor for desktop/mobile/VR.\n *\n * Implements a ray-casting cursor into the scene. To react to\n * clicking/hover/unhover/cursor down/cursor up/move use a\n * [cursor-target](#cursor-target).\n *\n * For VR, the ray is cast in direction of\n * [this.object.getForward()](/jsapi/object/#getforward). For desktop and mobile, the\n * forward vector is inverse-projected to account for where on screen the user clicked.\n *\n * `.globalTarget` can be used to call callbacks for all objects, even those that\n * do not have a cursor target attached, but match the collision group.\n *\n * `.hitTestTarget` can be used to call callbacks WebXR hit test results,\n *\n * See [Animation Example](/showcase/animation).\n */\nclass Cursor extends Component {\n    static TypeName = 'cursor';\n    /* Dependencies is deprecated, but we keep it here for compatibility\n     * with 1.0.0-rc2 until 1.0.0 is released */\n    static Dependencies = [HitTestLocation];\n    static onRegister(engine) {\n        engine.registerComponent(HitTestLocation);\n    }\n    _collisionMask = 0;\n    _onDeactivateCallbacks = [];\n    _input = null;\n    _origin = new Float32Array(3);\n    _cursorObjScale = new Float32Array(3);\n    _direction = new Float32Array(3);\n    _projectionMatrix = new Float32Array(16);\n    _viewComponent = null;\n    _isDown = false;\n    _lastIsDown = false;\n    _arTouchDown = false;\n    _lastCursorPosOnTarget = new Float32Array(3);\n    _cursorRayScale = new Float32Array(3);\n    _hitTestLocation = null;\n    _hitTestObject = null;\n    _onSessionStartCallback = null;\n    /**\n     * Whether the cursor (and cursorObject) is visible, i.e. pointing at an object\n     * that matches the collision group\n     */\n    visible = true;\n    /** Maximum distance for the cursor's ray cast */\n    maxDistance = 100;\n    /** Currently hovered object */\n    hoveringObject = null;\n    /** CursorTarget component of the currently hovered object */\n    hoveringObjectTarget = null;\n    /** Whether the cursor is hovering reality via hit-test */\n    hoveringReality = false;\n    /**\n     * Global target lets you receive global cursor events on any object.\n     */\n    globalTarget = new CursorTargetEmitters();\n    /**\n     * Hit test target lets you receive cursor events for \"reality\", if\n     * `useWebXRHitTest` is set to `true`.\n     *\n     * @example\n     * ```js\n     * cursor.hitTestTarget.onClick.add((hit, cursor) => {\n     *     // User clicked on reality\n     * });\n     * ```\n     */\n    hitTestTarget = new CursorTargetEmitters();\n    /** World position of the cursor */\n    cursorPos = new Float32Array(3);\n    /** Collision group for the ray cast. Only objects in this group will be affected by this cursor. */\n    collisionGroup = 1;\n    /** (optional) Object that visualizes the cursor's ray. */\n    cursorRayObject = null;\n    /** Axis along which to scale the `cursorRayObject`. */\n    cursorRayScalingAxis = 2;\n    /** (optional) Object that visualizes the cursor's hit location. */\n    cursorObject = null;\n    /** Handedness for VR cursors to accept trigger events only from respective controller. */\n    handedness = 0;\n    /** Mode for raycasting, whether to use PhysX or simple collision components */\n    rayCastMode = 0;\n    /** Whether to set the CSS style of the mouse cursor on desktop */\n    styleCursor = true;\n    /**\n     * Use WebXR hit-test if available.\n     *\n     * Attaches a hit-test-location component to the cursorObject, which will be used\n     * by the cursor to send events to the hitTestTarget with HitTestResult.\n     */\n    useWebXRHitTest = false;\n    _onViewportResize = () => {\n        if (!this._viewComponent)\n            return;\n        /* Projection matrix will change if the viewport is resized, which will affect the\n         * projection matrix because of the aspect ratio. */\n        mat4.invert(this._projectionMatrix, this._viewComponent.projectionMatrix);\n    };\n    start() {\n        this._collisionMask = 1 << this.collisionGroup;\n        if (this.handedness == 0) {\n            const inputComp = this.object.getComponent('input');\n            if (!inputComp) {\n                console.warn('cursor component on object', this.object.name, 'was configured with handedness \"input component\", ' +\n                    'but object has no input component.');\n            }\n            else {\n                this.handedness = inputComp.handedness || 'none';\n                this._input = inputComp;\n            }\n        }\n        else {\n            this.handedness = ['left', 'right', 'none'][this.handedness - 1];\n        }\n        this._viewComponent = this.object.getComponent(ViewComponent);\n        if (this.useWebXRHitTest) {\n            this._hitTestObject = this.engine.scene.addObject(this.object);\n            this._hitTestLocation =\n                this._hitTestObject.addComponent(HitTestLocation, {\n                    scaleObject: false,\n                }) ?? null;\n        }\n        this._onSessionStartCallback = this.setupVREvents.bind(this);\n    }\n    onActivate() {\n        this.engine.onXRSessionStart.add(this._onSessionStartCallback);\n        this.engine.onResize.add(this._onViewportResize);\n        this._setCursorVisibility(true);\n        /* If this object also has a view component, we will enable inverse-projected mouse clicks,\n         * otherwise just use the objects transformation */\n        if (this._viewComponent != null) {\n            const canvas = this.engine.canvas;\n            const onClick = this.onClick.bind(this);\n            const onPointerMove = this.onPointerMove.bind(this);\n            const onPointerDown = this.onPointerDown.bind(this);\n            const onPointerUp = this.onPointerUp.bind(this);\n            canvas.addEventListener('click', onClick);\n            canvas.addEventListener('pointermove', onPointerMove);\n            canvas.addEventListener('pointerdown', onPointerDown);\n            canvas.addEventListener('pointerup', onPointerUp);\n            this._onDeactivateCallbacks.push(() => {\n                canvas.removeEventListener('click', onClick);\n                canvas.removeEventListener('pointermove', onPointerMove);\n                canvas.removeEventListener('pointerdown', onPointerDown);\n                canvas.removeEventListener('pointerup', onPointerUp);\n            });\n        }\n        this._onViewportResize();\n        /* Set initial origin and direction */\n        this.object.getTranslationWorld(this._origin);\n        this.object.getForward(this._direction);\n        if (this.cursorRayObject) {\n            this._cursorRayScale.set(this.cursorRayObject.scalingLocal);\n            /* Set ray to a good default distance of the cursor of 1m */\n            this._setCursorRayTransform(vec3.add(tempVec, this._origin, this._direction));\n        }\n    }\n    _setCursorRayTransform(hitPosition) {\n        if (!this.cursorRayObject)\n            return;\n        const dist = vec3.dist(this._origin, hitPosition);\n        this.cursorRayObject.setTranslationLocal([0.0, 0.0, -dist / 2]);\n        if (this.cursorRayScalingAxis != 4) {\n            this.cursorRayObject.resetScaling();\n            this._cursorRayScale[this.cursorRayScalingAxis] = dist / 2;\n            this.cursorRayObject.scale(this._cursorRayScale);\n        }\n    }\n    _setCursorVisibility(visible) {\n        if (this.visible == visible)\n            return;\n        this.visible = visible;\n        if (!this.cursorObject)\n            return;\n        if (visible) {\n            this.cursorObject.resetScaling();\n            this.cursorObject.scale(this._cursorObjScale);\n        }\n        else {\n            this._cursorObjScale.set(this.cursorObject.scalingLocal);\n            this.cursorObject.scale([0, 0, 0]);\n        }\n    }\n    update() {\n        /* If in VR, set the cursor ray based on object transform */\n        /* Since Google Cardboard tap is registered as arTouchDown without a gamepad, we need to check for gamepad presence */\n        if (this.engine.xr &&\n            this._arTouchDown &&\n            this._input &&\n            this.engine.xr.session.inputSources[0].handedness === 'none' &&\n            this.engine.xr.session.inputSources[0].gamepad) {\n            const p = this.engine.xr.session.inputSources[0].gamepad.axes;\n            /* Screenspace Y is inverted */\n            this._direction[0] = p[0];\n            this._direction[1] = -p[1];\n            this._direction[2] = -1.0;\n            this.updateDirection();\n        }\n        else {\n            this.object.getTranslationWorld(this._origin);\n            this.object.getForwardWorld(this._direction);\n        }\n        this.rayCast(null, this.engine.xr?.frame);\n        if (this.cursorObject) {\n            if (this.hoveringObject &&\n                (this.cursorPos[0] != 0 || this.cursorPos[1] != 0 || this.cursorPos[2] != 0)) {\n                this._setCursorVisibility(true);\n                this.cursorObject.setTranslationWorld(this.cursorPos);\n                this._setCursorRayTransform(this.cursorPos);\n            }\n            else {\n                this._setCursorVisibility(false);\n            }\n        }\n    }\n    /* Returns the hovered cursor target, if available */\n    notify(event, originalEvent) {\n        const target = this.hoveringObject;\n        if (target) {\n            const cursorTarget = this.hoveringObjectTarget;\n            if (cursorTarget)\n                cursorTarget[event].notify(target, this, originalEvent ?? undefined);\n            this.globalTarget[event].notify(target, this, originalEvent ?? undefined);\n        }\n    }\n    hoverBehaviour(rayHit, hitTestResult, doClick, originalEvent) {\n        /* Old API version does not return null for objects[0] if no hit */\n        const hit = !this.hoveringReality && rayHit.hitCount > 0 ? rayHit.objects[0] : null;\n        if (hit) {\n            if (!this.hoveringObject || !this.hoveringObject.equals(hit)) {\n                /* Unhover previous, if exists */\n                if (this.hoveringObject) {\n                    this.notify('onUnhover', originalEvent);\n                }\n                /* Hover new object */\n                this.hoveringObject = hit;\n                this.hoveringObjectTarget = this.hoveringObject.getComponent(CursorTarget);\n                if (this.styleCursor)\n                    this.engine.canvas.style.cursor = 'pointer';\n                this.notify('onHover', originalEvent);\n            }\n        }\n        else if (this.hoveringObject) {\n            /* Previously hovering object, now hovering nothing */\n            this.notify('onUnhover', originalEvent);\n            this.hoveringObject = null;\n            this.hoveringObjectTarget = null;\n            if (this.styleCursor)\n                this.engine.canvas.style.cursor = 'default';\n        }\n        if (this.hoveringObject) {\n            /* onDown/onUp for object */\n            if (this._isDown !== this._lastIsDown) {\n                this.notify(this._isDown ? 'onDown' : 'onUp', originalEvent);\n            }\n            /* onClick for object */\n            if (doClick)\n                this.notify('onClick', originalEvent);\n        }\n        else if (this.hoveringReality) {\n            /* onDown/onUp for hit test */\n            if (this._isDown !== this._lastIsDown) {\n                (this._isDown ? this.hitTestTarget.onDown : this.hitTestTarget.onUp).notify(hitTestResult, this, originalEvent ?? undefined);\n            }\n            /* onClick for hit test */\n            if (doClick)\n                this.hitTestTarget.onClick.notify(hitTestResult, this, originalEvent ?? undefined);\n        }\n        /* onMove */\n        if (hit) {\n            if (this.hoveringObject) {\n                this.hoveringObject.toLocalSpaceTransform(tempVec, this.cursorPos);\n            }\n            else {\n                tempVec.set(this.cursorPos);\n            }\n            if (this._lastCursorPosOnTarget[0] != tempVec[0] ||\n                this._lastCursorPosOnTarget[1] != tempVec[1] ||\n                this._lastCursorPosOnTarget[2] != tempVec[2]) {\n                this.notify('onMove', originalEvent);\n                this._lastCursorPosOnTarget.set(tempVec);\n            }\n        }\n        else if (this.hoveringReality) {\n            if (this._lastCursorPosOnTarget[0] != this.cursorPos[0] ||\n                this._lastCursorPosOnTarget[1] != this.cursorPos[1] ||\n                this._lastCursorPosOnTarget[2] != this.cursorPos[2]) {\n                this.hitTestTarget.onMove.notify(hitTestResult, this, originalEvent ?? undefined);\n                this._lastCursorPosOnTarget.set(this.cursorPos);\n            }\n        }\n        this._lastIsDown = this._isDown;\n    }\n    /**\n     * Setup event listeners on session object\n     * @param s WebXR session\n     *\n     * Sets up 'select' and 'end' events.\n     */\n    setupVREvents(s) {\n        if (!s)\n            console.error('setupVREvents called without a valid session');\n        /* If in VR, one-time bind the listener */\n        const onSelect = this.onSelect.bind(this);\n        s.addEventListener('select', onSelect);\n        const onSelectStart = this.onSelectStart.bind(this);\n        s.addEventListener('selectstart', onSelectStart);\n        const onSelectEnd = this.onSelectEnd.bind(this);\n        s.addEventListener('selectend', onSelectEnd);\n        this._onDeactivateCallbacks.push(() => {\n            if (!this.engine.xrSession)\n                return;\n            s.removeEventListener('select', onSelect);\n            s.removeEventListener('selectstart', onSelectStart);\n            s.removeEventListener('selectend', onSelectEnd);\n        });\n        /* After AR session was entered, the projection matrix changed */\n        this._onViewportResize();\n    }\n    onDeactivate() {\n        this.engine.onXRSessionStart.remove(this._onSessionStartCallback);\n        this.engine.onResize.remove(this._onViewportResize);\n        this._setCursorVisibility(false);\n        if (this.hoveringObject)\n            this.notify('onUnhover', null);\n        if (this.cursorRayObject)\n            this.cursorRayObject.scale([0, 0, 0]);\n        /* Ensure all event listeners are removed */\n        for (const f of this._onDeactivateCallbacks)\n            f();\n        this._onDeactivateCallbacks.length = 0;\n    }\n    onDestroy() {\n        this._hitTestObject?.destroy();\n    }\n    /** 'select' event listener */\n    onSelect(e) {\n        if (e.inputSource.handedness != this.handedness)\n            return;\n        this.rayCast(e, e.frame, true);\n    }\n    /** 'selectstart' event listener */\n    onSelectStart(e) {\n        this._arTouchDown = true;\n        if (e.inputSource.handedness == this.handedness) {\n            this._isDown = true;\n            this.rayCast(e, e.frame);\n        }\n    }\n    /** 'selectend' event listener */\n    onSelectEnd(e) {\n        this._arTouchDown = false;\n        if (e.inputSource.handedness == this.handedness) {\n            this._isDown = false;\n            this.rayCast(e, e.frame);\n        }\n    }\n    /** 'pointermove' event listener */\n    onPointerMove(e) {\n        /* Don't care about secondary pointers */\n        if (!e.isPrimary)\n            return;\n        this.updateMousePos(e);\n        this.rayCast(e, null);\n    }\n    /** 'click' event listener */\n    onClick(e) {\n        this.updateMousePos(e);\n        this.rayCast(e, null, true);\n    }\n    /** 'pointerdown' event listener */\n    onPointerDown(e) {\n        /* Don't care about secondary pointers or non-left clicks */\n        if (!e.isPrimary || e.button !== 0)\n            return;\n        this.updateMousePos(e);\n        this._isDown = true;\n        this.rayCast(e);\n    }\n    /** 'pointerup' event listener */\n    onPointerUp(e) {\n        /* Don't care about secondary pointers or non-left clicks */\n        if (!e.isPrimary || e.button !== 0)\n            return;\n        this.updateMousePos(e);\n        this._isDown = false;\n        this.rayCast(e);\n    }\n    /**\n     * Update mouse position in non-VR mode and raycast for new position\n     * @returns @ref WL.RayHit for new position.\n     */\n    updateMousePos(e) {\n        const bounds = this.engine.canvas.getBoundingClientRect();\n        /* Get direction in normalized device coordinate space from mouse position */\n        const left = e.clientX / bounds.width;\n        const top = e.clientY / bounds.height;\n        this._direction[0] = left * 2 - 1;\n        this._direction[1] = -top * 2 + 1;\n        this._direction[2] = -1.0;\n        this.updateDirection();\n    }\n    updateDirection() {\n        this.object.getTranslationWorld(this._origin);\n        /* Reverse-project the direction into view space */\n        vec3.transformMat4(this._direction, this._direction, this._projectionMatrix);\n        vec3.normalize(this._direction, this._direction);\n        vec3.transformQuat(this._direction, this._direction, this.object.transformWorld);\n    }\n    rayCast(originalEvent, frame = null, doClick = false) {\n        const rayHit = this.rayCastMode == 0\n            ? this.engine.scene.rayCast(this._origin, this._direction, this._collisionMask)\n            : this.engine.physics.rayCast(this._origin, this._direction, this._collisionMask, this.maxDistance);\n        let hitResultDistance = Infinity;\n        let hitTestResult = null;\n        if (this._hitTestLocation?.visible) {\n            this._hitTestObject.getTranslationWorld(this.cursorPos);\n            hitResultDistance = vec3.distance(this.object.getTranslationWorld(tempVec), this.cursorPos);\n            hitTestResult = this._hitTestLocation?.getHitTestResults(frame)[0];\n        }\n        let hoveringReality = false;\n        if (rayHit.hitCount > 0) {\n            const d = rayHit.distances[0];\n            if (hitResultDistance >= d) {\n                /* Override cursorPos set by hit test location */\n                this.cursorPos.set(rayHit.locations[0]);\n            }\n            else {\n                hoveringReality = true;\n            }\n        }\n        else if (hitResultDistance < Infinity) {\n            /* cursorPos already set */\n        }\n        else {\n            this.cursorPos.fill(0);\n        }\n        if (hoveringReality && !this.hoveringReality) {\n            this.hitTestTarget.onHover.notify(hitTestResult, this);\n        }\n        else if (!hoveringReality && this.hoveringReality) {\n            this.hitTestTarget.onUnhover.notify(hitTestResult, this);\n        }\n        this.hoveringReality = hoveringReality;\n        this.hoverBehaviour(rayHit, hitTestResult, doClick, originalEvent);\n        return rayHit;\n    }\n}\n__decorate([\n    property.int(1)\n], Cursor.prototype, \"collisionGroup\", void 0);\n__decorate([\n    property.object()\n], Cursor.prototype, \"cursorRayObject\", void 0);\n__decorate([\n    property.enum(['x', 'y', 'z', 'none'], 'z')\n], Cursor.prototype, \"cursorRayScalingAxis\", void 0);\n__decorate([\n    property.object()\n], Cursor.prototype, \"cursorObject\", void 0);\n__decorate([\n    property.enum(['input component', 'left', 'right', 'none'], 'input component')\n], Cursor.prototype, \"handedness\", void 0);\n__decorate([\n    property.enum(['collision', 'physx'], 'collision')\n], Cursor.prototype, \"rayCastMode\", void 0);\n__decorate([\n    property.bool(true)\n], Cursor.prototype, \"styleCursor\", void 0);\n__decorate([\n    property.bool(false)\n], Cursor.prototype, \"useWebXRHitTest\", void 0);\nexport { Cursor };\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { quat2 } from 'gl-matrix';\n/**\n * Prints some limited debug information about the object.\n *\n * Information consists of: This object's name, an object parameter's name,\n * the object's world translation, world transform and local transform.\n *\n * Mainly used by engine developers for debug purposes or as example code.\n */\nclass DebugObject extends Component {\n    static TypeName = 'debug-object';\n    /** A second object to print the name of */\n    obj = null;\n    start() {\n        let origin = new Float32Array(3);\n        quat2.getTranslation(origin, this.object.transformWorld);\n        console.log('Debug object:', this.object.name);\n        console.log('Other object:', this.obj?.name);\n        console.log('\\ttranslation', origin);\n        console.log('\\ttransformWorld', this.object.transformWorld);\n        console.log('\\ttransformLocal', this.object.transformLocal);\n    }\n}\n__decorate([\n    property.object()\n], DebugObject.prototype, \"obj\", void 0);\nexport { DebugObject };\n", "import { Component, Type } from '@wonderlandengine/api';\n/**\n * Applies [fixed foveation](https://www.w3.org/TR/webxrlayers-1/#dom-xrcompositionlayer-fixedfoveation)\n * once a WebXR session is started\n *\n * Fixed foveation reduces shading cost at the periphery by rendering at lower resolutions at the\n * edges of the users vision.\n */\nclass FixedFoveation extends Component {\n    static TypeName = 'fixed-foveation';\n    static Properties = {\n        /** Amount to apply from 0 (none) to 1 (full) */\n        fixedFoveation: { type: Type.Float, default: 0.5 },\n    };\n    start() {\n        this.onSessionStartCallback = this.setFixedFoveation.bind(this);\n    }\n    onActivate() {\n        this.engine.onXRSessionStart.add(this.onSessionStartCallback);\n    }\n    onDeactivate() {\n        this.engine.onXRSessionStart.remove(this.onSessionStartCallback);\n    }\n    setFixedFoveation() {\n        this.engine.xr.baseLayer.fixedFoveation = this.fixedFoveation;\n    }\n}\nexport { FixedFoveation };\n", "import { Component, MeshComponent, Type } from '@wonderlandengine/api';\nimport { vec3, quat, quat2 } from 'gl-matrix';\nimport { setXRRigidTransformLocal } from './utils/webxr.js';\nconst ORDERED_JOINTS = [\n    'wrist',\n    'thumb-metacarpal',\n    'thumb-phalanx-proximal',\n    'thumb-phalanx-distal',\n    'thumb-tip',\n    'index-finger-metacarpal',\n    'index-finger-phalanx-proximal',\n    'index-finger-phalanx-intermediate',\n    'index-finger-phalanx-distal',\n    'index-finger-tip',\n    'middle-finger-metacarpal',\n    'middle-finger-phalanx-proximal',\n    'middle-finger-phalanx-intermediate',\n    'middle-finger-phalanx-distal',\n    'middle-finger-tip',\n    'ring-finger-metacarpal',\n    'ring-finger-phalanx-proximal',\n    'ring-finger-phalanx-intermediate',\n    'ring-finger-phalanx-distal',\n    'ring-finger-tip',\n    'pinky-finger-metacarpal',\n    'pinky-finger-phalanx-proximal',\n    'pinky-finger-phalanx-intermediate',\n    'pinky-finger-phalanx-distal',\n    'pinky-finger-tip',\n];\nconst invTranslation = new Float32Array(3);\nconst invRotation = new Float32Array(4);\n/**\n * Easy hand tracking through the WebXR Device API\n * [\"Hand Input\" API](https://immersive-web.github.io/webxr-hand-input/).\n *\n * Allows displaying hands either as sphere-joints or skinned mesh.\n *\n * To react to grabbing, use `this.isGrabbing()`. For other gestures, refer\n * to `this.joints` - an array of [WL.Object](/jsapi/object) and use the joint\n * indices listed [in the WebXR Hand Input specification](https://immersive-web.github.io/webxr-hand-input/#skeleton-joints-section).\n *\n * It is often desired to use either hand tracking or controllers, not both.\n * This component provides `deactivateChildrenWithoutPose` to hide the hand\n * tracking visualization if no pose is available and `controllerToDeactivate`\n * for disabling another object once a hand tracking pose *is* available.\n * Outside of XR sessions, tracking or controllers are neither enabled nor disabled\n * to play well with the [vr-mode-active-switch](#vr-mode-active-switch) component.\n *\n * **Requirements:**\n *  - To use hand-tracking, enable \"joint tracking\" in `chrome://flags` on\n *    Oculus Browser for Oculus Quest/Oculus Quest 2.\n *\n * See [Hand Tracking Example](/showcase/hand-tracking).\n */\nclass HandTracking extends Component {\n    static TypeName = 'hand-tracking';\n    static Properties = {\n        /** Handedness determining whether to receive tracking input from right or left hand */\n        handedness: { type: Type.Enum, default: 'left', values: ['left', 'right'] },\n        /** (optional) Mesh to use to visualize joints */\n        jointMesh: { type: Type.Mesh, default: null },\n        /** Material to use for display. Applied to either the spawned skinned mesh or the joint spheres. */\n        jointMaterial: { type: Type.Material, default: null },\n        /** (optional) Skin to apply tracked joint poses to. If not present, joint spheres will be used for display instead. */\n        handSkin: { type: Type.Skin, default: null },\n        /** Deactivate children if no pose was tracked */\n        deactivateChildrenWithoutPose: { type: Type.Bool, default: true },\n        /** Controller objects to activate including children if no pose is available */\n        controllerToDeactivate: { type: Type.Object },\n    };\n    init() {\n        this.handedness = ['left', 'right'][this.handedness];\n    }\n    joints = {};\n    session = null;\n    /* Whether last update had a hand pose */\n    hasPose = false;\n    _childrenActive = true;\n    start() {\n        if (!('XRHand' in window)) {\n            console.warn('WebXR Hand Tracking not supported by this browser.');\n            this.active = false;\n            return;\n        }\n        if (this.handSkin) {\n            let skin = this.handSkin;\n            let jointIds = skin.jointIds;\n            /* Map the wrist */\n            this.joints[ORDERED_JOINTS[0]] = this.engine.wrapObject(jointIds[0]);\n            /* Index in ORDERED_JOINTS that we are mapping to our joints */\n            /* Skip thumb0 joint, start at thumb1 */\n            for (let j = 0; j < jointIds.length; ++j) {\n                let joint = this.engine.wrapObject(jointIds[j]);\n                /* tip joints are only needed for joint rendering, so we skip those while mapping */\n                this.joints[joint.name] = joint;\n            }\n            /* If we have a hand skin, no need to spawn the joints-based one */\n            return;\n        }\n        /* Spawn joints */\n        const jointObjects = this.engine.scene.addObjects(ORDERED_JOINTS.length, this.object.parent, ORDERED_JOINTS.length);\n        for (let j = 0; j < ORDERED_JOINTS.length; ++j) {\n            let joint = jointObjects[j];\n            joint.addComponent(MeshComponent, {\n                mesh: this.jointMesh,\n                material: this.jointMaterial,\n            });\n            this.joints[ORDERED_JOINTS[j]] = joint;\n        }\n    }\n    update(dt) {\n        if (!this.session) {\n            if (this.engine.xr)\n                this.setupVREvents(this.engine.xr.session);\n        }\n        if (!this.session)\n            return;\n        this.hasPose = false;\n        if (this.session && this.session.inputSources) {\n            for (let i = 0; i < this.session.inputSources.length; ++i) {\n                const inputSource = this.session.inputSources[i];\n                if (!inputSource ||\n                    !inputSource.hand ||\n                    inputSource.handedness != this.handedness)\n                    continue;\n                this.hasPose = true;\n                const wristSpace = inputSource.hand.get('wrist');\n                if (wristSpace !== null) {\n                    const p = this.engine.xr.frame.getJointPose(wristSpace, this.engine.xr.currentReferenceSpace);\n                    if (p) {\n                        setXRRigidTransformLocal(this.object, p.transform);\n                    }\n                }\n                this.object.getRotationLocal(invRotation);\n                quat.conjugate(invRotation, invRotation);\n                this.object.getTranslationLocal(invTranslation);\n                for (let j = 0; j < ORDERED_JOINTS.length; ++j) {\n                    const jointName = ORDERED_JOINTS[j];\n                    const joint = this.joints[jointName];\n                    if (joint === null)\n                        continue;\n                    let jointPose = null;\n                    const jointSpace = inputSource.hand.get(jointName);\n                    if (jointSpace !== null) {\n                        jointPose = this.engine.xr.frame.getJointPose(jointSpace, this.engine.xr.currentReferenceSpace);\n                    }\n                    if (jointPose !== null) {\n                        if (this.handSkin) {\n                            joint.resetTranslationRotation();\n                            joint.translate([\n                                jointPose.transform.position.x - invTranslation[0],\n                                jointPose.transform.position.y - invTranslation[1],\n                                jointPose.transform.position.z - invTranslation[2],\n                            ]);\n                            joint.rotate(invRotation);\n                            joint.rotateObject([\n                                jointPose.transform.orientation.x,\n                                jointPose.transform.orientation.y,\n                                jointPose.transform.orientation.z,\n                                jointPose.transform.orientation.w,\n                            ]);\n                        }\n                        else {\n                            setXRRigidTransformLocal(joint, jointPose.transform);\n                            /* Last joint radius of each finger is null */\n                            const r = jointPose.radius || 0.007;\n                            joint.setScalingLocal([r, r, r]);\n                        }\n                    }\n                }\n            }\n        }\n        if (!this.hasPose && this._childrenActive) {\n            this._childrenActive = false;\n            if (this.deactivateChildrenWithoutPose) {\n                this.setChildrenActive(false);\n            }\n            if (this.controllerToDeactivate) {\n                this.controllerToDeactivate.active = true;\n                this.setChildrenActive(true, this.controllerToDeactivate);\n            }\n        }\n        else if (this.hasPose && !this._childrenActive) {\n            this._childrenActive = true;\n            if (this.deactivateChildrenWithoutPose) {\n                this.setChildrenActive(true);\n            }\n            if (this.controllerToDeactivate) {\n                this.controllerToDeactivate.active = false;\n                this.setChildrenActive(false, this.controllerToDeactivate);\n            }\n        }\n    }\n    setChildrenActive(active, object) {\n        object = object || this.object;\n        const children = object.children;\n        for (const o of children) {\n            o.active = active;\n            this.setChildrenActive(active, o);\n        }\n    }\n    isGrabbing() {\n        const indexTipPos = [0, 0, 0];\n        quat2.getTranslation(indexTipPos, this.joints['index-finger-tip'].transformLocal);\n        const thumbTipPos = [0, 0, 0];\n        quat2.getTranslation(thumbTipPos, this.joints['thumb-tip'].transformLocal);\n        return vec3.sqrDist(thumbTipPos, indexTipPos) < 0.001;\n    }\n    setupVREvents(s) {\n        this.session = s;\n    }\n}\nexport { HandTracking };\n", "import { Component, Type } from '@wonderlandengine/api';\nimport 'howler';\n/**\n * (Spatial) audio listener based on [Howler.js](https://howlerjs.com/).\n *\n * Retrieves the location and orientation of the object and passes it\n * to [Howler.pos()](https://github.com/goldfire/howler.js#posx-y-z-id)\n * and [Howler.orientation()](https://github.com/goldfire/howler.js#orientationx-y-z-id).\n */\nclass HowlerAudioListener extends Component {\n    static TypeName = 'howler-audio-listener';\n    static Properties = {\n        /** Whether audio should be spatialized/positional. */\n        spatial: { type: Type.Bool, default: true },\n    };\n    init() {\n        this.origin = new Float32Array(3);\n        this.fwd = new Float32Array(3);\n        this.up = new Float32Array(3);\n    }\n    update() {\n        if (!this.spatial)\n            return;\n        this.object.getTranslationWorld(this.origin);\n        this.object.getForward(this.fwd);\n        this.object.getUp(this.up);\n        Howler.pos(this.origin[0], this.origin[1], this.origin[2]);\n        Howler.orientation(this.fwd[0], this.fwd[1], this.fwd[2], this.up[0], this.up[1], this.up[2]);\n    }\n}\nexport { HowlerAudioListener };\n", "import { Component, Type } from '@wonderlandengine/api';\nimport 'howler';\n/**\n * (Spatial) audio source based on [Howler.js](https://howlerjs.com/).\n *\n * Creates a Howler audio source, plays an audio file on it and updates\n * its position.\n *\n * Optimizes the position update to only update if the difference to last\n * position is larger than half a centimeter. To force updates (e.g. if\n * the sound source is _very_ close to the listener),\n * use `.updatePosition()`.\n */\nclass HowlerAudioSource extends Component {\n    static TypeName = 'howler-audio-source';\n    static Properties = {\n        /** Volume */\n        volume: { type: Type.Float, default: 1.0 },\n        /** Whether audio should be spatialized/positional */\n        spatial: { type: Type.Bool, default: true },\n        /** Whether to loop the sound */\n        loop: { type: Type.Bool, default: false },\n        /** Whether to start playing automatically */\n        autoplay: { type: Type.Bool, default: false },\n        /** URL to a sound file to play */\n        src: { type: Type.String, default: '' },\n    };\n    start() {\n        this.audio = new Howl({\n            src: [this.src],\n            loop: this.loop,\n            volume: this.volume,\n            autoplay: this.autoplay,\n        });\n        this.lastPlayedAudioId = null;\n        this.origin = new Float32Array(3);\n        this.lastOrigin = new Float32Array(3);\n        if (this.spatial && this.autoplay) {\n            this.updatePosition();\n            this.play();\n        }\n    }\n    update() {\n        if (!this.spatial || !this.lastPlayedAudioId)\n            return;\n        this.object.getTranslationWorld(this.origin);\n        /* Only call pos() if the position moved more than half a centimeter\n         * otherwise this gets very performance heavy.\n         * Smaller movement should only be perceivable if close to the\n         * ear anyway. */\n        if (Math.abs(this.lastOrigin[0] - this.origin[0]) > 0.005 ||\n            Math.abs(this.lastOrigin[1] - this.origin[1]) > 0.005 ||\n            Math.abs(this.lastOrigin[2] - this.origin[2]) > 0.005) {\n            this.updatePosition();\n        }\n    }\n    updatePosition() {\n        this.audio.pos(this.origin[0], this.origin[1], this.origin[2], this.lastPlayedAudioId);\n        this.lastOrigin.set(this.origin);\n    }\n    play() {\n        if (this.lastPlayedAudioId)\n            this.audio.stop(this.lastPlayedAudioId);\n        this.lastPlayedAudioId = this.audio.play();\n        if (this.spatial)\n            this.updatePosition();\n    }\n    stop() {\n        if (!this.lastPlayedAudioId)\n            return;\n        this.audio.stop(this.lastPlayedAudioId);\n        this.lastPlayedAudioId = null;\n    }\n    onDeactivate() {\n        /* Stop sound when component is deactivated or destroyed, e.g.\n         * when switching scenes */\n        this.stop();\n    }\n}\nexport { HowlerAudioSource };\n", "/**\n * Set the diffuse/flat texture of known pipelines.\n *\n * @param mat Material to set the texture on\n * @param texture Texture to set\n * @param customTextureProperty Texture property to set or `'auto'` to automatically\n *      detect the right texture property based on known pipeline.\n * @returns `true` if the property was set, `false` otherwise.\n */\nexport function setFirstMaterialTexture(mat, texture, customTextureProperty) {\n    if (customTextureProperty !== 'auto') {\n        // @ts-ignore\n        mat[customTextureProperty] = texture;\n        return true;\n    }\n    const shader = mat.shader;\n    if (shader === 'Flat Opaque Textured') {\n        // @ts-ignore\n        mat.flatTexture = texture;\n        return true;\n    }\n    else if (shader === 'Phong Opaque Textured' ||\n        shader === 'Foliage' ||\n        shader === 'Phong Normalmapped' ||\n        shader === 'Phong Lightmapped') {\n        // @ts-ignore\n        mat.diffuseTexture = texture;\n        return true;\n    }\n    else if (shader === 'Particle') {\n        // @ts-ignore\n        mat.mainTexture = texture;\n        return true;\n    }\n    else if (shader === 'DistanceFieldVector') {\n        // @ts-ignore\n        mat.vectorTexture = texture;\n        return true;\n    }\n    else if (shader === 'Background' || shader === 'Sky') {\n        // @ts-ignore\n        mat.texture = texture;\n        return true;\n    }\n    else if (shader === 'Physical Opaque Textured') {\n        // @ts-ignore\n        mat.albedoTexture = texture;\n        return true;\n    }\n    return false;\n}\n", "import { Component, Property } from '@wonderlandengine/api';\nimport { setFirstMaterialTexture } from './utils/utils.js';\n/**\n * Downloads an image from URL and applies it as `diffuseTexture` or `flatTexture`\n * to an attached mesh component.\n *\n * Materials from the following shaders are supported:\n *  - \"Phong Opaque Textured\"\n *  - \"Flat Opaque Textured\"\n *  - \"Background\"\n *  - \"Physical Opaque Textured\"\n *  - \"Foliage\"\n */\nclass ImageTexture extends Component {\n    static TypeName = 'image-texture';\n    static Properties = {\n        /** URL to download the image from */\n        url: Property.string(),\n        /** Material to apply the video texture to */\n        material: Property.material(),\n        /** Name of the texture property to set */\n        textureProperty: Property.string('auto'),\n    };\n    start() {\n        if (!this.material) {\n            throw Error('image-texture: material property not set');\n        }\n        this.engine.textures\n            .load(this.url, 'anonymous')\n            .then((texture) => {\n            const mat = this.material;\n            if (!setFirstMaterialTexture(mat, texture, this.textureProperty)) {\n                console.error('Shader', mat.shader, 'not supported by image-texture');\n            }\n        })\n            .catch(console.err);\n    }\n}\nexport { ImageTexture };\n", "import { Component, Type } from '@wonderlandengine/api';\nimport { vec3 } from 'gl-matrix';\n/**\n * Controls the camera through mouse movement.\n *\n * Efficiently implemented to affect object orientation only\n * when the mouse moves.\n */\nclass MouseLookComponent extends Component {\n    static TypeName = 'mouse-look';\n    static Properties = {\n        /** Mouse look sensitivity */\n        sensitity: { type: Type.Float, default: 0.25 },\n        /** Require a mouse button to be pressed to control view.\n         * Otherwise view will allways follow mouse movement */\n        requireMouseDown: { type: Type.Bool, default: true },\n        /** If \"moveOnClick\" is enabled, mouse button which should\n         * be held down to control view */\n        mouseButtonIndex: { type: Type.Int },\n        /** Enables pointer lock on \"mousedown\" event on canvas */\n        pointerLockOnClick: { type: Type.Bool, default: false },\n    };\n    init() {\n        this.currentRotationY = 0;\n        this.currentRotationX = 0;\n        this.origin = new Float32Array(3);\n        this.parentOrigin = new Float32Array(3);\n        this.rotationX = 0;\n        this.rotationY = 0;\n    }\n    start() {\n        document.addEventListener('mousemove', (e) => {\n            if (this.active && (this.mouseDown || !this.requireMouseDown)) {\n                this.rotationY = (-this.sensitity * e.movementX) / 100;\n                this.rotationX = (-this.sensitity * e.movementY) / 100;\n                this.currentRotationX += this.rotationX;\n                this.currentRotationY += this.rotationY;\n                /* 1.507 = PI/2 = 90\u00B0 */\n                this.currentRotationX = Math.min(1.507, this.currentRotationX);\n                this.currentRotationX = Math.max(-1.507, this.currentRotationX);\n                this.object.getTranslationWorld(this.origin);\n                const parent = this.object.parent;\n                if (parent !== null) {\n                    parent.getTranslationWorld(this.parentOrigin);\n                    vec3.sub(this.origin, this.origin, this.parentOrigin);\n                }\n                this.object.resetTranslationRotation();\n                this.object.rotateAxisAngleRad([1, 0, 0], this.currentRotationX);\n                this.object.rotateAxisAngleRad([0, 1, 0], this.currentRotationY);\n                this.object.translate(this.origin);\n            }\n        });\n        const canvas = this.engine.canvas;\n        if (this.pointerLockOnClick) {\n            canvas.addEventListener('mousedown', () => {\n                canvas.requestPointerLock =\n                    canvas.requestPointerLock ||\n                        canvas.mozRequestPointerLock ||\n                        canvas.webkitRequestPointerLock;\n                canvas.requestPointerLock();\n            });\n        }\n        if (this.requireMouseDown) {\n            if (this.mouseButtonIndex == 2) {\n                canvas.addEventListener('contextmenu', (e) => {\n                    e.preventDefault();\n                }, false);\n            }\n            canvas.addEventListener('mousedown', (e) => {\n                if (e.button == this.mouseButtonIndex) {\n                    this.mouseDown = true;\n                    document.body.style.cursor = 'grabbing';\n                    if (e.button == 1) {\n                        e.preventDefault();\n                        /* Prevent scrolling */\n                        return false;\n                    }\n                }\n            });\n            canvas.addEventListener('mouseup', (e) => {\n                if (e.button == this.mouseButtonIndex) {\n                    this.mouseDown = false;\n                    document.body.style.cursor = 'initial';\n                }\n            });\n        }\n    }\n}\nexport { MouseLookComponent };\n", "import { Component, Type } from '@wonderlandengine/api';\n/**\n * Set player height for a Y-offset above the ground for\n * 'local' and 'viewer' reference spaces.\n */\nclass PlayerHeight extends Component {\n    static TypeName = 'player-height';\n    static Properties = {\n        height: { type: Type.Float, default: 1.75 },\n    };\n    start() {\n        this.object.resetTranslationRotation();\n        this.object.translate([0.0, this.height, 0.0]);\n        this.onSessionStartCallback = this.onXRSessionStart.bind(this);\n        this.onSessionEndCallback = this.onXRSessionEnd.bind(this);\n    }\n    onActivate() {\n        this.engine.onXRSessionStart.add(this.onSessionStartCallback);\n        this.engine.onXRSessionEnd.add(this.onSessionEndCallback);\n    }\n    onDeactivate() {\n        this.engine.onXRSessionStart.remove(this.onSessionStartCallback);\n        this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);\n    }\n    onXRSessionStart() {\n        if (!['local', 'viewer'].includes(this.engine.xr.currentReferenceSpace)) {\n            this.object.resetTranslationRotation();\n        }\n    }\n    onXRSessionEnd() {\n        if (!['local', 'viewer'].includes(this.engine.xr.currentReferenceSpace)) {\n            this.object.resetTranslationRotation();\n            this.object.translate([0.0, this.height, 0.0]);\n        }\n    }\n}\nexport { PlayerHeight };\n", "import { Component, Type } from '@wonderlandengine/api';\n/**\n * Sets the target framerate\n *\n * [Updates the target framerate](https://immersive-web.github.io/webxr/#dom-xrsession-updatetargetframerate)\n * to the closest [supported target framerate](https://immersive-web.github.io/webxr/#dom-xrsession-supportedFrameRates)\n * to the given `framerate`.\n *\n * The target framerate is used for the device's VR compositor as an indication of how often to refresh the\n * screen with new images. This means the app will be asked to produce frames in more regular intervals,\n * potentially spending less time on frames that are likely to be dropped.\n *\n * For apps with heavy load, setting a well matching target framerate can improve the apps rendering stability\n * and reduce stutter.\n *\n * Likewise, the target framerate can be used to enable 120Hz refresh rates on Oculus Quest 2 on simpler apps.\n */\nclass TargetFramerate extends Component {\n    static TypeName = 'target-framerate';\n    static Properties = {\n        framerate: { type: Type.Float, default: 90.0 },\n    };\n    start() {\n        this.onSessionStartCallback = this.setTargetFramerate.bind(this);\n    }\n    onActivate() {\n        this.engine.onXRSessionStart.add(this.onSessionStartCallback);\n    }\n    onDeactivate() {\n        this.engine.onXRSessionStart.remove(this.onSessionStartCallback);\n    }\n    setTargetFramerate(s) {\n        if (s.supportedFrameRates && s.updateTargetFrameRate) {\n            const a = this.engine.xr.session.supportedFrameRates;\n            a.sort((a, b) => Math.abs(a - this.framerate) - Math.abs(b - this.framerate));\n            this.engine.xr.session.updateTargetFrameRate(a[0]);\n        }\n    }\n}\nexport { TargetFramerate };\n", "import { vec3, quat2 } from 'gl-matrix';\nimport { Component, Type } from '@wonderlandengine/api';\n/**\n * Teleport VR locomotion.\n *\n * See [Teleport Example](/showcase/teleport).\n */\nclass TeleportComponent extends Component {\n    static TypeName = 'teleport';\n    static Properties = {\n        /** Object that will be placed as indiciation forwhere the player will teleport to. */\n        teleportIndicatorMeshObject: { type: Type.Object },\n        /** Root of the player, the object that will be positioned on teleportation. */\n        camRoot: { type: Type.Object },\n        /** Non-vr camera for use outside of VR */\n        cam: { type: Type.Object },\n        /** Left eye for use in VR*/\n        eyeLeft: { type: Type.Object },\n        /** Right eye for use in VR*/\n        eyeRight: { type: Type.Object },\n        /** Handedness for VR cursors to accept trigger events only from respective controller. */\n        handedness: {\n            type: Type.Enum,\n            values: ['input component', 'left', 'right', 'none'],\n            default: 'input component',\n        },\n        /** Collision group of valid \"floor\" objects that can be teleported on */\n        floorGroup: { type: Type.Int, default: 1 },\n        /** How far the thumbstick needs to be pushed to have the teleport target indicator show up */\n        thumbstickActivationThreshhold: { type: Type.Float, default: -0.7 },\n        /** How far the thumbstick needs to be released to execute the teleport */\n        thumbstickDeactivationThreshhold: { type: Type.Float, default: 0.3 },\n        /** Offset to apply to the indicator object, e.g. to avoid it from Z-fighting with the floor */\n        indicatorYOffset: { type: Type.Float, default: 0.01 },\n        /** Mode for raycasting, whether to use PhysX or simple collision components */\n        rayCastMode: {\n            type: Type.Enum,\n            values: ['collision', 'physx'],\n            default: 'collision',\n        },\n        /** Max distance for PhysX raycast */\n        maxDistance: { type: Type.Float, default: 100.0 },\n    };\n    init() {\n        this._prevThumbstickAxis = new Float32Array(2);\n        this._tempVec = new Float32Array(3);\n        this._tempVec0 = new Float32Array(3);\n        this._currentIndicatorRotation = 0;\n        this.input = this.object.getComponent('input');\n        if (!this.input) {\n            console.error(this.object.name, 'generic-teleport-component.js: input component is required on the object');\n            return;\n        }\n        if (!this.teleportIndicatorMeshObject) {\n            console.error(this.object.name, 'generic-teleport-component.js: Teleport indicator mesh is missing');\n            return;\n        }\n        if (!this.camRoot) {\n            console.error(this.object.name, 'generic-teleport-component.js: camRoot not set');\n            return;\n        }\n        this.isIndicating = false;\n        this.indicatorHidden = true;\n        this.hitSpot = new Float32Array(3);\n        this._hasHit = false;\n        this._extraRotation = 0;\n        this._currentStickAxes = new Float32Array(2);\n    }\n    start() {\n        if (this.cam) {\n            this.isMouseIndicating = false;\n            canvas.addEventListener('mousedown', this.onMouseDown.bind(this));\n            canvas.addEventListener('mouseup', this.onMouseUp.bind(this));\n        }\n        if (this.handedness == 0) {\n            const inputComp = this.object.getComponent('input');\n            if (!inputComp) {\n                console.warn('teleport component on object', this.object.name, 'was configured with handedness \"input component\", ' +\n                    'but object has no input component.');\n            }\n            else {\n                this.handedness = inputComp.handedness;\n                this.input = inputComp;\n            }\n        }\n        else {\n            this.handedness = ['left', 'right'][this.handedness - 1];\n        }\n        this.onSessionStartCallback = this.setupVREvents.bind(this);\n        this.teleportIndicatorMeshObject.active = false;\n    }\n    onActivate() {\n        this.engine.onXRSessionStart.add(this.onSessionStartCallback);\n    }\n    onDeactivate() {\n        this.engine.onXRSessionStart.remove(this.onSessionStartCallback);\n    }\n    /* Get current camera Y rotation */\n    _getCamRotation() {\n        this.eyeLeft.getForward(this._tempVec);\n        this._tempVec[1] = 0;\n        vec3.normalize(this._tempVec, this._tempVec);\n        return Math.atan2(this._tempVec[0], this._tempVec[2]);\n    }\n    update() {\n        let inputLength = 0;\n        if (this.gamepad && this.gamepad.axes) {\n            this._currentStickAxes[0] = this.gamepad.axes[2];\n            this._currentStickAxes[1] = this.gamepad.axes[3];\n            inputLength =\n                Math.abs(this._currentStickAxes[0]) + Math.abs(this._currentStickAxes[1]);\n        }\n        if (!this.isIndicating &&\n            this._prevThumbstickAxis[1] >= this.thumbstickActivationThreshhold &&\n            this._currentStickAxes[1] < this.thumbstickActivationThreshhold) {\n            this.isIndicating = true;\n        }\n        else if (this.isIndicating &&\n            inputLength < this.thumbstickDeactivationThreshhold) {\n            this.isIndicating = false;\n            this.teleportIndicatorMeshObject.active = false;\n            if (this._hasHit) {\n                this._teleportPlayer(this.hitSpot, this._extraRotation);\n            }\n        }\n        if (this.isIndicating && this.teleportIndicatorMeshObject && this.input) {\n            const origin = this._tempVec0;\n            this.object.getPositionWorld(origin);\n            const direction = this.object.getForwardWorld(this._tempVec);\n            let rayHit = (this.rayHit =\n                this.rayCastMode == 0\n                    ? this.engine.scene.rayCast(origin, direction, 1 << this.floorGroup)\n                    : this.engine.physics.rayCast(origin, direction, 1 << this.floorGroup, this.maxDistance));\n            if (rayHit.hitCount > 0) {\n                this.indicatorHidden = false;\n                this._extraRotation =\n                    Math.PI +\n                        Math.atan2(this._currentStickAxes[0], this._currentStickAxes[1]);\n                this._currentIndicatorRotation =\n                    this._getCamRotation() + (this._extraRotation - Math.PI);\n                this.teleportIndicatorMeshObject.resetPositionRotation();\n                this.teleportIndicatorMeshObject.rotateAxisAngleRad([0, 1, 0], this._currentIndicatorRotation);\n                this.teleportIndicatorMeshObject.translate(rayHit.locations[0]);\n                this.teleportIndicatorMeshObject.translate([\n                    0.0,\n                    this.indicatorYOffset,\n                    0.0,\n                ]);\n                this.teleportIndicatorMeshObject.active = true;\n                this.hitSpot.set(rayHit.locations[0]);\n                this._hasHit = true;\n            }\n            else {\n                if (!this.indicatorHidden) {\n                    this.teleportIndicatorMeshObject.active = false;\n                    this.indicatorHidden = true;\n                }\n                this._hasHit = false;\n            }\n        }\n        else if (this.teleportIndicatorMeshObject && this.isMouseIndicating) {\n            this.onMousePressed();\n        }\n        this._prevThumbstickAxis.set(this._currentStickAxes);\n    }\n    setupVREvents(s) {\n        /* If in VR, one-time bind the listener */\n        this.session = s;\n        s.addEventListener('end', function () {\n            /* Reset cache once the session ends to rebind select etc, in case\n             * it starts again */\n            this.gamepad = null;\n            this.session = null;\n        }.bind(this));\n        if (s.inputSources && s.inputSources.length) {\n            for (let i = 0; i < s.inputSources.length; i++) {\n                let inputSource = s.inputSources[i];\n                if (inputSource.handedness == this.handedness) {\n                    this.gamepad = inputSource.gamepad;\n                }\n            }\n        }\n        s.addEventListener('inputsourceschange', function (e) {\n            if (e.added && e.added.length) {\n                for (let i = 0; i < e.added.length; i++) {\n                    let inputSource = e.added[i];\n                    if (inputSource.handedness == this.handedness) {\n                        this.gamepad = inputSource.gamepad;\n                    }\n                }\n            }\n        }.bind(this));\n    }\n    onMouseDown() {\n        this.isMouseIndicating = true;\n    }\n    onMouseUp() {\n        this.isMouseIndicating = false;\n        this.teleportIndicatorMeshObject.active = false;\n        if (this._hasHit) {\n            this._teleportPlayer(this.hitSpot, 0.0);\n        }\n    }\n    onMousePressed() {\n        let origin = [0, 0, 0];\n        this.cam.getPositionWorld(origin);\n        const direction = this.cam.getForward(this._tempVec);\n        let rayHit = (this.rayHit =\n            this.rayCastMode == 0\n                ? this.engine.scene.rayCast(origin, direction, 1 << this.floorGroup)\n                : this.engine.physics.rayCast(origin, direction, 1 << this.floorGroup, this.maxDistance));\n        if (rayHit.hitCount > 0) {\n            this.indicatorHidden = false;\n            direction[1] = 0;\n            vec3.normalize(direction, direction);\n            this._currentIndicatorRotation =\n                -Math.sign(direction[2]) * Math.acos(direction[0]) - Math.PI * 0.5;\n            this.teleportIndicatorMeshObject.resetPositionRotation();\n            this.teleportIndicatorMeshObject.rotateAxisAngleRad([0, 1, 0], this._currentIndicatorRotation);\n            this.teleportIndicatorMeshObject.translate(rayHit.locations[0]);\n            this.teleportIndicatorMeshObject.active = true;\n            this.hitSpot = rayHit.locations[0];\n            this._hasHit = true;\n        }\n        else {\n            if (!this.indicatorHidden) {\n                this.teleportIndicatorMeshObject.active = false;\n                this.indicatorHidden = true;\n            }\n            this._hasHit = false;\n        }\n    }\n    _teleportPlayer(newPosition, rotationToAdd) {\n        this.camRoot.rotateAxisAngleRad([0, 1, 0], rotationToAdd);\n        const p = this._tempVec;\n        const p1 = this._tempVec0;\n        if (this.session) {\n            this.eyeLeft.getPositionWorld(p);\n            this.eyeRight.getPositionWorld(p1);\n            vec3.add(p, p, p1);\n            vec3.scale(p, p, 0.5);\n        }\n        else {\n            this.cam.getPositionWorld(p);\n        }\n        this.camRoot.getPositionWorld(p1);\n        vec3.sub(p, p1, p);\n        p[0] += newPosition[0];\n        p[1] = newPosition[1];\n        p[2] += newPosition[2];\n        this.camRoot.setPositionWorld(p);\n    }\n}\nexport { TeleportComponent };\n", "import { Component, Type, Mesh, MeshIndexType, MeshAttribute } from '@wonderlandengine/api';\nimport { vec3 } from 'gl-matrix';\nconst direction = vec3.create();\nconst offset = vec3.create();\nconst normal = vec3.create();\n/**\n * Dynamic mesh-based trail\n *\n * This component keeps track of the world position of the object it's added to.\n * At a fixed interval the world position is stored as start and end points of the trail segments.\n *\n * The trail tapers off along its length. UV texture coordinates are setup such that the\n * U-axis covers the width of the trail and the V-axis covers the length of the trail.\n * This allows the trail's appearance to be defined using a texture.\n */\nclass Trail extends Component {\n    static TypeName = 'trail';\n    static Properties = {\n        /** The material to apply to the trail mesh */\n        material: { type: Type.Material },\n        /** The number of segments in the trail mesh */\n        segments: { type: Type.Int, default: 50 },\n        /** The time interval before recording a new point */\n        interval: { type: Type.Float, default: 0.1 },\n        /** The width of the trail (in world space) */\n        width: { type: Type.Float, default: 1.0 },\n        /** Whether or not the trail should taper off */\n        taper: { type: Type.Bool, default: true },\n        /**\n         * The maximum delta time in seconds, above which the trail resets.\n         * This prevents the trail from jumping around when updates happen\n         * infrequently (e.g. when the tab doesn't have focus).\n         */\n        resetThreshold: { type: Type.Float, default: 0.5 },\n    };\n    init() {\n        this.points = new Array(this.segments + 1);\n        for (let i = 0; i < this.points.length; ++i) {\n            this.points[i] = vec3.create();\n        }\n        /* The points array is circular, so keep track of its head */\n        this.currentPointOffset = 0;\n        this.up = [0, 1, 0];\n        this.timeTillNext = this.interval;\n    }\n    start() {\n        this.trailContainer = this.engine.scene.addObject();\n        this.meshComp = this.trailContainer.addComponent('mesh');\n        this.meshComp.material = this.material;\n        /* Each point will have two vertices; one on either side */\n        const vertexCount = 2 * this.points.length;\n        /* Each segment consists of two triangles */\n        this.indexData = new Uint32Array(6 * this.segments);\n        for (let i = 0, v = 0; i < vertexCount - 2; i += 2, v += 6) {\n            this.indexData\n                .subarray(v, v + 6)\n                .set([i + 1, i + 0, i + 2, i + 2, i + 3, i + 1]);\n        }\n        this.mesh = new Mesh(this.engine, {\n            vertexCount: vertexCount,\n            indexData: this.indexData,\n            indexType: MeshIndexType.UnsignedInt,\n        });\n        this.meshComp.mesh = this.mesh;\n    }\n    updateVertices() {\n        const positions = this.mesh.attribute(MeshAttribute.Position);\n        const texCoords = this.mesh.attribute(MeshAttribute.TextureCoordinate);\n        const normals = this.mesh.attribute(MeshAttribute.Normal);\n        vec3.set(direction, 0, 0, 0);\n        for (let i = 0; i < this.points.length; ++i) {\n            const curr = this.points[(this.currentPointIndex + i + 1) % this.points.length];\n            const next = this.points[(this.currentPointIndex + i + 2) % this.points.length];\n            /* The last point has no next, so re-use the direction of the previous segment */\n            if (i !== this.points.length - 1) {\n                vec3.sub(direction, next, curr);\n            }\n            vec3.cross(offset, this.up, direction);\n            vec3.normalize(offset, offset);\n            const timeFraction = 1.0 - this.timeTillNext / this.interval;\n            const fraction = (i - timeFraction) / this.segments;\n            vec3.scale(offset, offset, ((this.taper ? fraction : 1.0) * this.width) / 2.0);\n            positions.set(i * 2, [\n                curr[0] - offset[0],\n                curr[1] - offset[1],\n                curr[2] - offset[2],\n            ]);\n            positions.set(i * 2 + 1, [\n                curr[0] + offset[0],\n                curr[1] + offset[1],\n                curr[2] + offset[2],\n            ]);\n            if (normals) {\n                vec3.cross(normal, direction, offset);\n                vec3.normalize(normal, normal);\n                normals.set(i * 2, normal);\n                normals.set(i * 2 + 1, normal);\n            }\n            if (texCoords) {\n                texCoords.set(i * 2, [0, fraction]);\n                texCoords.set(i * 2 + 1, [1, fraction]);\n            }\n        }\n        /* Notify WLE that the mesh has changed */\n        this.mesh.update();\n    }\n    resetTrail() {\n        this.object.getTranslationWorld(this.points[0]);\n        for (let i = 1; i < this.points.length; ++i) {\n            vec3.copy(this.points[i], this.points[0]);\n        }\n        this.currentPointIndex = 0;\n        this.timeTillNext = this.interval;\n    }\n    update(dt) {\n        this.timeTillNext -= dt;\n        if (dt > this.resetThreshold) {\n            this.resetTrail();\n        }\n        if (this.timeTillNext < 0) {\n            this.currentPointIndex = (this.currentPointIndex + 1) % this.points.length;\n            this.timeTillNext = (this.timeTillNext % this.interval) + this.interval;\n        }\n        this.object.getTranslationWorld(this.points[this.currentPointIndex]);\n        this.updateVertices();\n    }\n    onActivate() {\n        this.resetTrail();\n    }\n    onDestroy() {\n        this.trailContainer.destroy();\n        this.mesh.destroy();\n    }\n}\nexport { Trail };\n", "import { Component, Type } from '@wonderlandengine/api';\nimport { vec3, quat } from 'gl-matrix';\nMath.clamp = function (v, a, b) {\n    return Math.max(a, Math.min(v, b));\n};\n// From http://theorangeduck.com/page/simple-two-joint\nconst twoJointIK = (function () {\n    let ta = new Float32Array(3);\n    let ca = new Float32Array(3);\n    let ba = new Float32Array(3);\n    let ab = new Float32Array(3);\n    let cb = new Float32Array(3);\n    let axis0 = new Float32Array(3);\n    let axis1 = new Float32Array(3);\n    let temp = new Float32Array(4);\n    let r0 = new Float32Array(4);\n    let r1 = new Float32Array(4);\n    let r2 = new Float32Array(4);\n    return function (a_lr, b_lr, a, b, c, t, eps, a_gr, b_gr, helper) {\n        vec3.sub(ba, b, a);\n        const lab = vec3.length(ba);\n        vec3.sub(ta, b, c);\n        const lcb = vec3.length(ta);\n        vec3.sub(ta, t, a);\n        const lat = Math.clamp(vec3.length(ta), eps, lab + lcb - eps);\n        vec3.sub(ca, c, a);\n        vec3.sub(ab, a, b);\n        vec3.sub(cb, c, b);\n        vec3.normalize(ca, ca);\n        vec3.normalize(ba, ba);\n        vec3.normalize(ab, ab);\n        vec3.normalize(cb, cb);\n        vec3.normalize(ta, ta);\n        const ac_ab_0 = Math.acos(Math.clamp(vec3.dot(ca, ba), -1, 1));\n        const ba_bc_0 = Math.acos(Math.clamp(vec3.dot(ab, cb), -1, 1));\n        const ac_at_0 = Math.acos(Math.clamp(vec3.dot(ca, ta), -1, 1));\n        const ac_ab_1 = Math.acos(Math.clamp((lcb * lcb - lab * lab - lat * lat) / (-2 * lab * lat), -1, 1));\n        const ba_bc_1 = Math.acos(Math.clamp((lat * lat - lab * lab - lcb * lcb) / (-2 * lab * lcb), -1, 1));\n        vec3.sub(ca, c, a);\n        vec3.sub(ba, b, a);\n        vec3.sub(ta, t, a);\n        vec3.cross(axis0, ca, ba);\n        vec3.cross(axis1, ca, ta);\n        if (helper) {\n            vec3.sub(ba, helper, b);\n            vec3.transformQuat(ba, [0, 0, -1], b_gr);\n        }\n        else {\n            vec3.sub(ba, b, a);\n        }\n        const l = vec3.length(axis0);\n        if (l == 0) {\n            axis0.set([1, 0, 0]);\n        }\n        else {\n            vec3.scale(axis0, axis0, 1 / l);\n        }\n        vec3.normalize(axis1, axis1);\n        quat.conjugate(a_gr, a_gr);\n        quat.setAxisAngle(r0, vec3.transformQuat(temp, axis0, a_gr), ac_ab_1 - ac_ab_0);\n        quat.setAxisAngle(r2, vec3.transformQuat(temp, axis1, a_gr), ac_at_0);\n        quat.mul(a_lr, a_lr, quat.mul(temp, r0, r2));\n        quat.normalize(a_lr, a_lr);\n        quat.conjugate(b_gr, b_gr);\n        quat.setAxisAngle(r1, vec3.transformQuat(temp, axis0, b_gr), ba_bc_1 - ba_bc_0);\n        quat.mul(b_lr, b_lr, r1);\n        quat.normalize(b_lr, b_lr);\n    };\n})();\n/**\n * Inverse Kinematics for two-joint chains (e.g. knees or ellbows)\n */\nclass TwoJointIkSolver extends Component {\n    static TypeName = 'two-joint-ik-solver';\n    static Properties = {\n        /** Root bone, never moves */\n        root: { type: Type.Object },\n        /** Bone attached to the root */\n        middle: { type: Type.Object },\n        /** Bone attached to the middle */\n        end: { type: Type.Object },\n        /** Target the joins should reach for */\n        target: { type: Type.Object },\n        /** Helper object to use to determine joint rotation axis */\n        helper: { type: Type.Object },\n    };\n    init() {\n        this.pos = new Float32Array(3 * 7);\n        this.p = [\n            this.pos.subarray(0, 3),\n            this.pos.subarray(3, 6),\n            this.pos.subarray(6, 9),\n            this.pos.subarray(9, 12),\n            this.pos.subarray(12, 15),\n            this.pos.subarray(15, 18),\n            this.pos.subarray(18, 21),\n        ];\n    }\n    update() {\n        const p = this.p;\n        this.root.getTranslationWorld(p[0]);\n        this.middle.getTranslationWorld(p[1]);\n        this.end.getTranslationWorld(p[2]);\n        this.target.getTranslationWorld(p[3]);\n        const tla = p[4];\n        const tlb = p[5];\n        this.root.getTranslationLocal(tla);\n        this.middle.getTranslationLocal(tlb);\n        if (this.helper)\n            this.helper.getTranslationWorld(p[6]);\n        twoJointIK(this.root.transformLocal, this.middle.transformLocal, p[0], p[1], p[2], p[3], 0.01, this.root.transformWorld.subarray(0, 4), this.middle.transformWorld.subarray(0, 4), this.helper ? p[6] : null);\n        this.root.setTranslationLocal(tla);\n        this.middle.setTranslationLocal(tlb);\n        this.root.setDirty();\n        this.middle.setDirty();\n    }\n}\nexport { TwoJointIkSolver };\n", "import { Component, Texture, Property } from '@wonderlandengine/api';\nimport { setFirstMaterialTexture } from './utils/utils.js';\n/**\n * Downloads a video from URL and applies it as `diffuseTexture` or `flatTexture`\n * on given material.\n *\n * Video textures need to be updated regularly whenever\n * a new frame is available. This component handles the\n * detection of a new frame and updates the texture to\n * reflect the video's current frame.\n *\n * Materials from the following shaders are supported:\n *  - \"Phong Opaque Textured\"\n *  - \"Flat Opaque Textured\"\n *  - \"Background\"\n *  - \"Physical Opaque Textured\"\n *  - \"Foliage\"\n *\n * The video can be accessed through `this.video`:\n *\n * ```js\n *   let videoTexture = this.object.getComponent('video-texture');\n *   videoTexture.video.play();\n *   videoTexture.video.pause();\n * ```\n *\n * See [Video Example](/showcase/video).\n */\nclass VideoTexture extends Component {\n    static TypeName = 'video-texture';\n    static Properties = {\n        /** URL to download video from */\n        url: Property.string(),\n        /** Material to apply the video texture to */\n        material: Property.material(),\n        /** Whether to loop the video */\n        loop: Property.bool(true),\n        /** Whether to automatically start playing the video */\n        autoplay: Property.bool(true),\n        /** Whether to mute sound */\n        muted: Property.bool(true),\n        /** Name of the texture property to set */\n        textureProperty: Property.string('auto'),\n    };\n    init() {\n        if (!this.material) {\n            throw Error('video-texture: material property not set');\n        }\n        this.loaded = false;\n        this.frameUpdateRequested = true;\n    }\n    start() {\n        this.video = document.createElement('video');\n        this.video.src = this.url;\n        this.video.crossOrigin = 'anonymous';\n        this.video.playsInline = true;\n        this.video.loop = this.loop;\n        this.video.muted = this.muted;\n        this.video.addEventListener('playing', () => {\n            this.loaded = true;\n        });\n        if (this.autoplay) {\n            const playAfterUserGesture = () => {\n                this.video.play();\n                window.removeEventListener('click', playAfterUserGesture);\n                window.removeEventListener('touchstart', playAfterUserGesture);\n            };\n            window.addEventListener('click', playAfterUserGesture);\n            window.addEventListener('touchstart', playAfterUserGesture);\n        }\n    }\n    applyTexture() {\n        const mat = this.material;\n        const shader = mat.shader;\n        const texture = (this.texture = new Texture(this.engine, this.video));\n        if (!setFirstMaterialTexture(mat, texture, this.textureProperty)) {\n            console.error('Shader', shader, 'not supported by video-texture');\n        }\n        if ('requestVideoFrameCallback' in this.video) {\n            this.video.requestVideoFrameCallback(this.updateVideo.bind(this));\n        }\n        else {\n            this.video.addEventListener('timeupdate', () => {\n                this.frameUpdateRequested = true;\n            });\n        }\n    }\n    update(dt) {\n        if (this.loaded && this.frameUpdateRequested) {\n            if (this.texture) {\n                this.texture.update();\n            }\n            else {\n                /* Apply texture on first frame update request */\n                this.applyTexture();\n            }\n            this.frameUpdateRequested = false;\n        }\n    }\n    updateVideo() {\n        this.frameUpdateRequested = true;\n        this.video.requestVideoFrameCallback(this.updateVideo.bind(this));\n    }\n}\nexport { VideoTexture };\n", "import { Component, Type } from '@wonderlandengine/api';\n/**\n * Allows switching all other components on an object to active/inactive\n * depending on whether a VR/AR session is active.\n *\n * Useful for hiding controllers until the user enters VR for example.\n */\nclass VrModeActiveSwitch extends Component {\n    static TypeName = 'vr-mode-active-switch';\n    static Properties = {\n        /** When components should be active: In VR or when not in VR */\n        activateComponents: {\n            type: Type.Enum,\n            values: ['in VR', 'in non-VR'],\n            default: 'in VR',\n        },\n        /** Whether child object's components should be affected */\n        affectChildren: { type: Type.Bool, default: true },\n    };\n    start() {\n        this.components = [];\n        this.getComponents(this.object);\n        /* Initial activation/deactivation */\n        this.onXRSessionEnd();\n        this.onSessionStartCallback = this.onXRSessionStart.bind(this);\n        this.onSessionEndCallback = this.onXRSessionEnd.bind(this);\n    }\n    onActivate() {\n        this.engine.onXRSessionStart.add(this.onSessionStartCallback);\n        this.engine.onXRSessionEnd.add(this.onSessionEndCallback);\n    }\n    onDeactivate() {\n        this.engine.onXRSessionStart.remove(this.onSessionStartCallback);\n        this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);\n    }\n    getComponents(obj) {\n        const comps = obj.getComponents().filter((c) => c.type !== 'vr-mode-active-switch');\n        this.components = this.components.concat(comps);\n        if (this.affectChildren) {\n            let children = obj.children;\n            for (let i = 0; i < children.length; ++i) {\n                this.getComponents(children[i]);\n            }\n        }\n    }\n    setComponentsActive(active) {\n        const comps = this.components;\n        for (let i = 0; i < comps.length; ++i) {\n            comps[i].active = active;\n        }\n    }\n    onXRSessionStart() {\n        this.setComponentsActive(this.activateComponents == 0);\n    }\n    onXRSessionEnd() {\n        this.setComponentsActive(this.activateComponents != 0);\n    }\n}\nexport { VrModeActiveSwitch };\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Collider, CollisionComponent, Component, Emitter, Mesh, MeshAttribute, MeshComponent, MeshIndexType, } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { setXRRigidTransformLocal } from './utils/webxr.js';\n// FIXME: earcut overrides default export, breaking our tests\nimport earcut from 'earcut';\nconst tempVec3 = new Float32Array(3);\n/** Compute minimum and maxium extents of given list of contour points */\nfunction extentsFromContour(out, points) {\n    if (points.length == 0)\n        return out;\n    let absMaxX = Math.abs(points[0].x);\n    let absMaxZ = Math.abs(points[0].z);\n    for (let i = 1; i < points.length; ++i) {\n        absMaxX = Math.max(absMaxX, Math.abs(points[i].x));\n        absMaxZ = Math.max(absMaxZ, Math.abs(points[i].z));\n    }\n    out[0] = absMaxX;\n    out[1] = 0;\n    out[2] = absMaxZ;\n}\n/** Check whether x lies between a and b */\nfunction within(x, a, b) {\n    if (a > b)\n        return x < a && x > b;\n    return x > a && x < b;\n}\n/**\n * Check whether given point on plane's bounding box is inside plane's polygon\n *\n * @param p 3D point in plane's local space, Y value is ignored, since it is assumed\n *     that the point was checked against the plane's bounding box.\n * @param plane XRPlane that has `XRPlane.polygon`\n * @returns `true` if the point lies on the plane\n */\nexport function isPointLocalOnXRPlanePolygon(p, plane) {\n    const points = plane.polygon;\n    if (points.length < 3)\n        return false;\n    /* Count ray intersections: even == inside, odd == outside */\n    const pX = p[0];\n    const pZ = p[2];\n    let intersections = 0;\n    for (let n = 0, l = points.length - 1; n < points.length; ++n) {\n        const aX = points[l].x;\n        const aZ = points[l].z;\n        const s = (points[n].z - aZ) / (points[n].x - aX);\n        const x = Math.abs((pZ - aZ) / s);\n        if (x >= 0.0 && x <= 1.0 && within(x + pX, aX, points[n].x))\n            ++intersections;\n        l = n;\n    }\n    return (intersections & 1) == 0;\n}\n/**\n * Check whether given point on plane's bounding box is inside plane's polygon\n *\n * @param p 3D point to test. It is assumed that the point was checked against\n *     the plane's bounding box beforehand.\n * @param plane XRPlane that has `XRPlane.polygon`\n * @returns `true` if the point lies on the plane\n */\nexport function isPointWorldOnXRPlanePolygon(object, p, plane) {\n    if (plane.polygon.length < 3)\n        return false;\n    isPointLocalOnXRPlanePolygon(object.transformPointInverseWorld(tempVec3, p), plane);\n}\n/**\n * Create a plane mesh from a list of contour points\n *\n * @param engine Engine to create the mesh with\n * @param points Contour points\n * @param meshToUpdate Optional mesh to update instead of creating a new one.\n */\nfunction planeMeshFromContour(engine, points, meshToUpdate = null) {\n    const vertexCount = points.length;\n    const vertices = new Float32Array(vertexCount * 2);\n    for (let i = 0, d = 0; i < vertexCount; ++i, d += 2) {\n        vertices[d] = points[i].x;\n        vertices[d + 1] = points[i].z;\n    }\n    const triangles = earcut(vertices);\n    const mesh = meshToUpdate ||\n        new Mesh(engine, {\n            vertexCount,\n            /* Assumption here that we will never have more than 256 points\n             * in the detected plane meshes! */\n            indexType: MeshIndexType.UnsignedByte,\n            indexData: triangles,\n        });\n    if (mesh.vertexCount !== vertexCount) {\n        console.warn('vertexCount of meshToUpdate did not match required vertexCount');\n        return mesh;\n    }\n    const positions = mesh.attribute(MeshAttribute.Position);\n    const textureCoords = mesh.attribute(MeshAttribute.TextureCoordinate);\n    const normals = mesh.attribute(MeshAttribute.Normal);\n    tempVec3[1] = 0;\n    for (let i = 0, s = 0; i < vertexCount; ++i, s += 2) {\n        tempVec3[0] = vertices[s];\n        tempVec3[2] = vertices[s + 1];\n        positions.set(i, tempVec3);\n    }\n    textureCoords?.set(0, vertices);\n    if (normals) {\n        tempVec3[0] = 0;\n        tempVec3[1] = 1;\n        tempVec3[2] = 0;\n        for (let i = 0; i < vertexCount; ++i) {\n            normals.set(i, tempVec3);\n        }\n    }\n    if (meshToUpdate)\n        mesh.update();\n    return mesh;\n}\n/**\n * Generate meshes and collisions for XRPlanes using [WebXR Device API - Plane Detection](https://immersive-web.github.io/real-world-geometry/plane-detection.html).\n */\nclass PlaneDetection extends Component {\n    static TypeName = 'plane-detection';\n    /**\n     * Material to assign to created plane meshes or `null` if meshes should not be created.\n     */\n    planeMaterial = null;\n    /**\n     * Collision mask to assign to newly created collision components or a negative value if\n     * collision components should not be created.\n     */\n    collisionMask = -1;\n    /** Map of all planes and their last updated timestamps */\n    planes = new Map();\n    /** Objects generated for each XRPlane */\n    planeObjects = new Map();\n    /** Called when a plane starts tracking */\n    onPlaneFound = new Emitter();\n    /** Called when a plane stops tracking */\n    onPlaneLost = new Emitter();\n    update() {\n        if (!this.engine.xr?.frame)\n            return;\n        // @ts-ignore\n        if (this.engine.xr.frame.detectedPlanes === undefined) {\n            console.error('plane-detection: WebXR feature not available.');\n            this.active = false;\n            return;\n        }\n        // @ts-ignore\n        const detectedPlanes = this.engine.xr.frame.detectedPlanes;\n        for (const [plane, _] of this.planes) {\n            if (!detectedPlanes.has(plane)) {\n                this.#planeLost(plane);\n            }\n        }\n        detectedPlanes.forEach((plane) => {\n            if (this.planes.has(plane)) {\n                if (plane.lastChangedTime > this.planes.get(plane)) {\n                    this.#planeUpdate(plane);\n                }\n            }\n            else {\n                this.#planeFound(plane);\n            }\n            this.#planeUpdatePose(plane);\n        });\n    }\n    #planeLost(plane) {\n        this.planes.delete(plane);\n        const o = this.planeObjects.get(plane);\n        this.onPlaneLost.notify(plane, o);\n        /* User might destroy the object */\n        if (o.objectId > 0)\n            o.destroy();\n    }\n    #planeFound(plane) {\n        this.planes.set(plane, plane.lastChangedTime);\n        const o = this.engine.scene.addObject(this.object);\n        this.planeObjects.set(plane, o);\n        if (this.planeMaterial) {\n            o.addComponent(MeshComponent, {\n                mesh: planeMeshFromContour(this.engine, plane.polygon),\n                material: this.planeMaterial,\n            });\n        }\n        if (this.collisionMask >= 0) {\n            extentsFromContour(tempVec3, plane.polygon);\n            tempVec3[1] = 0.025;\n            o.addComponent(CollisionComponent, {\n                group: this.collisionMask,\n                collider: Collider.Box,\n                extents: tempVec3,\n            });\n        }\n        this.onPlaneFound.notify(plane, o);\n    }\n    #planeUpdate(plane) {\n        this.planes.set(plane, plane.lastChangedTime);\n        const planeMesh = this.planeObjects.get(plane).getComponent(MeshComponent);\n        if (!planeMesh)\n            return;\n        planeMeshFromContour(this.engine, plane.polygon, planeMesh.mesh);\n    }\n    #planeUpdatePose(plane) {\n        const o = this.planeObjects.get(plane);\n        const pose = this.engine.xr.frame.getPose(plane.planeSpace, this.engine.xr.currentReferenceSpace);\n        if (!pose) {\n            o.active = false;\n            return;\n        }\n        setXRRigidTransformLocal(o, pose.transform);\n    }\n}\n__decorate([\n    property.material()\n], PlaneDetection.prototype, \"planeMaterial\", void 0);\n__decorate([\n    property.int()\n], PlaneDetection.prototype, \"collisionMask\", void 0);\nexport { PlaneDetection };\n", "import { Component, Type } from '@wonderlandengine/api';\nimport { vec3, mat4, quat, quat2 } from 'gl-matrix';\nconst VRM_ROLL_AXES = {\n    X: [1.0, 0.0, 0.0],\n    Y: [0.0, 1.0, 0.0],\n    Z: [0.0, 0.0, 1.0],\n};\nconst VRM_AIM_AXES = {\n    PositiveX: [1.0, 0.0, 0.0],\n    NegativeX: [-1.0, 0.0, 0.0],\n    PositiveY: [0.0, 1.0, 0.0],\n    NegativeY: [0.0, -1.0, 0.0],\n    PositiveZ: [0.0, 0.0, 1.0],\n    NegativeZ: [0.0, 0.0, -1.0],\n};\n/**\n * Component for loading and handling VRM 1.0 models.\n *\n * Posing of the model should be done exclusively by rotating the bones. These can be\n * accessed using the `.bones` property and follow the VRM bone naming. Note that not\n * all VRM models will have all possible bones. The rest pose (T-pose) is captured in\n * the `.restPose` property. Resetting a bone to its rest pose can be done as follows:\n * ```js\n * vrmComponent.bones[vrmBoneName].rotationLocal = vrmComponent.restPose[vrmBoneName];\n * ```\n *\n * Moving the model through the world should be done by moving the object this component\n * is attached to. In other words, by moving the root of the VRM model. The bones and any\n * descendant objects should *not* be used to move the VRM model.\n *\n * The core extension `VRMC_vrm` as well as the`VRMC_springBone` and `VRMC_node_constraint`\n * extensions are supported.\n *\n * **Limitations:**\n * - No support for `VRMC_material_mtoon`\n * - Expressions aren't supported\n * - Expression based lookAt isn't supported\n * - Mesh annotation mode `auto` is not supported (first person mode)\n */\nclass Vrm extends Component {\n    static TypeName = 'vrm';\n    static Properties = {\n        /** URL to a VRM file to load */\n        src: { type: Type.String },\n        /** Object the VRM is looking at */\n        lookAtTarget: { type: Type.Object },\n    };\n    /** Meta information about the VRM model */\n    meta = null;\n    /** The humanoid bones of the VRM model */\n    bones = {\n        /* Torso */\n        hips: null,\n        spine: null,\n        chest: null,\n        upperChest: null,\n        neck: null,\n        /* Head */\n        head: null,\n        leftEye: null,\n        rightEye: null,\n        jaw: null,\n        /* Legs */\n        leftUpperLeg: null,\n        leftLowerLeg: null,\n        leftFoot: null,\n        leftToes: null,\n        rightUpperLeg: null,\n        rightLowerLeg: null,\n        rightFoot: null,\n        rightToes: null,\n        /* Arms */\n        leftShoulder: null,\n        leftUpperArm: null,\n        leftLowerArm: null,\n        leftHand: null,\n        rightShoulder: null,\n        rightUpperArm: null,\n        rightLowerArm: null,\n        rightHand: null,\n        /* Fingers */\n        leftThumbMetacarpal: null,\n        leftThumbProximal: null,\n        leftThumbDistal: null,\n        leftIndexProximal: null,\n        leftIndexIntermediate: null,\n        leftIndexDistal: null,\n        leftMiddleProximal: null,\n        leftMiddleIntermediate: null,\n        leftMiddleDistal: null,\n        leftRingProximal: null,\n        leftRingIntermediate: null,\n        leftRingDistal: null,\n        leftLittleProximal: null,\n        leftLittleIntermediate: null,\n        leftLittleDistal: null,\n        rightThumbMetacarpal: null,\n        rightThumbProximal: null,\n        rightThumbDistal: null,\n        rightIndexProximal: null,\n        rightIndexIntermediate: null,\n        rightIndexDistal: null,\n        rightMiddleProximal: null,\n        rightMiddleIntermediate: null,\n        rightMiddleDistal: null,\n        rightRingProximal: null,\n        rightRingIntermediate: null,\n        rightRingDistal: null,\n        rightLittleProximal: null,\n        rightLittleIntermediate: null,\n        rightLittleDistal: null,\n    };\n    /** Rotations of the bones in the rest pose (T-pose) */\n    restPose = {};\n    /* All node constraints, ordered to deal with dependencies */\n    _nodeConstraints = [];\n    /* VRMC_springBone chains */\n    _springChains = [];\n    /* Spherical colliders for spring bones */\n    _sphereColliders = [];\n    /* Capsule shaped colliders for spring bones */\n    _capsuleColliders = [];\n    /* Indicates which meshes are rendered in first/third person views */\n    _firstPersonAnnotations = [];\n    /* Contains details for (bone type) lookAt behaviour */\n    _lookAt = null;\n    /* Whether or not the VRM component has been initialized with `initializeVrm` */\n    _initialized = false;\n    init() {\n        this._tempV3 = vec3.create();\n        this._tempV3A = vec3.create();\n        this._tempV3B = vec3.create();\n        this._tempQuat = quat.create();\n        this._tempQuatA = quat.create();\n        this._tempQuatB = quat.create();\n        this._tempMat4A = mat4.create();\n        this._tempQuat2 = quat2.create();\n        this._tailToShape = vec3.create();\n        this._headToTail = vec3.create();\n        this._inertia = vec3.create();\n        this._stiffness = vec3.create();\n        this._external = vec3.create();\n        this._rightVector = vec3.set(vec3.create(), 1, 0, 0);\n        this._upVector = vec3.set(vec3.create(), 0, 1, 0);\n        this._forwardVector = vec3.set(vec3.create(), 0, 0, 1);\n        this._identityQuat = quat.identity(quat.create());\n        this._rad2deg = 180.0 / Math.PI;\n    }\n    start() {\n        if (!this.src) {\n            console.error('vrm: src property not set');\n            return;\n        }\n        this.engine.scene\n            .append(this.src, { loadGltfExtensions: true })\n            .then(({ root, extensions }) => {\n            root.children.forEach((child) => (child.parent = this.object));\n            this._initializeVrm(extensions);\n            root.destroy();\n        });\n    }\n    /**\n     * Parses the VRM glTF extensions and initializes the vrm component.\n     * @param {GLTFExtensions} extensions The glTF extensions for the VRM model\n     */\n    _initializeVrm(extensions) {\n        if (this._initialized) {\n            throw Error('VRM component has already been initialized');\n        }\n        const VRMC_vrm = extensions.root['VRMC_vrm'];\n        if (!VRMC_vrm) {\n            throw Error('Missing VRM extensions');\n        }\n        if (VRMC_vrm.specVersion !== '1.0') {\n            throw Error(`Unsupported VRM version, only 1.0 is supported, but encountered '${VRMC_vrm.specVersion}'`);\n        }\n        this.meta = VRMC_vrm.meta;\n        this._parseHumanoid(VRMC_vrm.humanoid, extensions);\n        if (VRMC_vrm.firstPerson) {\n            this._parseFirstPerson(VRMC_vrm.firstPerson, extensions);\n        }\n        if (VRMC_vrm.lookAt) {\n            this._parseLookAt(VRMC_vrm.lookAt);\n        }\n        this._findAndParseNodeConstraints(extensions);\n        const springBone = extensions.root['VRMC_springBone'];\n        if (springBone) {\n            this._parseAndInitializeSpringBones(springBone, extensions);\n        }\n        this._initialized = true;\n    }\n    _parseHumanoid(humanoid, extensions) {\n        for (const boneName in humanoid.humanBones) {\n            if (!(boneName in this.bones)) {\n                console.warn(`Unrecognized bone '${boneName}'`);\n                continue;\n            }\n            const node = humanoid.humanBones[boneName].node;\n            const objectId = extensions.idMapping[node];\n            this.bones[boneName] = this.engine.wrapObject(objectId);\n            this.restPose[boneName] = quat.copy(quat.create(), this.bones[boneName].rotationLocal);\n        }\n    }\n    _parseFirstPerson(firstPerson, extensions) {\n        for (const meshAnnotation of firstPerson.meshAnnotations) {\n            const annotation = {\n                node: this.engine.wrapObject(extensions.idMapping[meshAnnotation.node]),\n                firstPerson: true,\n                thirdPerson: true,\n            };\n            switch (meshAnnotation.type) {\n                case 'firstPersonOnly':\n                    annotation.thirdPerson = false;\n                    break;\n                case 'thirdPersonOnly':\n                    annotation.firstPerson = false;\n                    break;\n                case 'both':\n                    break;\n                case 'auto':\n                    console.warn(\"First person mesh annotation type 'auto' is not supported, treating as 'both'!\");\n                    break;\n                default:\n                    console.error(`Invalid mesh annotation type '${meshAnnotation.type}'`);\n                    break;\n            }\n            this._firstPersonAnnotations.push(annotation);\n        }\n    }\n    _parseLookAt(lookAt) {\n        if (lookAt.type !== 'bone') {\n            console.warn(`Unsupported lookAt type '${lookAt.type}', only 'bone' is supported`);\n            return;\n        }\n        const parseRangeMap = (rangeMap) => {\n            return {\n                inputMaxValue: rangeMap.inputMaxValue,\n                outputScale: rangeMap.outputScale,\n            };\n        };\n        this._lookAt = {\n            offsetFromHeadBone: lookAt.offsetFromHeadBone || [0, 0, 0],\n            horizontalInner: parseRangeMap(lookAt.rangeMapHorizontalInner),\n            horizontalOuter: parseRangeMap(lookAt.rangeMapHorizontalOuter),\n            verticalDown: parseRangeMap(lookAt.rangeMapVerticalDown),\n            verticalUp: parseRangeMap(lookAt.rangeMapVerticalUp),\n        };\n    }\n    _findAndParseNodeConstraints(extensions) {\n        const traverse = (object) => {\n            const nodeExtensions = extensions.node[object.objectId];\n            if (nodeExtensions && 'VRMC_node_constraint' in nodeExtensions) {\n                const nodeConstraintExtension = nodeExtensions['VRMC_node_constraint'];\n                const constraint = nodeConstraintExtension.constraint;\n                let type, axis;\n                if ('roll' in constraint) {\n                    type = 'roll';\n                    axis = VRM_ROLL_AXES[constraint.roll.rollAxis];\n                }\n                else if ('aim' in constraint) {\n                    type = 'aim';\n                    axis = VRM_AIM_AXES[constraint.aim.aimAxis];\n                }\n                else if ('rotation' in constraint) {\n                    type = 'rotation';\n                }\n                if (type) {\n                    const source = this.engine.wrapObject(extensions.idMapping[constraint[type].source]);\n                    this._nodeConstraints.push({\n                        type,\n                        source,\n                        destination: object,\n                        axis: axis,\n                        weight: constraint[type].weight,\n                        /* Rest pose */\n                        destinationRestLocalRotation: quat.copy(quat.create(), object.rotationLocal),\n                        sourceRestLocalRotation: quat.copy(quat.create(), source.rotationLocal),\n                        sourceRestLocalRotationInv: quat.invert(quat.create(), source.rotationLocal),\n                    });\n                }\n                else {\n                    console.warn('Unrecognized or invalid VRMC_node_constraint, ignoring it');\n                }\n            }\n            for (const child of object.children) {\n                traverse(child);\n            }\n        };\n        traverse(this.object);\n    }\n    _parseAndInitializeSpringBones(springBone, extensions) {\n        const colliders = (springBone.colliders || []).map((collider, i) => {\n            const shapeType = 'capsule' in collider.shape ? 'capsule' : 'sphere';\n            return {\n                id: i,\n                object: this.engine.wrapObject(extensions.idMapping[collider.node]),\n                shape: {\n                    isCapsule: shapeType === 'capsule',\n                    radius: collider.shape[shapeType].radius,\n                    offset: collider.shape[shapeType].offset,\n                    tail: collider.shape[shapeType].tail,\n                },\n                cache: {\n                    head: vec3.create(),\n                    tail: vec3.create(),\n                },\n            };\n        });\n        this._sphereColliders = colliders.filter((c) => !c.shape.isCapsule);\n        this._capsuleColliders = colliders.filter((c) => c.shape.isCapsule);\n        const colliderGroups = (springBone.colliderGroups || []).map((group) => ({\n            name: group.name,\n            colliders: group.colliders.map((c) => colliders[c]),\n        }));\n        for (const spring of springBone.springs) {\n            const joints = [];\n            for (const joint of spring.joints) {\n                const springJoint = {\n                    hitRadius: 0.0,\n                    stiffness: 1.0,\n                    gravityPower: 0.0,\n                    gravityDir: [0.0, -1.0, 0.0],\n                    dragForce: 0.5,\n                    node: null,\n                    state: null,\n                };\n                Object.assign(springJoint, joint);\n                springJoint.node = this.engine.wrapObject(extensions.idMapping[springJoint.node]);\n                joints.push(springJoint);\n            }\n            const springChainColliders = (spring.colliderGroups || []).flatMap((cg) => colliderGroups[cg].colliders);\n            this._springChains.push({\n                name: spring.name,\n                center: spring.center\n                    ? this.engine.wrapObject(extensions.idMapping[spring.center])\n                    : null,\n                joints,\n                sphereColliders: springChainColliders.filter((c) => !c.shape.isCapsule),\n                capsuleColliders: springChainColliders.filter((c) => c.shape.isCapsule),\n            });\n        }\n        /* Initialize spring bone joint state */\n        for (const springChain of this._springChains) {\n            for (let i = 0; i < springChain.joints.length - 1; ++i) {\n                const springBoneJoint = springChain.joints[i];\n                const childSpringBoneJoint = springChain.joints[i + 1];\n                const springBonePosition = springBoneJoint.node.getTranslationWorld(vec3.create());\n                const childSpringBonePosition = childSpringBoneJoint.node.getTranslationWorld(vec3.create());\n                const boneDirection = vec3.subtract(this._tempV3A, springBonePosition, childSpringBonePosition);\n                const state = {\n                    prevTail: childSpringBonePosition,\n                    currentTail: vec3.copy(vec3.create(), childSpringBonePosition),\n                    initialLocalRotation: quat.copy(quat.create(), springBoneJoint.node.rotationLocal),\n                    initialLocalTransformInvert: quat2.invert(quat2.create(), springBoneJoint.node.transformLocal),\n                    boneAxis: vec3.normalize(vec3.create(), childSpringBoneJoint.node.getTranslationLocal(this._tempV3)),\n                    /* Ensure bone length is at least 1cm to avoid jittery behaviour from zero-length bones */\n                    boneLength: Math.max(0.01, vec3.length(boneDirection)),\n                    /* Tail positions in center space, if needed */\n                    prevTailCenter: null,\n                    currentTailCenter: null,\n                };\n                if (springChain.center) {\n                    state.prevTailCenter = springChain.center.transformPointInverseWorld(vec3.create(), childSpringBonePosition);\n                    state.currentTailCenter = vec3.copy(vec3.create(), childSpringBonePosition);\n                }\n                springBoneJoint.state = state;\n            }\n        }\n    }\n    update(dt) {\n        if (!this._initialized) {\n            return;\n        }\n        /* 1. Resolve humanoid bones (performed by user) */\n        /* 2. Resolve LookAt (bone type) as the position of the head is determined */\n        this._resolveLookAt();\n        /* 3. Expression update (TODO) */\n        /* 4. Apply Expression (TODO) */\n        /* 5. Resolve constraints */\n        this._resolveConstraints();\n        /* 6. Resolve Spring Bone */\n        this._updateSpringBones(dt);\n    }\n    _rangeMap(rangeMap, input) {\n        const maxValue = rangeMap.inputMaxValue;\n        const outputScale = rangeMap.outputScale;\n        return (Math.min(input, maxValue) / maxValue) * outputScale;\n    }\n    _resolveLookAt() {\n        if (!this._lookAt || !this.lookAtTarget) {\n            return;\n        }\n        const lookAtSource = this.bones.head.transformPointWorld(this._tempV3A, this._lookAt.offsetFromHeadBone);\n        const lookAtTarget = this.lookAtTarget.getTranslationWorld(this._tempV3B);\n        const lookAtDirection = vec3.sub(this._tempV3A, lookAtTarget, lookAtSource);\n        vec3.normalize(lookAtDirection, lookAtDirection);\n        /* Convert the direction into LookAt space */\n        this.bones.head.parent.transformVectorInverseWorld(lookAtDirection);\n        const z = vec3.dot(lookAtDirection, this._forwardVector);\n        const x = vec3.dot(lookAtDirection, this._rightVector);\n        const yaw = Math.atan2(x, z) * this._rad2deg;\n        const xz = Math.sqrt(x * x + z * z);\n        const y = vec3.dot(lookAtDirection, this._upVector);\n        let pitch = Math.atan2(-y, xz) * this._rad2deg;\n        /* Limit pitch */\n        if (pitch > 0) {\n            pitch = this._rangeMap(this._lookAt.verticalDown, pitch);\n        }\n        else {\n            pitch = -this._rangeMap(this._lookAt.verticalUp, -pitch);\n        }\n        /* Left eye (limit yaw) */\n        if (this.bones.leftEye) {\n            let yawLeft = yaw;\n            if (yawLeft > 0) {\n                yawLeft = this._rangeMap(this._lookAt.horizontalInner, yawLeft);\n            }\n            else {\n                yawLeft = -this._rangeMap(this._lookAt.horizontalOuter, -yawLeft);\n            }\n            const eyeRotation = quat.fromEuler(this._tempQuatA, pitch, yawLeft, 0);\n            this.bones.leftEye.rotationLocal = quat.multiply(eyeRotation, this.restPose.leftEye, eyeRotation);\n        }\n        /* Right eye (limit yaw) */\n        if (this.bones.rightEye) {\n            let yawRight = yaw;\n            if (yawRight > 0) {\n                yawRight = this._rangeMap(this._lookAt.horizontalOuter, yawRight);\n            }\n            else {\n                yawRight = -this._rangeMap(this._lookAt.horizontalInner, -yawRight);\n            }\n            const eyeRotation = quat.fromEuler(this._tempQuatA, pitch, yawRight, 0);\n            this.bones.rightEye.rotationLocal = quat.multiply(eyeRotation, this.restPose.rightEye, eyeRotation);\n        }\n    }\n    _resolveConstraints() {\n        for (const nodeConstraint of this._nodeConstraints) {\n            this._resolveConstraint(nodeConstraint);\n        }\n    }\n    _resolveConstraint(nodeConstraint) {\n        const dstRestQuat = nodeConstraint.destinationRestLocalRotation;\n        const srcRestQuatInv = nodeConstraint.sourceRestLocalRotationInv;\n        const targetQuat = quat.identity(this._tempQuatA);\n        switch (nodeConstraint.type) {\n            case 'roll':\n                {\n                    const deltaSrcQuat = quat.multiply(this._tempQuatA, srcRestQuatInv, nodeConstraint.source.rotationLocal);\n                    /* source to parent */\n                    const deltaSrcQuatInParent = quat.multiply(this._tempQuatA, nodeConstraint.sourceRestLocalRotation, deltaSrcQuat);\n                    quat.mul(deltaSrcQuatInParent, deltaSrcQuatInParent, srcRestQuatInv);\n                    /* parent to destination */\n                    const dstRestQuatInv = quat.invert(this._tempQuatB, dstRestQuat);\n                    const deltaSrcQuatInDst = quat.multiply(this._tempQuatB, dstRestQuatInv, deltaSrcQuatInParent);\n                    quat.multiply(deltaSrcQuatInDst, deltaSrcQuatInDst, dstRestQuat);\n                    const toVec = vec3.transformQuat(this._tempV3A, nodeConstraint.axis, deltaSrcQuatInDst);\n                    const fromToQuat = quat.rotationTo(this._tempQuatA, nodeConstraint.axis, toVec);\n                    quat.mul(targetQuat, dstRestQuat, quat.invert(this._tempQuat, fromToQuat));\n                    quat.mul(targetQuat, targetQuat, deltaSrcQuatInDst);\n                }\n                break;\n            case 'aim':\n                {\n                    const dstParentWorldQuat = nodeConstraint.destination.parent.rotationWorld;\n                    /* fromVec = aimAxis.applyQuaternion( dstParentWorldQuat * dstRestQuat ) */\n                    const fromVec = vec3.transformQuat(this._tempV3A, nodeConstraint.axis, dstRestQuat);\n                    vec3.transformQuat(fromVec, fromVec, dstParentWorldQuat);\n                    /* toVec = ( srcWorldPos - dstWorldPos ).normalized */\n                    const toVec = nodeConstraint.source.getTranslationWorld(this._tempV3B);\n                    vec3.sub(toVec, toVec, nodeConstraint.destination.getTranslationWorld(this._tempV3));\n                    vec3.normalize(toVec, toVec);\n                    /* fromToQuat = Quaternion.fromToRotation( fromVec, toVec ) */\n                    const fromToQuat = quat.rotationTo(this._tempQuatA, fromVec, toVec);\n                    quat.mul(targetQuat, quat.invert(this._tempQuat, dstParentWorldQuat), fromToQuat);\n                    quat.mul(targetQuat, targetQuat, dstParentWorldQuat);\n                    quat.mul(targetQuat, targetQuat, dstRestQuat);\n                }\n                break;\n            case 'rotation':\n                {\n                    const srcDeltaQuat = quat.mul(targetQuat, srcRestQuatInv, nodeConstraint.source.rotationLocal);\n                    quat.mul(targetQuat, dstRestQuat, srcDeltaQuat);\n                }\n                break;\n        }\n        /* Apply constraint */\n        quat.slerp(targetQuat, dstRestQuat, targetQuat, nodeConstraint.weight);\n        nodeConstraint.destination.rotationLocal = targetQuat;\n    }\n    _updateSpringBones(dt) {\n        /* Pre-compute collider positions */\n        this._sphereColliders.forEach(({ object, shape, cache }) => {\n            const offset = vec3.copy(cache.head, shape.offset);\n            object.transformVectorWorld(offset);\n            vec3.add(cache.head, object.getTranslationWorld(this._tempV3), offset);\n        });\n        this._capsuleColliders.forEach(({ object, shape, cache }) => {\n            const shapeCenter = object.getTranslationWorld(this._tempV3A);\n            const headOffset = vec3.copy(cache.head, shape.offset);\n            object.transformVectorWorld(headOffset);\n            vec3.add(cache.head, shapeCenter, headOffset);\n            const tailOffset = vec3.copy(cache.tail, shape.tail);\n            object.transformVectorWorld(tailOffset);\n            vec3.add(cache.tail, shapeCenter, tailOffset);\n        });\n        /* Update spring chains */\n        this._springChains.forEach((springChain) => {\n            for (let i = 0; i < springChain.joints.length - 1; ++i) {\n                const joint = springChain.joints[i];\n                const parentWorldRotation = joint.node.parent\n                    ? joint.node.parent.rotationWorld\n                    : this._identityQuat;\n                /* 1. Forces */\n                /* inertia = (currentTail - prevTail) * (1.0f - dragForce); */\n                const inertia = this._inertia;\n                if (springChain.center) {\n                    vec3.sub(inertia, joint.state.currentTailCenter, joint.state.prevTailCenter);\n                    springChain.center.transformVectorWorld(inertia);\n                }\n                else {\n                    vec3.sub(inertia, joint.state.currentTail, joint.state.prevTail);\n                }\n                vec3.scale(inertia, inertia, 1.0 - joint.dragForce);\n                /* stiffness = deltaTime * parentWorldRotation * localRotation * boneAxis * stiffnessForce; */\n                const stiffness = vec3.copy(this._stiffness, joint.state.boneAxis);\n                vec3.transformQuat(stiffness, stiffness, joint.state.initialLocalRotation);\n                vec3.transformQuat(stiffness, stiffness, parentWorldRotation);\n                vec3.scale(stiffness, stiffness, dt * joint.stiffness);\n                /* external = deltaTime * gravityDir * gravityPower; */\n                const external = vec3.scale(this._external, joint.gravityDir, dt * joint.gravityPower);\n                /* nextTail = currentTail + inertia + stiffness + external; */\n                const nextTail = vec3.copy(this._tempV3A, joint.state.currentTail);\n                vec3.add(nextTail, nextTail, inertia);\n                vec3.add(nextTail, nextTail, stiffness);\n                vec3.add(nextTail, nextTail, external);\n                /* constrain the length */\n                /* nextTail = worldPosition + (nextTail - worldPosition).normalized * boneLength; */\n                const worldPosition = joint.node.getTranslationWorld(this._tempV3B);\n                vec3.sub(nextTail, nextTail, worldPosition);\n                vec3.normalize(nextTail, nextTail);\n                vec3.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);\n                /* 2. Collision with colliders */\n                /* Sphere colliders */\n                for (const { shape, cache } of springChain.sphereColliders) {\n                    let tailToShape = this._tailToShape;\n                    const sphereCenter = cache.head;\n                    tailToShape = vec3.sub(tailToShape, nextTail, sphereCenter);\n                    const radius = shape.radius + joint.hitRadius;\n                    const dist = vec3.length(tailToShape) - radius;\n                    if (dist < 0.0) {\n                        vec3.normalize(tailToShape, tailToShape);\n                        vec3.scaleAndAdd(nextTail, nextTail, tailToShape, -dist);\n                        /* constraint the length */\n                        vec3.sub(nextTail, nextTail, worldPosition);\n                        vec3.normalize(nextTail, nextTail);\n                        vec3.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);\n                    }\n                }\n                /* Capsule colliders */\n                for (const { shape, cache } of springChain.capsuleColliders) {\n                    let tailToShape = this._tailToShape;\n                    const head = cache.head;\n                    const tail = cache.tail;\n                    /* Naively start with distance to the head */\n                    tailToShape = vec3.sub(tailToShape, nextTail, head);\n                    const headToTail = vec3.sub(this._headToTail, tail, head);\n                    const dot = vec3.dot(headToTail, tailToShape);\n                    if (vec3.squaredLength(headToTail) <= dot) {\n                        /* Closest to tail */\n                        vec3.sub(tailToShape, nextTail, tail);\n                    }\n                    else if (dot > 0.0) {\n                        /* Closest to middle */\n                        vec3.scale(headToTail, headToTail, dot / vec3.squaredLength(headToTail));\n                        vec3.sub(tailToShape, tailToShape, headToTail);\n                    }\n                    const radius = shape.radius + joint.hitRadius;\n                    const dist = vec3.length(tailToShape) - radius;\n                    if (dist < 0.0) {\n                        vec3.normalize(tailToShape, tailToShape);\n                        vec3.scaleAndAdd(nextTail, nextTail, tailToShape, -dist);\n                        /* constraint the length */\n                        vec3.sub(nextTail, nextTail, worldPosition);\n                        vec3.normalize(nextTail, nextTail);\n                        vec3.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);\n                    }\n                }\n                /* 3. Applying rotation */\n                vec3.copy(joint.state.prevTail, joint.state.currentTail);\n                vec3.copy(joint.state.currentTail, nextTail);\n                if (springChain.center) {\n                    vec3.copy(joint.state.prevTailCenter, joint.state.currentTailCenter);\n                    vec3.copy(joint.state.currentTailCenter, nextTail);\n                    springChain.center.transformPointInverseWorld(joint.state.currentTailCenter);\n                }\n                /* to = (nextTail * (node.parent.worldMatrix * initialLocalMatrix).inverse).normalized */\n                joint.node.parent.transformPointInverseWorld(nextTail);\n                const nextTailDualQuat = quat2.fromTranslation(this._tempQuat2, nextTail);\n                quat2.multiply(nextTailDualQuat, joint.state.initialLocalTransformInvert, nextTailDualQuat);\n                quat2.getTranslation(nextTail, nextTailDualQuat);\n                vec3.normalize(nextTail, nextTail);\n                /* node.rotation = initialLocalRotation * Quaternion.fromToQuaternion(boneAxis, to); */\n                const jointRotation = quat.rotationTo(this._tempQuatA, joint.state.boneAxis, nextTail);\n                joint.node.rotationLocal = quat.mul(this._tempQuatA, joint.state.initialLocalRotation, jointRotation);\n            }\n        });\n    }\n    /**\n     * @param {boolean} firstPerson Whether the model should render for first person or third person views\n     */\n    set firstPerson(firstPerson) {\n        this._firstPersonAnnotations.forEach((annotation) => {\n            const visible = firstPerson == annotation.firstPerson ||\n                firstPerson != annotation.thirdPerson;\n            annotation.node.getComponents('mesh').forEach((mesh) => {\n                mesh.active = visible;\n            });\n        });\n    }\n}\nexport { Vrm };\n", "import { vec3 } from 'gl-matrix';\nimport { Component, Type } from '@wonderlandengine/api';\n/**\n * Basic movement with W/A/S/D keys.\n */\nclass WasdControlsComponent extends Component {\n    static TypeName = 'wasd-controls';\n    static Properties = {\n        /** Movement speed in m/s. */\n        speed: { type: Type.Float, default: 0.1 },\n        /** Object of which the orientation is used to determine forward direction */\n        headObject: { type: Type.Object },\n    };\n    init() {\n        this.up = false;\n        this.right = false;\n        this.down = false;\n        this.left = false;\n        window.addEventListener('keydown', this.press.bind(this));\n        window.addEventListener('keyup', this.release.bind(this));\n    }\n    start() {\n        this.headObject = this.headObject || this.object;\n    }\n    update() {\n        let direction = [0, 0, 0];\n        if (this.up)\n            direction[2] -= 1.0;\n        if (this.down)\n            direction[2] += 1.0;\n        if (this.left)\n            direction[0] -= 1.0;\n        if (this.right)\n            direction[0] += 1.0;\n        vec3.normalize(direction, direction);\n        direction[0] *= this.speed;\n        direction[2] *= this.speed;\n        vec3.transformQuat(direction, direction, this.headObject.transformWorld);\n        this.object.translate(direction);\n    }\n    press(e) {\n        if (e.keyCode === 38 /* up */ ||\n            e.keyCode === 87 /* w */ ||\n            e.keyCode === 90 /* z */) {\n            this.up = true;\n        }\n        else if (e.keyCode === 39 /* right */ || e.keyCode === 68 /* d */) {\n            this.right = true;\n        }\n        else if (e.keyCode === 40 /* down */ || e.keyCode === 83 /* s */) {\n            this.down = true;\n        }\n        else if (e.keyCode === 37 /* left */ ||\n            e.keyCode === 65 /* a */ ||\n            e.keyCode === 81 /* q */) {\n            this.left = true;\n        }\n    }\n    release(e) {\n        if (e.keyCode === 38 /* up */ ||\n            e.keyCode === 87 /* w */ ||\n            e.keyCode === 90 /* z */) {\n            this.up = false;\n        }\n        else if (e.keyCode === 39 /* right */ || e.keyCode === 68 /* d */) {\n            this.right = false;\n        }\n        else if (e.keyCode === 40 /* down */ || e.keyCode === 83 /* s */) {\n            this.down = false;\n        }\n        else if (e.keyCode === 37 /* left */ ||\n            e.keyCode === 65 /* a */ ||\n            e.keyCode === 81 /* q */) {\n            this.left = false;\n        }\n    }\n}\nexport { WasdControlsComponent };\n", "import {Component, Type, Mesh, MeshAttribute, MeshIndexType} from '@wonderlandengine/api';\n\nimport {vec3} from 'gl-matrix';\n\nconst u = new Float32Array(3);\nconst v = new Float32Array(3);\n\n/**\n * Component to generate a mesh from a 2D height map image\n *\n * Downloads a PNG image and samples its pixels for height values on a\n * generated grid.\n * The value range sampled is given by the resolution parameter, which\n * will be translated to world-meters given by the size parameter.\n */\nexport class HeightMap extends Component {\n    static TypeName = 'height-map';\n    static Properties = {\n        material: {type: Type.Material},\n        resolutionX: {type: Type.Float, default: 128.0},\n        resolutionY: {type: Type.Float, default: 256.0},\n        sizeX: {type: Type.Float, default: 16.0},\n        sizeY: {type: Type.Float, default: 16.0},\n        heightmap: {type: Type.String, default: 'gardasee.png'},\n    };\n\n    start() {\n        /* In Browser-JavaScript you cannot access images directly,\n         * only through drawing on a Canvas first.\n         * Create the canvas and start loading the image */\n        let img = new Image();\n        img.crossOrigin = 'anonymous';\n        img.src = this.heightmap;\n        this.canvas = document.createElement('canvas');\n        this.canvas.setAttribute('width', this.resolutionX);\n        this.canvas.setAttribute('height', this.resolutionY);\n        this.canvas.setAttribute('style', 'display: none');\n        document.body.appendChild(this.canvas);\n\n        img.onload = function () {\n            /* Once the image has loaded, draw it onto the canvas\n             * to be sampled later */\n            this.ctx = this.canvas.getContext('2d');\n            this.ctx.drawImage(img, 0, 0);\n            img.style.display = 'none';\n\n            this.generate();\n        }.bind(this);\n    }\n\n    generate() {\n        console.log('Generating terrain...');\n        this.meshComp = this.object.addComponent('mesh');\n        this.meshComp.material = this.material;\n\n        const vertexCount = 6 * (this.resolutionX - 1) * (this.resolutionY - 1);\n        this.indexData = new Uint32Array(vertexCount);\n        /* Indices:\n         * 0--1\n         * | /\n         * |/\n         * 2  4\n         *   /|\n         *  / |\n         * 5--3\n         */\n        for (let i = 0; i < vertexCount; i += 6) {\n            this.indexData\n                .subarray(i, i + 6)\n                .set([i + 0, i + 2, i + 1, i + 5, i + 3, i + 4]);\n        }\n\n        console.log('Vertices:', vertexCount);\n        console.log('Data size:', 'unknown', 'bytes');\n\n        this.mesh = new Mesh(this.engine, {\n            vertexCount: vertexCount,\n            indexData: this.indexData,\n            indexType: MeshIndexType.UnsignedInt,\n        });\n\n        let v = 0;\n        const scaleX = this.resolutionX / this.sizeX;\n        const scaleY = this.resolutionY / this.sizeY;\n\n        const positions = this.mesh.attribute(MeshAttribute.Position);\n        const texCoords = this.mesh.attribute(MeshAttribute.TextureCoordinate);\n        const normals = this.mesh.attribute(MeshAttribute.Normal);\n        const colors = this.mesh.attribute(MeshAttribute.Color);\n\n        for (let x = 0; x < this.resolutionX - 1; ++x) {\n            for (let y = 0; y < this.resolutionY - 1; ++y) {\n                let height = 0;\n                for (let i = 0; i < 4; ++i) {\n                    height = this.pick([x + (i & 1), y + ((i & 2) >> 1)]);\n                    positions.set(v + i, [\n                        (x + (i & 1)) / scaleX,\n                        height,\n                        (y + ((i & 2) >> 1)) / scaleY,\n                    ]);\n                }\n\n                /* Duplicate vertex 1 and 2, triangles will receive different flat normals */\n                for (let i = 0; i < 2; ++i) {\n                    positions.set(v + (4 + i), positions.get(v + (i + 1)));\n                }\n\n                v += 6;\n\n                const c = (height + 10) / 32;\n                for (let i = 0; i < 6; ++i) {\n                    colors.set(v + i, [x / this.resolutionX, c, y / this.resolutionY, 1.0]);\n                }\n            }\n        }\n\n        /* Texture coordinates, if the exist */\n        v = 0;\n        if (texCoords)\n            for (let x = 0; x < this.resolutionX - 1; ++x) {\n                for (let y = 0; y < this.resolutionY - 1; ++y) {\n                    for (let i = 0; i < 4; ++i) {\n                        texCoords.set(v + i, [x + (i & 1), y + ((i & 2) >> 1)]);\n                    }\n\n                    /* Duplicate vertex 1 and 2, triangles will receive different flat normals */\n                    for (let i = 0; i < 2; ++i) {\n                        texCoords.set(v + (4 + i), texCoords.get(v + (i + 1)));\n                    }\n\n                    v += 6;\n                }\n            }\n\n        const normal = new Float32Array(3);\n        for (let i = 0; i < vertexCount; i += 6) {\n            this.surfaceNormal(\n                normal,\n                positions.get(this.indexData[i + 0]),\n                positions.get(this.indexData[i + 1]),\n                positions.get(this.indexData[i + 2])\n            );\n\n            /* Set with offset, will set all three components of the normal */\n            for (let v = 0; v < 3; ++v) {\n                /* Set with offset, will set all three components of the normal */\n                normals.set(this.indexData[i + v], normal);\n            }\n\n            this.surfaceNormal(\n                normal,\n                positions.get(this.indexData[i + 3]),\n                positions.get(this.indexData[i + 4]),\n                positions.get(this.indexData[i + 5])\n            );\n\n            for (let v = 3; v < 6; ++v) {\n                /* Set with offset, will set all three components of the normal */\n                normals.set(this.indexData[i + v], normal);\n            }\n        }\n        this.meshComp.mesh = this.mesh;\n\n        this.engine.scene.dispatchReadyEvent();\n    }\n\n    pick(coord) {\n        const x = coord[0];\n        const y = coord[1];\n        let pixels = this.ctx.getImageData(x, y, 1, 1);\n        let data = pixels.data;\n        const height = (data[0] - 220) / 32.0;\n        return height;\n    }\n\n    surfaceNormal(out, p1, p2, p3) {\n        vec3.sub(u, p2, p1);\n        vec3.sub(v, p3, p1);\n        vec3.cross(out, u, v);\n        vec3.normalize(out, out);\n\n        return out;\n    }\n}\n", "/**\n * /!\\ This file is auto-generated.\n *\n * This is the entry point of your standalone application.\n *\n * There are multiple tags used by the editor to inject code automatically:\n *     - `wle:auto-imports:start` and `wle:auto-imports:end`: The list of import statements\n *     - `wle:auto-register:start` and `wle:auto-register:end`: The list of component to register\n *     - `wle:auto-constants:start` and `wle:auto-constants:end`: The project's constants,\n *        such as the project's name, whether it should use the physx runtime, etc...\n *     - `wle:auto-benchmark:start` and `wle:auto-benchmark:end`: Append the benchmarking code\n */\n\n/* wle:auto-imports:start */\nimport {MouseLookComponent} from '@wonderlandengine/components';\nimport {WasdControlsComponent} from '@wonderlandengine/components';\nimport {HeightMap} from './height-map.js';\n/* wle:auto-imports:end */\n\nimport {loadRuntime} from '@wonderlandengine/api';\nimport * as API from '@wonderlandengine/api'; // Deprecated: Backward compatibility.\n\n/* wle:auto-constants:start */\nconst Constants = {\n    ProjectName: 'HeightMap',\n    RuntimeBaseName: 'WonderlandRuntime',\n    WebXRRequiredFeatures: ['local',],\n    WebXROptionalFeatures: ['local','hand-tracking','hit-test',],\n};\nconst RuntimeOptions = {\n    physx: false,\n    loader: false,\n    xrFramebufferScaleFactor: 1,\n    xrOfferSession: {\n        mode: 'auto',\n        features: Constants.WebXRRequiredFeatures,\n        optionalFeatures: Constants.WebXROptionalFeatures,\n    },\n    canvas: 'canvas',\n};\n/* wle:auto-constants:end */\n\nconst engine = await loadRuntime(Constants.RuntimeBaseName, RuntimeOptions);\nObject.assign(engine, API); // Deprecated: Backward compatibility.\nwindow.WL = engine; // Deprecated: Backward compatibility.\n\nengine.onSceneLoaded.once(() => {\n    const el = document.getElementById('version');\n    if (el) setTimeout(() => el.remove(), 2000);\n});\n\n/* WebXR setup. */\n\nfunction requestSession(mode) {\n    engine\n        .requestXRSession(mode, Constants.WebXRRequiredFeatures, Constants.WebXROptionalFeatures)\n        .catch((e) => console.error(e));\n}\n\nfunction setupButtonsXR() {\n    /* Setup AR / VR buttons */\n    const arButton = document.getElementById('ar-button');\n    if (arButton) {\n        arButton.dataset.supported = engine.arSupported;\n        arButton.addEventListener('click', () => requestSession('immersive-ar'));\n    }\n    const vrButton = document.getElementById('vr-button');\n    if (vrButton) {\n        vrButton.dataset.supported = engine.vrSupported;\n        vrButton.addEventListener('click', () => requestSession('immersive-vr'));\n    }\n}\n\nif (document.readyState === 'loading') {\n    window.addEventListener('load', setupButtonsXR);\n} else {\n    setupButtonsXR();\n}\n\n/* wle:auto-register:start */\nengine.registerComponent(MouseLookComponent);\nengine.registerComponent(WasdControlsComponent);\nengine.registerComponent(HeightMap);\n/* wle:auto-register:end */\n\nengine.scene.load(`${Constants.ProjectName}.bin`).catch((e) => {\n    console.error(e);\n    window.alert(`Failed to load ${Constants.ProjectName}.bin:`, e);\n});\n\n/* wle:auto-benchmark:start */\n/* wle:auto-benchmark:end */\n"],
  "mappings": "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EAAE,CAAC,KAAK,KAAK,IAAI,KAAK,EAAE,KAAc,UAAU,KAAK,IAAI,GAAK,KAAK,IAAI,EAAE,GAAG,KAAK,IAAI,EAAE,CAAC,KAAK,KAAK,IAAI,KAAK,EAAE,KAAc,UAAU,KAAK,IAAI,GAAK,KAAK,IAAI,EAAE,GAAG,KAAK,IAAI,EAAE,CAAC,KAAK,KAAK,IAAI,KAAK,EAAE,KAAc,UAAU,KAAK,IAAI,GAAK,KAAK,IAAI,EAAE,GAAG,KAAK,IAAI,EAAE,CAAC,KAAK,KAAK,IAAI,KAAK,EAAE,KAAc,UAAU,KAAK,IAAI,GAAK,KAAK,IAAI,EAAE,GAAG,KAAK,IAAI,EAAE,CAAC,KAAK,KAAK,IAAI,KAAK,EAAE,KAAc,UAAU,KAAK,IAAI,GAAK,KAAK,IAAI,EAAE,GAAG,KAAK,IAAI,EAAE,CAAC,KAAK,KAAK,IAAI,KAAK,EAAE,KAAc,UAAU,KAAK,IAAI,GAAK,KAAK,IAAI,EAAE,GAAG,KAAK,IAAI,EAAE,CAAC,KAAK,KAAK,IAAI,KAAK,EAAE,KAAc,UAAU,KAAK,IAAI,GAAK,KAAK,IAAI,EAAE,GAAG,KAAK,IAAI,EAAE,CAAC,KAAK,KAAK,IAAI,KAAK,EAAE,KAAc,UAAU,KAAK,IAAI,GAAK,KAAK,IAAI,EAAE,GAAG,KAAK,IAAI,EAAE,CAAC,KAAK,KAAK,IAAI,KAAK,EAAE,KAAc,UAAU,KAAK,IAAI,GAAK,KAAK,IAAI,EAAE,GAAG,KAAK,IAAI,EAAE,CAAC,KAAK,KAAK,IAAI,MAAM,GAAG,KAAc,UAAU,KAAK,IAAI,GAAK,KAAK,IAAI,GAAG,GAAG,KAAK,IAAI,GAAG,CAAC,KAAK,KAAK,IAAI,MAAM,GAAG,KAAc,UAAU,KAAK,IAAI,GAAK,KAAK,IAAI,GAAG,GAAG,KAAK,IAAI,GAAG,CAAC,KAAK,KAAK,IAAI,MAAM,GAAG,KAAc,UAAU,KAAK,IAAI,GAAK,KAAK,IAAI,GAAG,GAAG,KAAK,IAAI,GAAG,CAAC,KAAK,KAAK,IAAI,MAAM,GAAG,KAAc,UAAU,KAAK,IAAI,GAAK,KAAK,IAAI,GAAG,GAAG,KAAK,IAAI,GAAG,CAAC,KAAK,KAAK,IAAI,MAAM,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",
  "names": ["HowlerGlobal", "self", "Howler", "e", "i", "Howl", "str", "Sound", "timeout", "len", "earcut", "equals", "len", "e", "Type", "TransactionType", "LogTag", "Collider", "Alignment", "Justification", "TextEffect", "InputType", "LightType", "AnimationState", "ForceMode", "CollisionEventType", "Shape", "MeshAttribute", "MaterialParamType", "engine", "length", "angle", "LockAxis", "offset", "v", "MeshIndexType", "MeshSkinningType", "canvas", "animId", "engine", "engine", "min", "max", "engine", "size", "engine", "v", "LogLevel", "threads", "str", "engine", "v", "checkXRSupport", "simd", "threads", "canvas", "filename", "engine", "__decorate", "tempQuat", "create", "create", "v", "len", "scale", "add", "clone", "copy", "create", "dot", "equals", "exactEquals", "fromValues", "identity", "invert", "len", "length", "lerp", "mul", "multiply", "normalize", "random", "rotateX", "rotateY", "rotateZ", "scale", "set", "sqrLen", "squaredLength", "str", "add", "clone", "copy", "create", "equals", "exactEquals", "fromValues", "mul", "multiply", "rotateX", "rotateY", "rotateZ", "scale", "set", "str", "sub", "subtract", "create", "clone", "fromValues", "copy", "set", "add", "subtract", "multiply", "scale", "len", "rotateX", "rotateY", "rotateZ", "str", "exactEquals", "equals", "sub", "mul", "offset", "create", "clone", "fromValues", "copy", "set", "add", "scale", "length", "squaredLength", "normalize", "len", "dot", "lerp", "exactEquals", "equals", "forEach", "create", "offset", "create", "identity", "dot", "multiply", "rotateX", "rotateY", "rotateZ", "scale", "random", "invert", "str", "clone", "fromValues", "copy", "set", "add", "mul", "lerp", "length", "len", "squaredLength", "sqrLen", "normalize", "exactEquals", "equals", "add", "clone", "conjugate", "copy", "create", "dot", "equals", "exactEquals", "fromRotation", "fromRotationTranslation", "fromTranslation", "fromValues", "getTranslation", "identity", "invert", "len", "length", "lerp", "mul", "multiply", "normalize", "rotateX", "rotateY", "rotateZ", "scale", "set", "sqrLen", "squaredLength", "str", "translate", "create", "clone", "fromValues", "fromRotationTranslation", "fromTranslation", "fromRotation", "copy", "identity", "set", "getTranslation", "translate", "v", "rotateX", "rotateY", "rotateZ", "add", "multiply", "mul", "scale", "dot", "lerp", "invert", "squaredLength", "conjugate", "length", "len", "sqrLen", "normalize", "str", "exactEquals", "equals", "__decorate", "__decorate", "tempVec", "engine", "canvas", "dist", "__decorate", "import_howler", "canvas", "a", "direction", "v", "v", "__decorate", "tempVec3", "engine", "earcut", "tempVec3", "__decorate", "lookAt", "offset", "dist", "dot", "direction", "v", "normal"]
}
